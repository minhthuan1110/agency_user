import{a_ as O,aj as T,$ as l,z as f,ab as Et,N as d,an as u,U as bt,b5 as kt,c9 as yt,aw as rt,ao as Tt,bd as w,bg as Mt,ac as At,au as R,c3 as L,ae as Bt,bc as ot,ah as _,a3 as o,az as C,bZ as xt,ap as lt,ai as ht,d2 as St,cb as Vt,bj as It,af as g,aA as H,bw as Ot,bh as wt,c8 as S,br as $t,E as m,a7 as Rt,d3 as D,ax as V,bT as N,ar as Lt,d4 as Ht,ad as Dt,cE as Nt,aQ as P,cC as Pt,aR as A,Z as Wt}from"./index.a3c5a5ee.js";var{ios:Ft,mac:Kt}=O.real(),jt=Ft||Kt,Ut=function(t){var e;try{e={start:t.selectionStart,end:t.selectionEnd}}catch{e={start:0,end:0}}return e},Xt=function(t,e){var i=T.getBody();if(!(!i.contains(t)&&!i.contains(t.getRootNode().host)))try{t.selectionStart=e.start,t.selectionEnd=e.end}catch{}},dt=function(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(t=l(t).get(0),!f(e))return Ut(t);!i&&jt&&T.getActiveElement(t)!==t||Xt(t,e)};function zt(){var{android:t,version:e}=O.real();return t&&e[0]>4}function Gt(){return"onbeforeinput"in T.createElement("input")||zt()}var v=" ",ut=Et.inherit({ctor:function(t){this._value=v,d(this,t)},next:function(t){if(!arguments.length)return this._next;this._next=t},text:u,value:u,rawValue:u,handle:u,_prepareHandlingArgs:function(t,e){var i,a,n;e=e||{};var s=Object.prototype.hasOwnProperty.call(t,"value")?"value":"text";return t[s]=(i=e.str)!==null&&i!==void 0?i:t[s],t.start=(a=e.start)!==null&&a!==void 0?a:t.start,t.length=(n=e.length)!==null&&n!==void 0?n:t.length,t.index=t.index+1,t},reset:u,clear:u,first:function(t){return t=t||0,this.next().first(t+1)},isAccepted:function(){return!1},adjustedCaret:function(t,e,i){return e?this._adjustedForward(t,0,i):this._adjustedBackward(t,0,i)},_adjustedForward:u,_adjustedBackward:u,isValid:u}),Yt=ut.inherit({next:u,handle:function(){return 0},text:function(){return""},value:function(){return""},first:function(){return 0},rawValue:function(){return""},adjustedCaret:function(){return 0},isValid:function(){return!0}}),_t=ut.inherit({text:function(){return(this._value!==v?this._value:this.maskChar)+this.next().text()},value:function(){return this._value+this.next().value()},rawValue:function(){return this._value+this.next().rawValue()},handle:function(t){var e=Object.prototype.hasOwnProperty.call(t,"value")?t.value:t.text;if(!e||!e.length||!t.length)return 0;if(t.start)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start-1}));var i=e[0],a=e.substring(1);return this._tryAcceptChar(i,t),this._accepted()?this.next().handle(this._prepareHandlingArgs(t,{str:a,length:t.length-1}))+1:this.handle(this._prepareHandlingArgs(t,{str:a,length:t.length-1}))},clear:function(t){this._tryAcceptChar(v,t),this.next().clear(this._prepareHandlingArgs(t))},reset:function(){this._accepted(!1),this.next().reset()},_tryAcceptChar:function(t,e){if(this._accepted(!1),!!this._isAllowed(t,e)){var i=t===v?this.maskChar:t;e.fullText=e.fullText.substring(0,e.index)+i+e.fullText.substring(e.index+1),this._accepted(!0),this._value=t}},_accepted:function(t){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!t},first:function(t){return this._value===v?t||0:this.callBase(t)},_isAllowed:function(t,e){return t===v?!0:this._isValid(t,e)},_isValid:function(t,e){var i=this.allowedChars;return i instanceof RegExp?i.test(t):bt(i)?i(t,e.index,e.fullText):Array.isArray(i)?i.includes(t):i===t},isAccepted:function(t){return t===0?this._accepted():this.next().isAccepted(t-1)},_adjustedForward:function(t,e,i){return e>=t?e:this.next()._adjustedForward(t,e+1,i)||e+1},_adjustedBackward:function(t,e){return e>=t-1?t:this.next()._adjustedBackward(t,e+1)||e+1},isValid:function(t){return this._isValid(this._value,t)&&this.next().isValid(this._prepareHandlingArgs(t))}}),W=_t.inherit({value:function(){return this.next().value()},handle:function(t){var e=Object.prototype.hasOwnProperty.call(t,"value"),i=e?t.value:t.text;if(!i.length||!t.length)return 0;if(t.start||e)return this.next().handle(this._prepareHandlingArgs(t,{start:t.start&&t.start-1}));var a=i[0],n=i.substring(1);this._tryAcceptChar(a);var s=this._isAllowed(a)?this._prepareHandlingArgs(t,{str:n,length:t.length-1}):t;return this.next().handle(s)+1},clear:function(t){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(t))},_tryAcceptChar:function(t){this._accepted(this._isValid(t))},_isValid:function(t){return t===this.maskChar},first:function(t){return t=t||0,this.next().first(t+1)},_adjustedForward:function(t,e,i){return e>=t&&i===this.maskChar?e:t===e+1&&this._accepted()?t:this.next()._adjustedForward(t,e+1,i)},_adjustedBackward:function(t,e){return e>=t-1?0:this.next()._adjustedBackward(t,e+1)},isValid:function(t){return this.next().isValid(this._prepareHandlingArgs(t))}}),E="dx-invalid-message",qt="dx-invalid-message-auto",Zt="dx-invalid-message-always",Qt="dx-invalid-message-content",Jt=100,ct=kt.inherit({_getDefaultOptions(){return d(this.callBase(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),target:void 0,mode:"auto",validationErrors:void 0,positionRequest:void 0,boundary:void 0,offset:{h:0,v:0},contentId:void 0})},_init(){this.callBase(),this.updateMaxWidth(),this._updatePosition()},_initMarkup(){this.callBase(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()},_updatePositionByTarget:function(){var{target:t}=this.option();this.option("position.of",t)},_ensureMessageNotEmpty:function(){this._textMarkup=this._getTextMarkup();var t=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(t)},_toggleVisibilityClasses:function(t){t?(this.$element().addClass(E),this.$wrapper().addClass(E)):(this.$element().removeClass(E),this.$wrapper().removeClass(E))},_updateContentId(){var{container:t,contentId:e}=this.option(),i=e!=null?e:l(t).attr("aria-describedby");this.$content().addClass(Qt).attr("id",i)},_renderInnerHtml(t){var e=t&&l(t);e==null||e.html(this._textMarkup)},_getTextMarkup(){var t,e=(t=this.option("validationErrors"))!==null&&t!==void 0?t:[],i="";return e.forEach(a=>{var n,s=i?"<br />":"";i+=s+yt((n=a==null?void 0:a.message)!==null&&n!==void 0?n:"")}),i},_toggleModeClass(){var t=this.option("mode");this.$wrapper().toggleClass(qt,t==="auto").toggleClass(Zt,t==="always")},updateMaxWidth(){var t=this.option("target"),e=rt(t),i="100%";e&&(i=Math.max(e,Jt)),this.option({maxWidth:i})},_updatePosition:function(){var{positionRequest:t,rtlEnabled:e,offset:i,boundary:a}=this.option(),n=Tt(e),s=t==="below"?[" top"," bottom"]:[" bottom"," top"];e&&(i.h=-i.h),t!=="below"&&(i.v=-i.v),this.option("position",{offset:i,boundary:a,my:n+s[0],at:n+s[1],collision:"none flip"})},_optionChanged(t){var{name:e,value:i}=t;switch(e){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),this.callBase(t);break;case"boundary":this.option("position.boundary",i);break;case"mode":this._toggleModeClass(i);break;case"rtlEnabled":case"offset":case"positionRequest":this._updatePosition();break;case"container":this._updateContentId(),this.callBase(t);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:this.callBase(t)}}});w("dxValidationMessage",ct);var F="dx-invalid-message-auto",te="dx-state-readonly",ee="dx-invalid",ie="dx-show-invalid-badge",K="dx-validation-target",ae="valid",j="invalid",ne="editorReadOnly",se=["outlined","filled","underlined"],U={validationMessageMode:"mode",validationMessageOffset:"offset",validationBoundary:"boundary"},I=Mt.inherit({ctor:function(){this.showValidationMessageTimeout=null,this.validationRequest=At(),this.callBase.apply(this,arguments)},_createElement:function(t){this.callBase(t);var e=this.$element();e&&R(e[0],K,this)},_initOptions:function(t){this.callBase.apply(this,arguments),this.option(L.initValidationOptions(t))},_init:function(){this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions"));var t=this.$element();t.addClass(ie)},_getDefaultOptions:function(){return d(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:ae,validationMessageMode:"auto",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})},_attachKeyboardEvents:function(){this.option("readOnly")||this.callBase()},_setOptionsByReference:function(){this.callBase(),d(this._optionsByReference,{validationError:!0})},_createValueChangeAction:function(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction:function(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction:function(){this._valueChangeActionSuppressed=!1},_initMarkup:function(){var t;this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState(),(t=this.option("_onMarkupRendered"))===null||t===void 0||t()},_raiseValueChangeAction:function(t,e){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(t,e))},_valueChangeArgs:function(t,e){return{value:t,previousValue:e,event:this._valueChangeEventInstance}},_saveValueChangeEvent:function(t){this._valueChangeEventInstance=t},_focusInHandler:function(t){var e=this.option("validationMessageMode")==="auto";if(this._canValueBeChangedByClick()&&e){var i,a=(i=this._validationMessage)===null||i===void 0?void 0:i.$wrapper();a==null||a.removeClass(F),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>a==null?void 0:a.addClass(F),150)}return this.callBase(t)},_canValueBeChangedByClick:function(){return!1},_getStylingModePrefix:function(){return"dx-editor-"},_renderStylingMode:function(){var t=this.option("stylingMode"),e=this._getStylingModePrefix(),i=se.map(r=>e+r);i.forEach(r=>this.$element().removeClass(r));var a=e+t;if(i.indexOf(a)===-1){var n=this._getDefaultOptions().stylingMode,s=this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;a=e+(s||n)}this.$element().addClass(a)},_getValidationErrors:function(){var t=this.option("validationErrors");return!t&&this.option("validationError")&&(t=[this.option("validationError")]),t},_disposeValidationMessage:function(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)},_toggleValidationClasses:function(t){this.$element().toggleClass(ee,t),this.setAria(j,t||void 0)},_renderValidationState:function(){var t=this.option("isValid")&&this.option("validationStatus")!==j,e=this._getValidationErrors(),i=this.$element();if(this._toggleValidationClasses(!t),!!Bt()&&(this._disposeValidationMessage(),!t&&e)){var{validationMessageMode:a,validationMessageOffset:n,validationBoundary:s,rtlEnabled:r}=this.option();this._$validationMessage=l("<div>").appendTo(i);var h="dx-".concat(new ot);this.setAria("describedby",h),this._validationMessage=new ct(this._$validationMessage,d({validationErrors:e,rtlEnabled:r,target:this._getValidationMessageTarget(),visualContainer:i,mode:a,positionRequest:"below",offset:n,boundary:s,contentId:h},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}},_getValidationMessageTarget:function(){return this.$element()},_toggleReadOnlyState:function(){var t=this.option("readOnly");this._toggleBackspaceHandler(t),this.$element().toggleClass(te,!!t),this.setAria("readonly",t||void 0)},_toggleBackspaceHandler:function(t){var e=this._keyboardEventBindingTarget(),i=_("keydown",ne);o.off(e,i),t&&o.on(e,i,a=>{C(a)==="backspace"&&a.preventDefault()})},_dispose:function(){var t=this.$element()[0];R(t,K,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),this.callBase()},_setSubmitElementName:function(t){var e=this._getSubmitElement();!e||(t.length>0?e.attr("name",t):e.removeAttr("name"))},_getSubmitElement:function(){return null},_setValidationMessageOption:function(t){var e,{name:i,value:a}=t,n=U[i]?U[i]:i;(e=this._validationMessage)===null||e===void 0||e.option(n,a)},_hasActiveElement:u,_optionChanged:function(t){var e;switch(t.name){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":t.value!=t.previousValue&&this.validationRequest.fire({value:t.value,editor:this}),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(t.value,t.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(t),(e=this._validationMessage)===null||e===void 0||e.updateMaxWidth();break;case"name":this._setSubmitElementName(t.value);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(L.synchronizeValidationOptions(t,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessageOffset":this._setValidationMessageOption(t);break;case"rtlEnabled":this._setValidationMessageOption(t),this.callBase(t);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,t);break;default:this.callBase(t)}},blur:function(){this._hasActiveElement()&&xt()},reset:function(){var t=this._getDefaultOptions();this.option("value",t.value)}});I.isEditor=t=>t instanceof I;class pt{constructor(e,i,a){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=i,this.name=e,this.options=a||{}}_addPlaceMarker(e){this.$placeMarker=l("<div>").appendTo(e)}_addToContainer(e){var{$placeMarker:i,$container:a}=this;i?i.replaceWith(e):e.appendTo(a)}_attachEvents(){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){var{editor:e,options:i}=this;return i.visible||!e.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){var{instance:e,$placeMarker:i}=this;e&&(e.dispose?e.dispose():e.remove(),this.instance=null),i&&i.remove()}render(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.$container;if(this.$container=e,this._isVisible()){var{instance:i,$element:a}=this._create();this.instance=i,this._attachEvents(i,a)}else this._addPlaceMarker(e)}update(){return this._shouldRender()&&this.render(),!!this.instance}}var re=lt.down,oe="dx-state-invisible",le="dx-clear-button-area",he="dx-icon-clear",de="dx-icon",ue="dx-show-clear-button";class _e extends pt{_create(){var e=l("<span>").addClass(le).append(l("<span>").addClass(de).addClass(he));return this._addToContainer(e),this.update(!0),{instance:e,$element:e}}_isVisible(){var{editor:e}=this;return e._isClearButtonVisible()}_attachEvents(e,i){var{editor:a}=this,n=a.NAME;o.on(i,_(re,n),s=>{s.preventDefault(),s.pointerType!=="mouse"&&a._clearValueHandler(s)}),o.on(i,_(ht,n),s=>a._clearValueHandler(s))}_legacyRender(e,i){e.toggleClass(ue,i)}update(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;!e&&super.update();var{editor:i,instance:a}=this,n=i.$element(),s=this._isVisible();a&&a.toggleClass(oe,!s),this._legacyRender(n,s)}}var X="dx-custom-button-hovered";class ce extends pt{_attachEvents(e,i){var{editor:a}=this;o.on(i,St,()=>{a.$element().addClass(X)}),o.on(i,Vt,()=>{a.$element().removeClass(X)}),o.on(i,ht,n=>{n.stopPropagation()})}_create(){var{editor:e}=this,i=l("<div>");this._addToContainer(i);var a=e._createComponent(i,It,d({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(e)}));return{$element:i,instance:a}}_prepareIntegrationOptions(e){return d({},e.option("integrationOptions"),{skipTemplates:["content"]})}update(){var e=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),e}_isVisible(){var{editor:e}=this;return e.option("visible")}_isDisabled(){var e=this.options.disabled!==void 0;return e?this.instance?this.instance.option("disabled"):this.options.disabled:this.editor.option("readOnly")}}var pe="dx-texteditor-buttons-container";function ve(t){(()=>{if(!t||typeof t!="object"||Array.isArray(t))throw g.Error("E1053")})(),(()=>{if(!("name"in t))throw g.Error("E1054")})(),(()=>{var{name:e}=t;if(typeof e!="string")throw g.Error("E1055")})(),(()=>{var{location:e}=t;"location"in t&&e!=="after"&&e!=="before"&&(t.location="after")})()}function z(t,e){if(t.indexOf(e)!==-1)throw g.Error("E1055",e);t.push(e)}function fe(t,e){return!!e.find(i=>i.name===t)}class ge{constructor(e,i){this.buttons=[],this.defaultButtonsInfo=i,this.editor=e}_compileButtonInfo(e){var i=[];return e.map(a=>{var n=typeof a=="string";n||ve(a);var s=n||fe(a.name,this.defaultButtonsInfo);if(s){var r=this.defaultButtonsInfo.find(c=>{var{name:p}=c;return p===a||p===a.name});if(!r)throw g.Error("E1056",this.editor.NAME,a);return z(i,a),r}else{var{name:h}=a;return z(i,h),d(a,{Ctor:ce})}})}_createButton(e){var{Ctor:i,options:a,name:n}=e,s=new i(n,this.editor,a);return this.buttons.push(s),s}_renderButtons(e,i,a){var n=null,s=e?this._compileButtonInfo(e):this.defaultButtonsInfo;return s.forEach(r=>{var{location:h="after"}=r;h===a&&this._createButton(r).render((()=>(n=n||l("<div>").addClass(pe),a==="before"?i.prepend(n):i.append(n),n))())}),n}clean(){this.buttons.forEach(e=>e.dispose()),this.buttons=[]}getButton(e){var i=this.buttons.find(a=>{var{name:n}=a;return n===e});return i&&i.instance}renderAfterButtons(e,i){return this._renderButtons(e,i,"after")}renderBeforeButtons(e,i){return this._renderButtons(e,i,"before")}updateButtons(e){this.buttons.forEach(i=>{(!e||e.indexOf(i.name)!==-1)&&i.update()})}}var G="dx-texteditor-label",Y="dx-texteditor-with-label",q="dx-texteditor-with-floating-label",Z="dx-texteditor-with-before-buttons",me="dx-label-before",Ce="dx-label",Ee="dx-label-after";class be{constructor(e){var{$editor:i,text:a,mode:n,mark:s,containsButtonsBefore:r,containerWidth:h,beforeWidth:c}=e;this._props={$editor:i,text:a,mode:n,mark:s,containsButtonsBefore:r,containerWidth:h,beforeWidth:c},this._id="".concat(G,"-").concat(new ot),this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&this._props.mode!=="hidden"}_render(){this._$before=l("<div>").addClass(me),this._$labelSpan=l("<span>"),this._$label=l("<div>").addClass(Ce).append(this._$labelSpan),this._$after=l("<div>").addClass(Ee),this._$root=l("<div>").addClass(G).attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){var e=this._isVisible();this._updateEditorBeforeButtonsClass(e),this._updateEditorLabelClass(e),e?this._$root.appendTo(this._props.$editor):this._$root.detach()}_updateEditorLabelClass(e){if(this._props.$editor.removeClass(q).removeClass(Y),e){var i=this._props.mode==="floating"?q:Y;this._props.$editor.addClass(i)}}_updateEditorBeforeButtonsClass(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._isVisible();if(this._props.$editor.removeClass(Z),e){var i=this._props.containsButtonsBefore?Z:"";this._props.$editor.addClass(i)}}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){this._$before.css({width:this._props.beforeWidth})}_updateMaxWidth(){this._$label.css({maxWidth:this._props.containerWidth})}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(e){this._props.mode=e,this._toggleMarkupVisibility()}updateText(e){this._props.text=e,this._updateText(),this._toggleMarkupVisibility()}updateMark(e){this._props.mark=e,this._updateMark()}updateContainsButtonsBefore(e){this._props.containsButtonsBefore=e,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(e){this._props.beforeWidth=e,this._updateBeforeWidth()}updateMaxWidth(e){this._props.containerWidth=e,this._updateMaxWidth()}}var ke="dx-texteditor",ye="dx-texteditor-input-container",vt="dx-texteditor-input",Te="."+vt,Me="dx-texteditor-container",Ae="dx-texteditor-buttons-container",Q="dx-placeholder",Be="dx-texteditor-empty",xe="dx-state-invisible",Se="dx-pending-indicator",J="dx-validation-pending",Ve="dx-valid",b=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],Ie=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"],Oe=be;function tt(t){if(f(t)&&!Array.isArray(t))throw g.Error("E1053")}var we=I.inherit({ctor:function(t,e){e&&tt(e.buttons),this._buttonCollection=new ge(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return d(this.callBase(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:function(t){return f(t)&&t!==!1?t:""},stylingMode:H().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})},_defaultOptionsRules:function(){var t=Ot();return this.callBase().concat([{device:function(){return wt(t)},options:{stylingMode:H().editorStylingMode||"filled",labelMode:"floating"}}])},_getDefaultButtons:function(){return[{name:"clear",Ctor:_e}]},_isClearButtonVisible:function(){return this.option("showClearButton")&&!this.option("readOnly")},_input:function(){return this.$element().find(Te).first()},_isFocused:function(){return S(this._input())||this.callBase()},_inputWrapper:function(){return this.$element()},_buttonsContainer:function(){return this._inputWrapper().find("."+Ae).eq(0)},_isControlKey:function(t){return Ie.indexOf(t)!==-1},_renderStylingMode:function(){this.callBase(),this._updateButtonsStyling(this.option("stylingMode"))},_initMarkup:function(){this.$element().addClass(ke),this._renderInput(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),this.callBase(),this._renderValue(),this._renderLabel()},_render:function(){this.callBase(),this._refreshValueChangeEvent(),this._renderEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()},_renderInput:function(){this._$buttonsContainer=this._$textEditorContainer=l("<div>").addClass(Me).appendTo(this.$element()),this._$textEditorInputContainer=l("<div>").addClass(ye).appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput()),this._renderButtonContainers()},_getInputContainer(){return this._$textEditorInputContainer},_renderPendingIndicator:function(){this.$element().addClass(J);var t=this._getInputContainer(),e=l("<div>").addClass(Se).appendTo(t);this._pendingIndicator=this._createComponent(e,$t)},_disposePendingIndicator:function(){!this._pendingIndicator||(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass(J))},_renderValidationState:function(){this.callBase();var t=this.option("validationStatus")==="pending",e=this.$element();t?(!this._pendingIndicator&&this._renderPendingIndicator(),this._showValidMark=!1):(this.option("validationStatus")==="invalid"&&(this._showValidMark=!1),!this._showValidMark&&this.option("showValidationMark")===!0&&(this._showValidMark=this.option("validationStatus")==="valid"&&!!this._pendingIndicator),this._disposePendingIndicator()),e.toggleClass(Ve,!!this._showValidMark)},_renderButtonContainers:function(){var t=this.option("buttons");this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(t,this._$buttonsContainer),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(t,this._$buttonsContainer)},_cleanButtonContainers:function(){var t,e;(t=this._$beforeButtonsContainer)===null||t===void 0||t.remove(),(e=this._$afterButtonsContainer)===null||e===void 0||e.remove(),this._buttonCollection.clean()},_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,this._$buttonsContainer=null,this.callBase()},_createInput:function(){var t=l("<input>");return this._applyInputAttributes(t,this.option("inputAttr")),t},_setSubmitElementName:function(t){var e=this.option("inputAttr.name");return this.callBase(t||e||"")},_applyInputAttributes:function(t,e){var i=d(this._getDefaultAttributes(),e);t.attr(i).addClass(vt).css("minHeight",this.option("height")?"0":"")},_getDefaultAttributes:function(){var t={autocomplete:"off"},{ios:e,mac:i}=O.real();return(e||i)&&(t.placeholder=" "),t},_updateButtons:function(t){this._buttonCollection.updateButtons(t)},_updateButtonsStyling:function(t){m(this.option("buttons"),(e,i)=>{var{options:a,name:n}=i;if(a&&!a.stylingMode&&this.option("visible")){var s=this.getButton(n);s.option&&s.option("stylingMode",t==="underlined"?"text":"contained")}})},_renderValue:function(){var t=this._renderInputValue();return t.promise()},_renderInputValue:function(t){var e;t=(e=t)!==null&&e!==void 0?e:this.option("value");var i=this.option("text"),a=this.option("displayValue"),n=this.option("displayValueFormatter");return a!==void 0&&t!==null?i=n(a):f(i)||(i=n(t)),this.option("text",i),this._input().val()!==(f(i)?i:"")?this._renderDisplayText(i):this._toggleEmptinessEventHandler(),new Rt().resolve()},_renderDisplayText:function(t){this._input().val(t),this._toggleEmptinessEventHandler()},_isValueValid:function(){if(this._input().length){var t=this._input().get(0).validity;if(t)return t.valid}return!0},_toggleEmptiness:function(t){this.$element().toggleClass(Be,t),this._togglePlaceholder(t)},_togglePlaceholder:function(t){this.$element().find(".".concat(Q)).eq(0).toggleClass(xe,!t)},_renderProps:function(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()},_toggleDisabledState:function(t){this.callBase.apply(this,arguments);var e=this._input();e.prop("disabled",t)},_toggleTabIndex:function(){var t=this._input(),e=this.option("disabled"),i=this.option("focusStateEnabled");e||!i?t.attr("tabIndex",-1):t.removeAttr("tabIndex")},_toggleReadOnlyState:function(){this._input().prop("readOnly",this._readOnlyPropValue()),this.callBase()},_readOnlyPropValue:function(){return this.option("readOnly")},_toggleSpellcheckState:function(){this._input().prop("spellcheck",this.option("spellcheck"))},_unobserveLabelContainerResize:function(){this._labelContainerElement&&(D.unobserve(this._labelContainerElement),this._labelContainerElement=null)},_getLabelContainer:function(){return this._input()},_getLabelContainerWidth:function(){return V(this._getLabelContainer())},_getLabelBeforeWidth:function(){var t=this._$beforeButtonsContainer&&V(this._$beforeButtonsContainer);return t!=null?t:0},_updateLabelWidth:function(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())},_setLabelContainerAria:function(){this.setAria("labelledby",this._label.getId(),this._getLabelContainer())},_renderLabel:function(){this._unobserveLabelContainerResize(),this._labelContainerElement=l(this._getLabelContainer()).get(0);var{label:t,labelMode:e,labelMark:i}=this.option(),a={$editor:this.$element(),text:t,mark:i,mode:e,containsButtonsBefore:!!this._$beforeButtonsContainer,containerWidth:this._getLabelContainerWidth(),beforeWidth:this._getLabelBeforeWidth()};this._label=new Oe(a),this._setLabelContainerAria(),this._labelContainerElement&&D.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))},_renderPlaceholder:function(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()},_renderPlaceholderMarkup:function(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);var t=this._input(),e=this.option("placeholder"),i=this._$placeholder=l("<div>").attr("data-dx_placeholder",e);i.insertAfter(t),i.addClass(Q)},_attachPlaceholderEvents:function(){var t=_(lt.up,this.NAME);o.on(this._$placeholder,t,()=>{o.trigger(this._input(),"focus")}),this._toggleEmptinessEventHandler()},_placeholder:function(){return this._$placeholder||l()},_clearValueHandler:function(t){var e=this._input();t.stopPropagation(),this._saveValueChangeEvent(t),this._clearValue(),!this._isFocused()&&o.trigger(e,"focus"),o.trigger(e,"input")},_clearValue:function(){this.reset()},_renderEvents:function(){var t=this._input();m(b,(e,i)=>{if(this.hasActionSubscription("on"+i)){var a=this._createActionByOption("on"+i,{excludeValidators:["readOnly"]});o.on(t,_(i.toLowerCase(),this.NAME),n=>{this._disposed||a({event:n})})}})},_refreshEvents:function(){var t=this._input();m(b,(e,i)=>{o.off(t,_(i.toLowerCase(),this.NAME))}),this._renderEvents()},_keyPressHandler:function(){this.option("text",this._input().val())},_keyDownHandler:function(t){var e=this._input(),i=t.ctrlKey&&C(t)==="enter",a=e.val()!==this.option("value");i&&a&&o.trigger(e,"change")},_renderValueChangeEvent:function(){var t=_(this._renderValueEventName(),"".concat(this.NAME,"TextChange")),e=_(this.option("valueChangeEvent"),"".concat(this.NAME,"ValueChange")),i=_("keydown","".concat(this.NAME,"TextChange")),a=this._input();o.on(a,t,this._keyPressHandler.bind(this)),o.on(a,e,this._valueChangeEventHandler.bind(this)),o.on(a,i,this._keyDownHandler.bind(this))},_cleanValueChangeEvent:function(){var t=".".concat(this.NAME,"ValueChange"),e=".".concat(this.NAME,"TextChange");o.off(this._input(),t),o.off(this._input(),e)},_refreshValueChangeEvent:function(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()},_renderValueEventName:function(){return"input change keypress"},_focusTarget:function(){return this._input()},_focusEventTarget:function(){return this.element()},_isInput:function(t){return t===this._input().get(0)},_preventNestedFocusEvent:function(t){if(t.isDefaultPrevented())return!0;var e=this._isNestedTarget(t.relatedTarget);return t.type==="focusin"?e=e&&this._isNestedTarget(t.target)&&!this._isInput(t.target):e||this._toggleFocusClass(!1,this.$element()),e&&t.preventDefault(),e},_isNestedTarget:function(t){return!!this.$element().find(t).length},_focusClassTarget:function(){return this.$element()},_focusInHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_focusOutHandler:function(t){this._preventNestedFocusEvent(t),this.callBase.apply(this,arguments)},_toggleFocusClass:function(t,e){this.callBase(t,this._focusClassTarget(e))},_hasFocusClass:function(t){return this.callBase(l(t||this.$element()))},_renderEmptinessEvent:function(){var t=this._input();o.on(t,"input blur",this._toggleEmptinessEventHandler.bind(this))},_toggleEmptinessEventHandler:function(){var t=this._input().val(),e=(t===""||t===null)&&this._isValueValid();this._toggleEmptiness(e)},_valueChangeEventHandler:function(t,e){this.option("readOnly")||(this._saveValueChangeEvent(t),this.option("value",arguments.length>1?e:this._input().val()),this._saveValueChangeEvent(void 0))},_renderEnterKeyAction:function(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),o.off(this._input(),"keyup.onEnterKey.dxTextEditor"),o.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))},_enterKeyHandlerUp:function(t){this._disposed||C(t)==="enter"&&this._enterKeyAction({event:t})},_updateValue:function(){this._options.silent("text",null),this._renderValue()},_dispose:function(){this._enterKeyAction=void 0,this.callBase()},_getSubmitElement:function(){return this._input()},_hasActiveElement:function(){return this._input().is(T.getActiveElement())},_optionChanged:function(t){var{name:e,fullName:i,value:a}=t,n=e.replace("on","");if(b.includes(n)){this._refreshEvents();return}switch(e){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":this.callBase(t),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder();break;case"label":this._label.updateText(a),this._setLabelContainerAria();break;case"labelMark":this._label.updateMark(a);break;case"labelMode":this._label.updateMode(a),this._setLabelContainerAria();break;case"width":this.callBase(t),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),this.callBase(t);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":break;case"value":this._updateValue(),this.callBase(t);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(e));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":i===e&&tt(a),this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break;case"visible":this.callBase(t),a&&this.option("buttons")&&(this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")));break;case"displayValueFormatter":this._invalidate();break;case"showValidationMark":break;default:this.callBase(t)}},_renderInputType:function(){this._setInputType(this.option("mode"))},_setInputType:function(t){var e=this._input();t==="search"&&(t="text");try{e.prop("type",t)}catch{e.prop("type","text")}},getButton(t){return this._buttonCollection.getButton(t)},focus:function(){o.trigger(this._input(),"focus")},reset:function(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());var t=this._getDefaultOptions();this.option("value")===t.value?(this._options.silent("text",""),this._renderValue()):this.option("value",t.value)},on:function(t,e){var i=this.callBase(t,e),a=t.charAt(0).toUpperCase()+t.substr(1);return b.indexOf(a)>=0&&this._refreshEvents(),i}}),B="dxMask",$e="blur beforedeactivate",Re=" ";class ft{constructor(e){this.editor=e,this.DIRECTION={FORWARD:"forward",BACKWARD:"backward"},this.NAME=this._getStrategyName()}_getStrategyName(){return"base"}editorOption(){return this.editor.option(...arguments)}editorInput(){return this.editor._input()}editorCaret(e){if(!e)return this.editor._caret();this.editor._caret(e)}getHandler(e){var i=this["_".concat(e,"Handler")]||function(){};return i.bind(this)}attachEvents(){var e=this.editorInput();this.getHandleEventNames().forEach(i=>{var a=_(i.toLowerCase(),B);o.on(e,a,this.getEventHandler(i))}),this._attachChangeEventHandlers()}getHandleEventNames(){return["focusIn","focusOut","keyDown","input","paste","cut","drop"]}getEventHandler(e){return this["_".concat(e,"Handler")].bind(this)}detachEvents(){o.off(this.editorInput(),".".concat(B))}_attachChangeEventHandlers(){!this.editorOption("valueChangeEvent").split(" ").includes("change")||o.on(this.editorInput(),_($e,B),function(e){this._suppressCaretChanging(this._changeHandler,[e]),this._changeHandler(e)}.bind(this.editor))}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor._direction(this.DIRECTION.FORWARD),!this.editor._isValueEmpty()&&this.editorOption("isValid"))this.editor._adjustCaret();else{var e=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout(function(){this._caret({start:e,end:e})}.bind(this.editor),0)}}_focusOutHandler(e){this.editor._changeHandler(e),this.editorOption("showMaskMode")==="onFocus"&&this.editor._isValueEmpty()&&(this.editorOption("text",""),this.editor._renderDisplayText(""))}_cutHandler(e){var i=this.editorCaret(),a=this.editorInput().val().substring(i.start,i.end);this.editor._maskKeyHandler(e,()=>N(e,a))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout(function(){this.option("value",this._convertToValue(this._input().val()))}.bind(this.editor))}_clearDragTimer(){clearTimeout(this._dragTimer)}_keyDownHandler(){this._keyPressHandled=!1}_pasteHandler(e){var{editor:i}=this;this._keyPressHandled=!0;var a=this.editorCaret();i._maskKeyHandler(e,()=>{var n=N(e),s=i._maskRulesChain.text().substring(a.end),r=i._handleChain({text:n,start:a.start,length:n.length}),h=a.start+r;i._handleChain({text:s,start:h,length:s.length}),i._caret({start:h,end:h})})}_autoFillHandler(e){var{editor:i}=this,a=this.editorInput().val();this._inputHandlerTimer=setTimeout(()=>{this._keyPressHandled=!0,this._isAutoFill()&&(this._keyPressHandled=!0,i._maskKeyHandler(e,()=>{i._handleChain({text:a,start:0,length:a.length})}),i._validateMask())})}_isAutoFill(){var e=this.editor._input(),i=!1;if(Lt.webkit){var a=e.get(0);i=a&&a.matches(":-webkit-autofill")}return i}runWithoutEventProcessing(e){var i=this._keyPressHandled;this._keyPressHandled=!0,e(),this._keyPressHandled=i}_backspaceHandler(){}_delHandler(e){var{editor:i}=this;this._keyPressHandled=!0,i._maskKeyHandler(e,()=>!i._hasSelection()&&i._handleKey(Re))}clean(){this._clearDragTimer(),clearTimeout(this._backspaceHandlerTimeout),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}}var Le="deleteContentBackward",He=" ";class De extends ft{_getStrategyName(){return"default"}getHandleEventNames(){return[...super.getHandleEventNames(),"keyPress"]}_keyPressHandler(e){if(!this._keyPressHandled&&(this._keyPressHandled=!0,!this.editor._isControlKeyFired(e))){var{editor:i}=this;i._maskKeyHandler(e,()=>i._handleKey(Ht(e)))}}_inputHandler(e){if(this._backspaceInputHandled(e.originalEvent&&e.originalEvent.inputType)&&this._handleBackspaceInput(e),e.originalEvent&&this._autoFillHandler(e),!this._keyPressHandled){this._keyPressHandled=!0;var i=this.editorInput().val(),a=this.editorCaret();if(!!a.end){a.start=a.end-1;var n=i.substring(0,a.start)+i.substring(a.end),s=i[a.start],{editor:r}=this;this.editorInput().val(n),r._caret({start:a.start,end:a.start}),r._maskKeyHandler(e,()=>r._handleKey(s))}}}_backspaceHandler(e){var{editor:i}=this;this._keyPressHandled=!0;var a=(n,s)=>{n&&(i._direction(this.DIRECTION.FORWARD),i._adjustCaret());var r=this.editorCaret();return new Promise(h=>{clearTimeout(this._backspaceHandlerTimeout),this._backspaceHandlerTimeout=setTimeout(function(){s(r),h()})})};i._maskKeyHandler(e,()=>i._hasSelection()?a(!0,n=>{i._displayMask(n),i._maskRulesChain.reset()}):i._tryMoveCaretBackward()?a(!1,n=>{this.editorCaret(n)}):(i._handleKey(He,this.DIRECTION.BACKWARD),a(!0,n=>{i._displayMask(n),i._maskRulesChain.reset()})))}_backspaceInputHandled(e){return e===Le&&!this._keyPressHandled}_handleBackspaceInput(e){var{start:i,end:a}=this.editorCaret();this.editorCaret({start:i+1,end:a+1}),this._backspaceHandler(e)}}var Ne="deleteContentBackward";class Pe extends ft{_getStrategyName(){return"inputEvents"}getHandleEventNames(){return[...super.getHandleEventNames(),"beforeInput"]}_beforeInputHandler(){this._prevCaret=this.editorCaret()}_inputHandler(e){var{originalEvent:i}=e;if(!!i){var{inputType:a,data:n}=i,s=this.editorCaret();if(a===Ne){var r=this._prevCaret.end-this._prevCaret.start||1;this.editor.setBackwardDirection(),this._updateEditorMask({start:s.start,length:r,text:this._getEmptyString(r)})}else{var h,c,p;if(!s.end)return;this._autoFillHandler(i),this.editorCaret(s);var M=((h=this._prevCaret)===null||h===void 0?void 0:h.end)-((c=this._prevCaret)===null||c===void 0?void 0:c.start),$=n+(M?this._getEmptyString(M-n.length):"");this.editor.setForwardDirection();var Ct=this._updateEditorMask({start:(p=this._prevCaret)===null||p===void 0?void 0:p.start,length:M||$.length,text:$});Ct||this.editorCaret(this._prevCaret)}}}_getEmptyString(e){return Array(e+1).join(" ")}_updateEditorMask(e){var i=e.text.length,a=this.editor._handleChain(e);if(this.editor.isForwardDirection()){var{start:n,end:s}=this.editorCaret(),r=a-i;n<=a&&a>1&&this.editorCaret({start:n+r,end:s+r}),this.editor.isForwardDirection()&&this.editor._adjustCaret()}return this.editor._displayMask(),!!a}}var We=function(){return{}},k=dt,et=" ",Fe="\\",it="dx-texteditor-masked",x="forward",Ke="backward",je={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:function(t){return y(t)},l:function(t){return y(t)||nt(t)},C:/\S/,c:/./,A:function(t){return y(t)||at(t)},a:function(t){return y(t)||at(t)||nt(t)}};function at(t){return/[0-9]/.test(t)}function y(t){var e=t.charCodeAt();return 64<e&&e<91||96<e&&e<123||e>127}function nt(t){return t===" "}var gt=we.inherit({_getDefaultOptions:function(){return d(this.callBase(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:Dt.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})},_supportedKeys:function(){var t=this,e={backspace:t._maskStrategy.getHandler("backspace"),del:t._maskStrategy.getHandler("del"),enter:t._changeHandler},i=t.callBase();return m(e,function(a,n){var s=i[a];i[a]=function(r){t.option("mask")&&n.call(t,r),s&&s(r)}}),i},_getSubmitElement:function(){return this.option("mask")?this._$hiddenElement:this.callBase()},_init:function(){this.callBase(),this._initMaskStrategy()},_initMaskStrategy:function(){this._maskStrategy=Gt()?new Pe(this):new De(this)},_initMarkup:function(){this._renderHiddenElement(),this.callBase()},_attachMouseWheelEventHandlers:function(){var t=this._onMouseWheel!==u;if(!!t){var e=this._input(),i=_(Nt,this.NAME),a=this._createAction(function(n){var{event:s}=n;S(e)&&!P(s)&&(this._onMouseWheel(s),s.preventDefault(),s.stopPropagation())}.bind(this));o.off(e,i),o.on(e,i,function(n){a({event:n})})}},_onMouseWheel:u,_render:function(){this._renderMask(),this.callBase(),this._attachMouseWheelEventHandlers()},_renderHiddenElement:function(){this.option("mask")&&(this._$hiddenElement=l("<input>").attr("type","hidden").appendTo(this._inputWrapper()))},_removeHiddenElement:function(){this._$hiddenElement&&this._$hiddenElement.remove()},_renderMask:function(){this.$element().removeClass(it),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass(it),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())},_suppressCaretChanging:function(t,e){k=We;try{t.apply(this,e)}finally{k=dt}},_changeHandler:function(t){var e=this._input(),i=e.val();if(i!==this._changedValue){this._changedValue=i;var a=Pt(t,{type:"change"});o.trigger(e,a)}},_parseMask:function(){this._maskRules=d({},je,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)},_parseMaskRule:function(t){var e=this.option("mask");if(t>=e.length)return new Yt;var i=e[t],a=i===Fe,n=a?new W({maskChar:e[t+1]}):this._getMaskRule(i);return n.next(this._parseMaskRule(t+1+a)),n},_getMaskRule:function(t){var e;return m(this._maskRules,function(i,a){if(i===t)return e={pattern:i,allowedChars:a},!1}),f(e)?new _t(d({maskChar:this.option("maskChar")},e)):new W({maskChar:t})},_renderMaskedValue:function(){if(!!this._maskRulesChain){var t=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());var e={length:t.length};e[this._isMaskedValueMode()?"text":"value"]=t,this._handleChain(e),this._displayMask()}},_replaceSelectedText:function(t,e,i){if(i===void 0)return t;var a=t.slice(0,e.start),n=t.slice(e.end),s=a+i+n;return s},_isMaskedValueMode:function(){return this.option("useMaskedValue")},_displayMask:function(t){t=t||this._caret(),this._renderValue(),this._caret(t)},_isValueEmpty:function(){return A(this._value)},_shouldShowMask:function(){var t=this.option("showMaskMode");return t==="onFocus"?S(this._input())||!this._isValueEmpty():!0},_showMaskPlaceholder:function(){if(this._shouldShowMask()){var t=this._maskRulesChain.text();this.option("text",t),this.option("showMaskMode")==="onFocus"&&this._renderDisplayText(t)}},_renderValue:function(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){var t=this._maskRulesChain.value(),e=A(t)?"":this._getPreparedValue();this._$hiddenElement.val(e)}return this.callBase()},_getPreparedValue:function(){return this._convertToValue().replace(/\s+$/,"")},_valueChangeEventHandler:function(t){if(!this._maskRulesChain){this.callBase.apply(this,arguments);return}this._saveValueChangeEvent(t),this.option("value",this._getPreparedValue())},_isControlKeyFired:function(t){return this._isControlKey(C(t))||P(t)},_handleChain:function(t){var e=this._maskRulesChain.handle(this._normalizeChainArguments(t));return this._value=this._maskRulesChain.value(),this._textValue=this._maskRulesChain.text(),e},_normalizeChainArguments:function(t){return t=t||{},t.index=0,t.fullText=this._maskRulesChain.text(),t},_convertToValue:function(t){return this._isMaskedValueMode()?t=this._replaceMaskCharWithEmpty(t||this._textValue||""):t=t||this._value||"",t},_replaceMaskCharWithEmpty:function(t){return t.replace(new RegExp(this.option("maskChar"),"g"),et)},_maskKeyHandler:function(t,e){if(!this.option("readOnly")){this.setForwardDirection(),t.preventDefault(),this._handleSelection();var i=this._input().val(),a=()=>{i!==this._input().val()&&this._maskStrategy.runWithoutEventProcessing(()=>o.trigger(this._input(),"input"))},n=e();n?n.then(a):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),a())}},_handleKey:function(t,e){this._direction(e||x),this._adjustCaret(t),this._handleKeyChain(t),this._moveCaret()},_handleSelection:function(){if(!!this._hasSelection()){var t=this._caret(),e=new Array(t.end-t.start+1).join(et);this._handleKeyChain(e)}},_handleKeyChain:function(t){var e=this._caret(),i=this.isForwardDirection()?e.start:e.start-1,a=this.isForwardDirection()?e.end:e.end-1,n=i===a?1:a-i;this._handleChain({text:t,start:i,length:n})},_tryMoveCaretBackward:function(){this.setBackwardDirection();var t=this._caret().start;return this._adjustCaret(),!t||t!==this._caret().start},_adjustCaret:function(t){var e=this._caret().start,i=this.isForwardDirection(),a=this._maskRulesChain.adjustedCaret(e,i,t);this._caret({start:a,end:a})},_moveCaret:function(){var t=this._caret().start,e=t+(this.isForwardDirection()?0:-1),i=this._maskRulesChain.isAccepted(e)?t+(this.isForwardDirection()?1:-1):t;this._caret({start:i,end:i})},_caret:function(t,e){var i=this._input();if(!!i.length){if(!arguments.length)return k(i);k(i,t,e)}},_hasSelection:function(){var t=this._caret();return t.start!==t.end},_direction:function(t){if(!arguments.length)return this._typingDirection;this._typingDirection=t},setForwardDirection:function(){this._direction(x)},setBackwardDirection:function(){this._direction(Ke)},isForwardDirection:function(){return this._direction()===x},_clean:function(){this._maskStrategy&&this._maskStrategy.clean(),this.callBase()},_validateMask:function(){if(!!this._maskRulesChain){var t=A(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:t,validationError:t?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})}},_updateHiddenElement:function(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement()),this._setSubmitElementName(this.option("name"))},_updateMaskOption:function(){this._updateHiddenElement(),this._renderMask(),this._validateMask()},_processEmptyMask:function(t){if(!t){var e=this.option("value");this.option({text:e,isValid:!0}),this.validationRequest.fire({value:e,editor:this}),this._renderValue()}},_optionChanged:function(t){switch(t.name){case"mask":this._updateMaskOption(),this._processEmptyMask(t.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),this.callBase(t),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:this.callBase(t)}}});w("dxTextEditor",gt);var Ue=Wt(),Xe=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],ze="dx-textbox",st="dx-searchbox",Ge="dx-icon",Ye="dx-icon-search",mt=gt.inherit({ctor:function(t,e){e&&(this._showClearButton=e.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions:function(){return d(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup:function(){this.$element().addClass(ze),this.callBase(),this.setAria("role","textbox")},_renderInputType:function(){this.callBase(),this._renderSearchMode()},_useTemplates:function(){return!1},_renderProps:function(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp:function(){var t=this._getMaxLength();t&&t>0?this._input().attr("maxLength",t):this._input().removeAttr("maxLength")},_renderSearchMode:function(){var t=this._$element;this.option("mode")==="search"?(t.addClass(st),this._renderSearchIcon(),this._showClearButton===void 0&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(t.removeClass(st),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",this._showClearButton===void 0?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon:function(){var t=l("<div>").addClass(Ge).addClass(Ye);t.prependTo(this._input().parent()),this._$searchIcon=t},_getLabelContainerWidth:function(){if(this._$searchIcon){var t=this._input().parent();return V(t)-this._getLabelBeforeWidth()}return this.callBase()},_getLabelBeforeWidth:function(){var t=this.callBase();return this._$searchIcon&&(t+=rt(this._$searchIcon)),t},_optionChanged:function(t){switch(t.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":this.callBase(t),this._updateLabelWidth();break;case"mask":this.callBase(t),this._toggleMaxLengthProp();break;default:this.callBase(t)}},_onKeyDownCutOffHandler:function(t){var e=this._getMaxLength();if(e&&!t.ctrlKey&&!this._hasSelection()){var i=l(t.target),a=C(t);return this._cutOffExtraChar(i),i.val().length<e||Xe.includes(a)||Ue.getSelection().toString()!==""}else return!0},_onChangeCutOffHandler:function(t){var e=l(t.target);this.option("maxLength")&&this._cutOffExtraChar(e)},_cutOffExtraChar:function(t){var e=this._getMaxLength(),i=t.val();e&&i.length>e&&t.val(i.substr(0,e))},_getMaxLength:function(){var t=!!this.option("mask");return t?null:this.option("maxLength")}});w("dxTextBox",mt);const Ze=Object.freeze(Object.defineProperty({__proto__:null,default:mt},Symbol.toStringTag,{value:"Module"}));export{I as E,mt as T,ct as V,pt as a,gt as b,Ze as t};
