import{d as xe,di as Ae,e as j,u as Ie,c as Oe,ds as be,r as c,f as ne,b as Ee,w as Re,o as Be,g as p,h as v,i as n,F as ae,cP as oe,t as i,cQ as q,dt as D,k as C,n as A,x as w,y as De,m as se,dl as ie,cR as Pe,p as $e,q as Ue,dv as Me,B as Ve,dw as Le,dx as Fe,s as Ke}from"./index.a3c5a5ee.js";import{l as je,_ as qe,F as Qe,T as We,I as ze,L as Ge,Y as He,S as Ye,A as Je}from"./idService.096f6176.js";import"./BaseInput.9f8543fa.js";import"./BaseNumberBox2.a0cd7526.js";import Xe from"./BaseSelectBox.e7e590d5.js";import{_ as re}from"./BaseRadioGroup.b3beaa81.js";import"./BaseTextArea.05bfe592.js";import Ze from"./CreateOrderRight4.1abee839.js";import{P as et,S as tt,a as T,b as ce}from"./service-type-enum.bf595476.js";import{L as nt,O as at}from"./order-service.5ecf97c1.js";import{C as ot}from"./comments-service.768ee57a.js";import{B as st}from"./list-bank-v2.764adf30.js";import{L as it}from"./list-application.74b2f8af.js";import"./text_box.c18f19ed.js";import"./number_box.546ccd32.js";import"./select_box.05db16a2.js";const h=I=>($e("data-v-43a37aab"),I=I(),Ue(),I),rt={class:"container CreateOrder-container",id:"CreateOrder-container"},ct={class:"d-flex oder-container"},lt={class:"d-flex flex-wrap service-card-container"},ut=h(()=>n("div",{class:"order-left-title"},[n("span",{class:"order-title-text"},"Mua g\xF3i")],-1)),dt={class:"box-left"},pt={class:"d-flex justify-content-between"},vt={class:"service-name text-box-left"},ft={class:"icon-service d-flex align-items-center justify-content-center"},mt={class:"mt-2"},ht={class:"max-price"},yt={class:"input_cus"},_t=["value","placeholder","on:onValueChanged"],gt=h(()=>n("span",{class:"focus-border"},null,-1)),Ct={class:"mt-1"},wt={href:"https://sites.google.com/view/layid/trang-ch%E1%BB%A7",target:"_blank",rel:"noopener noreferrer",style:{color:"rgb(0, 123, 255)"}},Tt={class:"mt-3"},Nt={class:"max-price"},kt=h(()=>n("span",{class:"text-limit"},"Max",-1)),St=h(()=>n("span",{class:"text-limit"},"Min",-1)),xt={class:"input_cus"},At=["placeholder","value","min","max","on:onValueChanged"],It=h(()=>n("span",{class:"focus-border"},null,-1)),Ot={key:0,class:"mt-3 d-flex justify-content-center"},bt={class:"reaction-icon d-flex justify-content-between"},Et=["onClick"],Rt={key:1,class:"mt-3"},Bt={class:"d-flex"},Dt={key:0,class:"mt-3 mr-12"},Pt={class:"ml-2"},$t={key:1,class:"mt-3"},Ut={class:"ml-2"},Mt={class:"mt-3 d-flex justify-content-center"},Vt={class:"price"},Lt={class:"total-price-detail"},Ft={key:0},Kt={key:1},jt={class:"d-flex justify-content-center"},qt={class:"d-flex"},Qt={class:"price"},Wt={class:"d-flex justify-content-center"},zt={class:"btn-buy mb-2",style:{width:"40%"}},Gt=h(()=>n("div",{class:"nofi-buy-service"},[n("img",{src:qe}),n("p",null,"Th\xF4ng b\xE1o x\xE1c nh\u1EADn"),n("span",null,"B\u1EA1n c\xF3 mu\u1ED1n thanh to\xE1n \u0111\u01A1n h\xE0ng? Ch\xFAng t\xF4i s\u1EBD kh\xF4ng ho\xE0n ti\u1EC1n v\u1EDBi \u0111\u01A1n \u0111\xE3 thanh to\xE1n")],-1)),Ht=["onClick"],Yt={key:0,class:"loading_layzie"},Jt=h(()=>n("div",{class:"lds-spinner"},[n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div"),n("div")],-1)),Xt=[Jt],Zt={class:"box-right"},en=h(()=>n("div",{class:"order-left-title right-title"},[n("span",{class:"order-title-text"},"L\u01B0u \xFD:")],-1)),tn=xe({__name:"CreateOrderTheme4",setup(I){const Q=Ae(),W=j(()=>Q.color.value),z=j(()=>Q.colorText.value),{emit:le}=Me(),y=Ie(),{t:d}=Oe(),m=new Ve,ue=be(),O=c(!1),N=j(()=>ue.state.userInfo),de=()=>{O.value=!0},P=c([{begin:0,end:0,value:{kind:1,value:0},status:1,creationTime:null,id:""}]),b=c([]),pe=c(ne(it)),nn=c([{ID:0,Name:"Random"}]),$=c(),U=Ee();Re(()=>U.path,async e=>{$.value=pe.value.find(o=>e.toLowerCase().includes(o.Router.toLowerCase())),Y(),Z()},{immediate:!0});const ve=[{type:0,typeName:"Low",resourceKey:"Speed.Low"},{type:1,typeName:"Medium",resourceKey:"Speed.Medium"},{type:2,typeName:"Normal",resourceKey:"Speed.Normal"},{type:3,typeName:"High",resourceKey:"Speed.High"}],G=[{timeUnit:0,timeUnitName:"Day",resoureKey:"TimeUnit.Day"},{timeUnit:1,timeUnitName:"Week",resoureKey:"TimeUnit.Week"},{timeUnit:2,timeUnitName:"Month",resoureKey:"TimeUnit.Month"},{timeUnit:3,timeUnitName:"Year",resoureKey:"TimeUnit.Year"}],M=c(!1),V=c([]),fe={FacebookIcon:Qe,TiktokIcon:We,InstagramIcon:ze,LazadaIcon:Ge,YoutubeIcon:He,ShopeeIcon:Ye,AutoFarmerIcon:Je},me=[{ReactionName:"like",ReactionIcon:"icon-like",Active:!1},{ReactionName:"love",ReactionIcon:"icon-love",Active:!1},{ReactionName:"care",ReactionIcon:"icon-care",Active:!1},{ReactionName:"haha",ReactionIcon:"icon-haha",Active:!1},{ReactionName:"wow",ReactionIcon:"icon-wow",Active:!1},{ReactionName:"sad",ReactionIcon:"icon-sad",Active:!1},{ReactionName:"angry",ReactionIcon:"icon-angry",Active:!1}],k=c({paymentMethodId:"",amount:0}),H=c(!1),L=c(!1),_=c({urlService:"",warranty:{timeUnit:0,time:0,price:0},speed:{type:0,price:0},serviceId:"",quantity:0,targets:[],comment:""}),F=c(new Array),f=c(""),E=c({BankName:"",AccountName:"",AccountNumber:""}),he=ne(nt);Be(()=>{ye()});async function g(e=""){return await(y==null?void 0:y.recaptchaLoaded()),await(y==null?void 0:y.executeRecaptcha(e))}async function ye(){const o={headers:{captcha:await g("GetAllPromotion")}},t=await et.getAllPromotion(o);t!=null&&t.data&&(P.value=t.data,P.value.length&&P.value.forEach(a=>{a.value&&a.value.kind==1&&(a.valueDisplay=a.value.value*100)}))}async function Y(){try{b.value=[];let e=!1;const t={headers:{captcha:await g("GetAllServicePackage")}},a=await tt.getServiceByApp($.value.ID,t);if(a!=null&&a.data){const r=a.data;if((r==null?void 0:r.length)<=0)return;r.forEach(s=>{var ee;s.nameDisplay=d("CreateOrder.ServicePackageName",{name:s.name}),s.quantity=s.minQuantity;const S=s.speeds;(S==null?void 0:S.length)>0&&(s.speed=S[0],S.forEach(l=>{const R=ve.find(B=>B.type==l.type);R&&(l.speedDisplay=d(R.resourceKey))}));const x=s.warranties;(x==null?void 0:x.length)>0&&(x.forEach((l,R)=>{var te;l.index=R;const B=G.find(K=>K.timeUnit==l.timeUnit);B&&(l.warrantyDisplay=l.time+" "+d(B.resoureKey+(l.time>1?"s":""))),l.timeValue=l.time+" "+((te=G.find(K=>K.timeUnit==l.timeUnit))==null?void 0:te.timeUnitName)+(l.time>1?"s":"")}),s.warranty=x[0]),s.serviceType==T.BuffReaction&&(s.reactions=JSON.parse(JSON.stringify(me))),s.serviceType==T.BuffComment&&(e=!0),s.icon=(ee=he.find(l=>l.ID==s.serviceType))==null?void 0:ee.Icon});const u=je.find(s=>U.path.toLowerCase().includes(s.id.toLowerCase()));u&&(b.value=[r.find(s=>s.serviceType==u[U.params.service])]),e&&Z()}}catch(e){console.log("error try: ",e)}}async function an(e){var r;e.loadingTopup=!0,k.value.amount=e.end;const t={headers:{captcha:await g("GetPaymentMethod")}},a=await ce.getAllPaymentMethod(t);if(a!=null&&a.data){if(V.value=a==null?void 0:a.data,(r=V.value)!=null&&r.length){const u=V.value[0];if(u){const s=u.details;E.value={BankName:s==null?void 0:s.detailId,AccountName:s==null?void 0:s.accountName,AccountNumber:s==null?void 0:s.accountNumber},_e(),k.value.paymentMethodId=u.id}}setTimeout(()=>{M.value=!0,e.loadingTopup=!1},600)}else e.loadingTopup=!1,m.showToastError("No payment method yet!")}function _e(){var a;const e="https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",o=((a=st.find(r=>r.name==E.value.BankName))==null?void 0:a.bin)||"";f.value=e.replace("<BANK_ID>",o),f.value=f.value.replace("<ACCOUNT_NO>",E.value.AccountNumber),f.value=f.value.replace("<TEMPLATE>","SquX4mZ"),f.value=f.value.replace("<AMOUNT>",k.value.amount.toString());const t=(N.value.surName||"")+" "+(N.value.name||"");f.value=f.value.replace("<DESCRIPTION>",t+" "+d("Payment")),f.value=f.value.replace("<ACCOUNT_NAME>",E.value.BankName)}async function on(e){H.value=!0;const t={headers:{captcha:await g("Payment")}},a=await ce.paymentDeposit(k.value,t);a!=null&&a.data?(m.showToastSuccess(d("CreateOrder.TopupSuccess")),Le.push("/transaction")):m.showToastError(d("CreateOrder.TopupError")),H.value=!1,M.value=!1}function sn(e){$.value=e,Y()}function J(e,o,t){!t||(t[o]=e)}function ge(e,o){if(!o)return;const t=o.speeds.findIndex(a=>a.type==e);t>=0&&(o.speed=o.speeds[t])}function Ce(e,o){if(!o)return;const t=o.warranties.findIndex(a=>a.index==e);t>=0&&(o.warranty=o.warranties[t])}async function we(e){e.loadingBuyNow=!0;const o=e;if(o.serviceId=e.id,o.urlService=e.urlService,!Te(e)){e.loadingBuyNow=!1;return}const r={headers:{captcha:await g("Order")}},u=await at.order(o,r);u!=null&&u.data?(le(Fe.RefreshProfile,!0),m.showToastSuccess(d("CreateOrder.OrderSuccess"))):m.showToastError(d("CreateOrder.OrderError")),e.loadingBuyNow=!1,O.value=!1}function Te(e){var t,a,r,u,s;const o=e.quantity*(((t=e==null?void 0:e.speed)==null?void 0:t.price)||0+((a=e==null?void 0:e.warranty)==null?void 0:a.price)||0);return((r=N==null?void 0:N.value)==null?void 0:r.balance)<o?(m.showToastWarning(d("ToastNotEnoughBalance")),!1):!e.urlService||e.urlService==""?(m.showToastWarning(d("ToastURLNotEmpty")),!1):e.serviceType==T.BuffComment&&(!e.targets||((u=e.targets)==null?void 0:u.length)==0)?(m.showToastWarning(d("ToastCommentNotEmpty")),!1):e.serviceType==T.BuffReaction&&(!e.targets||((s=e.targets)==null?void 0:s.length)==0)?(m.showToastWarning(d("ToastReactionNotEmpty")),!1):!0}function X(){M.value=!1,O.value=!1}function rn(e){return fe[e]}function Ne(e,o){if(e.targets=e.targets||[],o.Active=!o.Active,o.Active)e.targets.push(o.ReactionName);else{const t=e.targets.indexOf(o.ReactionName);t>=0&&e.targets.splice(t,1)}}function cn(e){!e||(k.value.paymentMethodId=e.id)}function ln(e){setTimeout(()=>{e.component.focus()},0)}function un(e){_.value=e,_.value.targets=_.value.targets||[],L.value=!0}function dn(){L.value=!1}function pn(e){e&&(_.value.comment=e,_.value.targets=_.value.comment.split(`
`))}function vn(){L.value=!1}function ke(e,o){var t,a;o.commentID=e,o.targets=(a=(t=F.value.find(r=>r.id==e))==null?void 0:t.content)==null?void 0:a.split(`
`)}async function Se(){const e=new URLSearchParams;return{headers:{captcha:await g("GetComment")},params:e}}async function Z(){try{const e=await Se(),o=await ot.getPaging(e);if(o&&o.data){const t=o.data;F.value=t.items}}catch(e){m.showToastError(e==null?void 0:e.message)}}return(e,o)=>(p(),v("div",rt,[n("div",ct,[n("div",lt,[ut,n("div",dt,[(p(!0),v(ae,null,oe(b.value,t=>(p(),v("div",{key:t,class:"d-flex flex-column justify-content-between mt-4 mr-4",style:{width:"100%"}},[n("div",null,[n("div",null,[n("div",null,[n("div",pt,[n("div",null,[n("div",vt,i(t.nameDisplay),1)]),n("div",ft,[n("div",{class:q(["icon",t.icon])},null,2)])]),n("div",mt,[n("div",ht,i(e.$t("CreateOrder.AddID")),1),n("div",yt,[n("input",{class:"effect-2",type:"text",value:t.urlService,placeholder:e.$t("CreateOrder.EnterID"),"on:onValueChanged":a=>J(a,"urlService",t)},null,40,_t),gt]),n("div",Ct,[D(i(e.$t("CreateOrder.GetUID"))+" ",1),n("a",wt,i(e.$t("CreateOrder.Here")),1)]),n("div",Tt,[n("div",Nt,[D(i(e.$t("CreateOrder.EnterTurnNumber"))+" ",1),kt,D(" "+i(e.$filters.number(t.maxQuantity))+" "+i(e.$t("CreateOrder.Turn"))+",\xA0",1),St,D(" "+i(e.$filters.number(t.minQuantity))+" "+i(e.$t("CreateOrder.Turn")),1)]),n("div",xt,[n("input",{class:"effect-2",type:"number",placeholder:e.$t("CreateOrder.EnterTurnNumber"),value:t.quantity,min:t.minQuantity,max:t.maxQuantity,"on:onValueChanged":a=>J(a,"quantity",t)},null,40,At),It])])]),t.serviceType==C(T).BuffReaction?(p(),v("div",Ot,[n("div",bt,[(p(!0),v(ae,null,oe(t.reactions,a=>(p(),v("div",{key:a.ReactionIcon,class:q(["icon-buff pointer d-flex align-items-center justify-content-center",[a.ReactionName,a.Active?"active":""]]),onClick:r=>Ne(t,a)},[n("span",{class:q(["icon",a.ReactionIcon])},null,2)],10,Et))),128))])])):A("",!0),t.serviceType==C(T).BuffComment?(p(),v("div",Rt,[w(Xe,{placeholder:e.$t("CreateOrder.EnterComment"),items:F.value,value:t.commentID,keyID:"id",display:"name",onOnValueChanged:a=>ke(a,t)},null,8,["placeholder","items","value","onOnValueChanged"])])):A("",!0),n("div",Bt,[t.speeds?(p(),v("div",Dt,[n("span",null,i(e.$t("CreateOrder.ChooseSpeed")),1),n("div",Pt,[w(re,{keyID:"type",display:"speedDisplay",items:t.speeds,value:t.speed.type,onOnValueChanged:a=>ge(a,t)},null,8,["items","value","onOnValueChanged"])])])):A("",!0),t.warranties.length>0?(p(),v("div",$t,[n("span",null,i(e.$t("CreateOrder.ChooseWarranty")),1),n("div",Ut,[w(re,{keyID:"index",display:"warrantyDisplay",items:t.warranties,value:t.warranty.index,onOnValueChanged:a=>Ce(a,t)},null,8,["items","value","onOnValueChanged"])])])):A("",!0)])])])]),n("div",null,[n("div",Mt,[n("div",null,[n("span",Vt,i(e.$t("CreateOrder.TotalPrice")),1),n("span",Lt,[t.warranty&&t.warranty.price>0?(p(),v("span",Ft,[n("span",null,i(e.$filters.currency(t.quantity*(t.speed.price+t.warranty.price))),1)])):(p(),v("span",Kt,[n("span",null,i(e.$filters.currency(t.quantity*t.speed.price)),1)]))])])]),n("div",jt,[n("div",qt,[n("div",Qt,i(e.$t("CreateOrder.Only"))+" "+i(e.$filters.currency(t.speed.price))+"/"+i(e.$t("CreateOrder.Turn")),1)])]),n("div",Wt,[n("div",zt,[w(De,{width:"100%",height:"30px",type:"default","styling-mode":"outlined",class:"mt-3 d-flex justify-content-between au-btn-loading",text:e.$t("CreateOrder.BuyNow"),loading:t.loadingBuyNow,onClick:o[0]||(o[0]=a=>de())},null,8,["text","loading"])]),w(Pe,{isVisible:O.value,width:"500px",onClosePopup:X},{content:se(()=>[Gt]),footer:se(()=>[n("button",{style:ie(`background-color: ${C(W)}; color: ${C(z)}`),class:"btn-buy-service",onClick:o[1]||(o[1]=a=>X())},i(e.$t("Cancel")),5),n("button",{style:ie(`background-color: ${C(W)}; color: ${C(z)}`),class:"btn-buy-service",onClick:a=>we(t)},i(e.$t("Buy_Service")),13,Ht)]),_:2},1032,["isVisible"])])])]))),128)),b.value.length?A("",!0):(p(),v("div",Yt,Xt))])]),n("div",Zt,[en,w(Ze)])])]))}});const bn=Ke(tn,[["__scopeId","data-v-43a37aab"]]);export{bn as default};
