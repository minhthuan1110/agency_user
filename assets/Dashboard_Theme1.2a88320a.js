import{d as De,u as ke,c as Ee,ds as Ae,e as Se,r as p,f as z,o as Be,g as r,h as u,i as t,t as s,F as P,cP as x,x as m,y as A,cQ as O,k as X,n as V,dt as w,m as U,cR as Z,p as $e,q as Ie,dv as Re,B as Pe,dw as xe,dx as Oe,s as Ve}from"./index.a3c5a5ee.js";import{B as Ue}from"./BaseInput.9f8543fa.js";import{B as Me}from"./BaseNumberBox2.a0cd7526.js";import Le from"./BaseSelectBox.e7e590d5.js";import{_ as ee}from"./BaseRadioGroup.b3beaa81.js";import{B as qe}from"./BaseTextArea.05bfe592.js";import{P as Ke,S as Fe,a as T,b as ne}from"./service-type-enum.bf595476.js";import{L as Qe,O as We}from"./order-service.5ecf97c1.js";import{C as Ge}from"./comments-service.768ee57a.js";import{B as He}from"./list-bank-v2.764adf30.js";import{L as je}from"./list-application.74b2f8af.js";import{E as Ye}from"./error-code-enum.da80d5c7.js";import"./text_box.c18f19ed.js";import"./number_box.546ccd32.js";import"./select_box.05db16a2.js";const Q=S=>($e("data-v-7597bb46"),S=S(),Ie(),S),Je={class:"container dashboard-container"},ze={class:"title text-uppercase mt-0"},Xe={class:"corner-ribbon-container top-right"},Ze={class:"corner-ribbon top-right blue"},en={key:0,class:"text"},nn={key:1,class:"text"},tn={class:"block-center-between"},an=Q(()=>t("div",{class:"topup-icon"},[t("span",{class:"icon icon-topup"})],-1)),on={class:"price-container"},sn={class:"price-label"},ln={class:"price-number"},cn={class:"title text-uppercase mt-5"},rn={class:"apps mt-2 pb-3"},un=["onClick"],dn={class:"d-flex flex-wrap"},pn={class:"d-flex justify-content-between"},vn={class:"service-name"},mn={class:"price"},hn={class:"max-price"},fn={class:"icon-service d-flex align-items-center justify-content-center"},yn={key:0,class:"mt-3"},gn={class:"reaction-icon d-flex justify-content-between"},_n=["onClick"],bn={class:"mt-3"},Nn={class:"mt-1"},Cn={href:"https://sites.google.com/view/layid/trang-ch%E1%BB%A7",target:"_blank",rel:"noopener noreferrer",style:{color:"rgb(0, 123, 255)"}},Tn={class:"mt-3"},wn={key:1,class:"mt-3"},Dn={key:2,class:"mt-3"},kn={class:"ml-2"},En={key:3,class:"mt-3"},An={class:"ml-2"},Sn={class:"mt-3"},Bn=Q(()=>t("br",null,null,-1)),$n={class:"total-price-detail"},In={key:0},Rn={key:1},Pn={class:"btn-buy mb-2"},xn=["src"],On=w(": "),Vn={class:"text-bold"},Un=w(": "),Mn={class:"text-bold"},Ln=w(": "),qn={class:"text-bold"},Kn=w(": "),Fn={class:"text-bold"},Qn=w(" VN\u0110 "),Wn=Q(()=>t("div",{class:"modal-add-comment mt-2"},[t("h2",null,"Ghi ch\xFA"),t("div",null,"1. C\u1EE9 m\u1ED7i d\xF2ng t\xEDnh l\xE0 1 comment"),t("div",null,"2. Y\xEAu c\u1EA7u t\u1ED1i thi\u1EBFu 5 comment"),t("div",null,"3. M\u1ECDi n\u1ED9i dung kh\xF4ng ph\xF9 h\u1EE3p \u0111\u1EC1u b\u1ECB t\u1EEB ch\u1ED1i"),t("div",null,"4. H\u1EC7 th\u1ED1ng ch\u1EC9 x\xE9t duy\u1EC7t t\u1EEB 8h s\xE1ng \u0111\u1EBFn 12h \u0111\xEAm h\u1EB1ng ng\xE0y")],-1)),Gn=De({__name:"Dashboard_Theme1",setup(S){const{emit:te}=Re(),_=ke(),{t:v}=Ee(),f=new Pe,ae=Ae(),D=Se(()=>ae.state.userInfo),B=p([{begin:0,end:0,value:{kind:1,value:0},status:1,creationTime:null,id:""}]),M=p([]),W=p(z(je)),Hn=p([{ID:0,Name:"Random"}]),L=p(W.value[0]),oe=[{type:0,typeName:"Low",resourceKey:"Speed.Low"},{type:1,typeName:"Medium",resourceKey:"Speed.Medium"},{type:2,typeName:"Normal",resourceKey:"Speed.Normal"},{type:3,typeName:"High",resourceKey:"Speed.High"}],G=[{timeUnit:0,timeUnitName:"Day",resoureKey:"TimeUnit.Day"},{timeUnit:1,timeUnitName:"Week",resoureKey:"TimeUnit.Week"},{timeUnit:2,timeUnitName:"Month",resoureKey:"TimeUnit.Month"},{timeUnit:3,timeUnitName:"Year",resoureKey:"TimeUnit.Year"}],b=p(!1),$=p([]),se=[{ReactionName:"like",ReactionIcon:"icon-like",Active:!1},{ReactionName:"love",ReactionIcon:"icon-love",Active:!1},{ReactionName:"care",ReactionIcon:"icon-care",Active:!1},{ReactionName:"haha",ReactionIcon:"icon-haha",Active:!1},{ReactionName:"wow",ReactionIcon:"icon-wow",Active:!1},{ReactionName:"sad",ReactionIcon:"icon-sad",Active:!1},{ReactionName:"angry",ReactionIcon:"icon-angry",Active:!1}],N=p({paymentMethodId:"",amount:0}),q=p(!1),k=p(!1),y=p({urlService:"",warranty:{timeUnit:0,time:0,price:0},speed:{type:0,price:0},serviceId:"",quantity:0,targets:[],comment:""}),K=p(new Array),h=p(""),g=p({BankName:"",AccountName:"",AccountNumber:""}),ie=z(Qe);Be(()=>{le(),H()});async function C(e=""){return await(_==null?void 0:_.recaptchaLoaded()),await(_==null?void 0:_.executeRecaptcha(e))}async function le(){const o={headers:{captcha:await C("GetAllPromotion")}},n=await Ke.getAllPromotion(o);n!=null&&n.data&&(B.value=n.data,B.value.length&&B.value.forEach(a=>{a.value&&a.value.kind==1&&(a.valueDisplay=a.value.value*100)}))}async function H(){M.value=[];let e=!1;const n={headers:{captcha:await C("GetAllServicePackage")}},a=await Fe.getServiceByApp(L.value.ID,n);if(a!=null&&a.data){const l=a.data;if((l==null?void 0:l.length)<=0)return;l.forEach(i=>{var Y;i.nameDisplay=v("Dashboard.ServicePackageName",{name:i.name}),i.quantity=i.minQuantity;const c=i.speeds;(c==null?void 0:c.length)>0&&(i.speed=c[0],c.forEach(d=>{const I=oe.find(R=>R.type==d.type);I&&(d.speedDisplay=v(I.resourceKey))}));const E=i.warranties;(E==null?void 0:E.length)>0&&(E.forEach((d,I)=>{var J;d.index=I;const R=G.find(F=>F.timeUnit==d.timeUnit);R&&(d.warrantyDisplay=d.time+" "+v(R.resoureKey+(d.time>1?"s":""))),d.timeValue=d.time+" "+((J=G.find(F=>F.timeUnit==d.timeUnit))==null?void 0:J.timeUnitName)+(d.time>1?"s":"")}),i.warranty=E[0]),i.serviceType==T.BuffReaction&&(i.reactions=JSON.parse(JSON.stringify(se))),i.serviceType==T.BuffComment&&(e=!0),i.icon=(Y=ie.find(d=>d.ID==i.serviceType))==null?void 0:Y.Icon}),M.value=l,e&&we()}}async function ce(e){var l;e.loadingTopup=!0,N.value.amount=e.end;const n={headers:{captcha:await C("GetPaymentMethod")}},a=await ne.getAllPaymentMethod(n);if(a!=null&&a.data){if($.value=a==null?void 0:a.data,(l=$.value)!=null&&l.length){const i=$.value[0];if(i){const c=i.details;g.value={BankName:c==null?void 0:c.detailId,AccountName:c==null?void 0:c.accountName,AccountNumber:c==null?void 0:c.accountNumber},re(),N.value.paymentMethodId=i.id}}setTimeout(()=>{b.value=!0,e.loadingTopup=!1},600)}else e.loadingTopup=!1,f.showToastError("No payment method yet!")}function re(){var a;const e="https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",o=((a=He.find(l=>l.name==g.value.BankName))==null?void 0:a.bin)||"";h.value=e.replace("<BANK_ID>",o),h.value=h.value.replace("<ACCOUNT_NO>",g.value.AccountNumber),h.value=h.value.replace("<TEMPLATE>","SquX4mZ"),h.value=h.value.replace("<AMOUNT>",N.value.amount.toString());const n=(D.value.surName||"")+" "+(D.value.name||"");h.value=h.value.replace("<DESCRIPTION>",n+" "+v("Payment")),h.value=h.value.replace("<ACCOUNT_NAME>",g.value.BankName)}async function ue(e){q.value=!0;const n={headers:{captcha:await C("Payment")}},a=await ne.paymentDeposit(N.value,n);a!=null&&a.data?(f.showToastSuccess(v("Dashboard.TopupSuccess")),xe.push("/transaction")):(a==null?void 0:a.errorCode)==Ye.DepositTooFast?f.showToastWarning(v("Dashboard.DepositTooFast")):f.showToastError(v("Dashboard.TopupError")),q.value=!1,b.value=!1}function de(e){L.value=e,H()}function j(e,o,n){!n||(n[o]=e)}function pe(e,o){if(!o)return;const n=o.speeds.findIndex(a=>a.type==e);n>=0&&(o.speed=o.speeds[n])}function ve(e,o){if(!o)return;const n=o.warranties.findIndex(a=>a.index==e);n>=0&&(o.warranty=o.warranties[n])}async function me(e){e.loadingBuyNow=!0;const o=e;if(o.serviceId=e.id,o.urlService=e.urlService,!he(e)){e.loadingBuyNow=!1;return}const l={headers:{captcha:await C("Order")}},i=await We.order(o,l);i!=null&&i.data?(te(Oe.RefreshProfile,!0),f.showToastSuccess(v("Dashboard.OrderSuccess"))):f.showToastError(v("Dashboard.OrderError")),e.loadingBuyNow=!1}function he(e){var n,a,l,i,c;const o=e.quantity*(((n=e==null?void 0:e.speed)==null?void 0:n.price)||0+((a=e==null?void 0:e.warranty)==null?void 0:a.price)||0);return((l=D==null?void 0:D.value)==null?void 0:l.balance)<o?(f.showToastWarning(v("ToastNotEnoughBalance")),!1):!e.urlService||e.urlService==""?(f.showToastWarning(v("ToastURLNotEmpty")),!1):e.serviceType==T.BuffComment&&(!e.targets||((i=e.targets)==null?void 0:i.length)==0)?(f.showToastWarning(v("ToastCommentNotEmpty")),!1):e.serviceType==T.BuffReaction&&(!e.targets||((c=e.targets)==null?void 0:c.length)==0)?(f.showToastWarning(v("ToastReactionNotEmpty")),!1):!0}function fe(){b.value=!1}function ye(e,o){if(e.targets=e.targets||[],o.Active=!o.Active,o.Active)e.targets.push(o.ReactionName);else{const n=e.targets.indexOf(o.ReactionName);n>=0&&e.targets.splice(n,1)}}function jn(e){!e||(N.value.paymentMethodId=e.id)}function ge(e){setTimeout(()=>{e.component.focus()},0)}function Yn(e){y.value=e,y.value.targets=y.value.targets||[],k.value=!0}function _e(){k.value=!1}function be(e){e&&(y.value.comment=e,y.value.targets=y.value.comment.split(`
`))}function Ne(){k.value=!1}function Ce(e,o){var n,a;o.commentID=e,o.targets=(a=(n=K.value.find(l=>l.id==e))==null?void 0:n.content)==null?void 0:a.split(`
`)}async function Te(){const e=new URLSearchParams;return{headers:{captcha:await C("GetComment")},params:e}}async function we(){try{const e=await Te(),o=await Ge.getPaging(e);if(o&&o.data){const n=o.data;K.value=n.items}}catch(e){f.showToastError(e==null?void 0:e.message)}}return(e,o)=>(r(),u("div",Je,[t("div",null,[t("div",ze,s(e.$t("Dashboard.Topup")),1),(r(!0),u(P,null,x(B.value,n=>(r(),u("div",{key:n.id,class:"topup-card-container"},[t("div",Xe,[t("div",Ze,[n.value.kind==1?(r(),u("span",en,"+"+s(n.valueDisplay)+"%",1)):(r(),u("span",nn,"+"+s(e.$filters.currency(n.value.value)),1))])]),t("div",tn,[an,t("div",on,[t("div",sn,s(e.$t("Dashboard.Topup")),1),t("div",ln,s(e.$filters.number(n.end))+" VN\u0110",1)])]),m(A,{width:"100%",height:"40px",type:"default","styling-mode":"outlined",class:"mt-4",text:e.$t("Dashboard.TopupNow"),loading:n.loadingTopup,onClick:a=>ce(n)},null,8,["text","loading","onClick"])]))),128))]),t("div",null,[t("div",cn,s(e.$t("Dashboard.PurchaseServices")),1),t("div",rn,[(r(!0),u(P,null,x(W.value,n=>(r(),u("div",{key:n.ID,class:O(["app",{appActive:n.ID==L.value.ID}]),onClick:a=>de(n)},s(n.Name),11,un))),128))]),t("div",dn,[(r(!0),u(P,null,x(M.value,n=>(r(),u("div",{key:n.id,class:"service-card-container d-flex flex-column justify-content-between mt-4 mr-4"},[t("div",null,[t("div",pn,[t("div",null,[t("div",vn,s(n.nameDisplay),1),t("div",mn,s(e.$t("Dashboard.Only"))+" "+s(e.$filters.currency(n.speed.price))+"/"+s(e.$t("Dashboard.Turn")),1),t("div",hn," Max "+s(e.$filters.number(n.maxQuantity))+" "+s(e.$t("Dashboard.Turn"))+",\xA0Min "+s(e.$filters.number(n.minQuantity))+" "+s(e.$t("Dashboard.Turn")),1)]),t("div",fn,[t("div",{class:O(["icon",n.icon])},null,2)])]),n.serviceType==X(T).BuffReaction?(r(),u("div",yn,[t("div",gn,[(r(!0),u(P,null,x(n.reactions,a=>(r(),u("div",{key:a.ReactionIcon,class:O(["icon-buff pointer d-flex align-items-center justify-content-center",[a.ReactionName,a.Active?"active":""]]),onClick:l=>ye(n,a)},[t("span",{class:O(["icon",a.ReactionIcon])},null,2)],10,_n))),128))])])):V("",!0),t("div",bn,[m(Ue,{placeholder:e.$t("Dashboard.EnterID"),value:n.urlService,onOnValueChanged:a=>j(a,"urlService",n)},null,8,["placeholder","value","onOnValueChanged"]),t("div",Nn,[w(s(e.$t("Dashboard.GetUID"))+" ",1),t("a",Cn,s(e.$t("Dashboard.Here")),1)]),t("div",Tn,[m(Me,{placeholder:e.$t("Dashboard.EnterTurnNumber"),value:n.quantity,min:n.minQuantity,max:n.maxQuantity,onOnValueChanged:a=>j(a,"quantity",n)},null,8,["placeholder","value","min","max","onOnValueChanged"])])]),n.serviceType==X(T).BuffComment?(r(),u("div",wn,[m(Le,{placeholder:e.$t("Dashboard.EnterComment"),items:K.value,value:n.commentID,keyID:"id",display:"name",onOnValueChanged:a=>Ce(a,n)},null,8,["placeholder","items","value","onOnValueChanged"])])):V("",!0),n.speeds?(r(),u("div",Dn,[t("span",null,s(e.$t("Dashboard.ChooseSpeed")),1),t("div",kn,[m(ee,{keyID:"type",display:"speedDisplay",items:n.speeds,value:n.speed.type,onOnValueChanged:a=>pe(a,n)},null,8,["items","value","onOnValueChanged"])])])):V("",!0),n.warranties.length>0?(r(),u("div",En,[t("span",null,s(e.$t("Dashboard.ChooseWarranty")),1),t("div",An,[m(ee,{keyID:"index",display:"warrantyDisplay",items:n.warranties,value:n.warranty.index,onOnValueChanged:a=>ve(a,n)},null,8,["items","value","onOnValueChanged"])])])):V("",!0)]),t("div",null,[t("div",Sn,[t("span",null,s(e.$t("Dashboard.TotalPrice")),1),Bn,t("div",$n,[n.warranty&&n.warranty.price>0?(r(),u("div",In,[t("span",null,s(e.$filters.number(n.quantity))+" x ("+s(e.$filters.currency(n.speed.price))+" + "+s(e.$filters.currency(n.warranty.price))+") = ",1),t("span",null,s(e.$filters.currency(n.quantity*(n.speed.price+n.warranty.price))),1)])):(r(),u("div",Rn,[t("span",null,s(e.$filters.number(n.quantity))+" x "+s(e.$filters.currency(n.speed.price))+" = ",1),t("span",null,s(e.$filters.currency(n.quantity*n.speed.price)),1)]))])]),t("div",Pn,[m(A,{width:"100%",height:"40px",type:"default","styling-mode":"outlined",class:"mt-3",text:e.$t("Dashboard.BuyNow"),loading:n.loadingBuyNow,onClick:a=>me(n)},null,8,["text","loading","onClick"])])])]))),128))])]),m(Z,{"v-if":b.value,isVisible:b.value,title:e.$t("Payment"),onClosePopup:fe},{content:U(()=>[t("div",null,[t("img",{src:h.value},null,8,xn),t("div",null,[t("div",null,[t("span",null,s(e.$t("BankName")),1),On,t("span",Vn,s(g.value.BankName),1)]),t("div",null,[t("span",null,s(e.$t("AccountName")),1),Un,t("span",Mn,s(g.value.AccountName),1)]),t("div",null,[t("span",null,s(e.$t("AccountNumber")),1),Ln,t("span",qn,s(g.value.AccountNumber),1)]),t("div",null,[t("span",null,s(e.$t("AmountMoney")),1),Kn,t("span",Fn,s(e.$filters.number(N.value.amount)),1),Qn])])])]),footer:U(()=>[m(A,{class:"mr-2",text:e.$t("Cancel"),type:"normal","styling-mode":"outlined",onClick:o[0]||(o[0]=n=>b.value=!1)},null,8,["text"]),m(A,{text:e.$t("ConfirmPayment"),type:"default","styling-mode":"contained",loading:q.value,disabled:$.value.length==0,onClick:o[1]||(o[1]=n=>ue())},null,8,["text","loading","disabled"])]),_:1},8,["v-if","isVisible","title"]),m(Z,{"v-if":k.value,isVisible:k.value,title:e.$t("AddComment"),customClass:"popup-comment",width:"500px",onClosePopup:Ne},{content:U(()=>[t("div",null,[m(qe,{placeholder:"Enter comment list",value:y.value.comment,onOnValueChanged:o[2]||(o[2]=n=>be(n)),onOnContentReady:ge},null,8,["value"])]),Wn]),footer:U(()=>[m(A,{type:"default","styling-mode":"contained",text:e.$t("Save"),disabled:y.value.targets.length<5,onClick:_e},null,8,["text","disabled"])]),_:1},8,["v-if","isVisible","title"])]))}});const dt=Ve(Gn,[["__scopeId","data-v-7597bb46"]]);export{dt as default};
