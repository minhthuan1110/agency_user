import{d as ce,a as O,_ as h,u as ue,b as de,c as pe,r as n,e as _e,f as v,w as Ie,o as Ee,g as I,h as Te,i as c,t as ve,j as m,k as l,l as f,m as me,n as H,F as fe,p as ze,q as qe,B as Se,s as ge}from"./index.a3c5a5ee.js";import{C as i}from"./ColumnDataGrid.23bec9a2.js";import{L as Ce,a as Ae,b as Oe,O as W}from"./order-service.5ecf97c1.js";import{L as he}from"./list-status.a9bf9ad2.js";import{L as ye}from"./list-application.74b2f8af.js";const De={class:"container"},Pe={class:"d-flex justify-content-between align-items-center mb-3"},Ne={class:"title"},Ve={class:"d-flex"},Le={class:"mr-2"},we={class:"grid-service-package mt-3"},Re={class:"d-flex align-items-center"},xe=ce({__name:"ServicePackage",setup(ke){const j=O(()=>h(()=>import("./BaseGrid.e652126b.js").then(e=>e.B),["assets/BaseGrid.e652126b.js","assets/BaseGrid.20629372.css","assets/index.a3c5a5ee.js","assets/index.8790692c.css","assets/select_box.05db16a2.js","assets/text_box.c18f19ed.js","assets/popover.51293f7e.js","assets/number_box.546ccd32.js","assets/draggable.1b572f7d.js"])),R=O(()=>h(()=>import("./BaseSelectBox.e7e590d5.js"),["assets/BaseSelectBox.e7e590d5.js","assets/index.a3c5a5ee.js","assets/index.8790692c.css","assets/select_box.05db16a2.js","assets/text_box.c18f19ed.js"])),F=O(()=>h(()=>import("./BasePopupDelete.b52e37da.js"),["assets/BasePopupDelete.b52e37da.js","assets/index.a3c5a5ee.js","assets/index.8790692c.css"])),Q=O(()=>h(()=>import("./index.a3c5a5ee.js").then(e=>e.dT),["assets/index.a3c5a5ee.js","assets/index.8790692c.css"])),d=ue(),$=de(),{t:o}=pe(),x=new Se;let y=n(1),S=n(25),k=n(0);const Z=_e(()=>{var e,a,s;return{Application:((e=U.value)==null?void 0:e.ID)||0,Status:(a=g.value)==null?void 0:a.ID,ServiceType:(s=V.value)==null?void 0:s.ID,SkipCount:(y.value-1)*S.value,MaxResultCount:S.value}}),M=n(new Array);let D=n([]),P=n(!1);const Me={symbol:{VITE_BASE_URL:"https://api.like1.online",VITE_CLIENT_ID:"admin_autofarmer",VITE_CLIENT_SECRET:"K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",VITE_ORIGIN_AGENCY:"auto",VITE_VIETQR_URL:"https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",VITE_VIETQR_TEMPLATE:"SquX4mZ",VITE_LINK_APP_DESKTOP:"https://shorturl.at/akrZ5",VITE_LINK_APP_MOBILE:"https://shorturl.at/lzIOY",VITE_SITE_KEY:"6LeElsojAAAAAFM3pM6lp0GYtpITw_6x2bzj4L8W",VITE_IS_USE_RECAPTCHA:"true",VITE_TIMEOUT_TRANSACTON:"5000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APPROVE_AGENCY_SYMBOL,ip:{VITE_BASE_URL:"https://api.like1.online",VITE_CLIENT_ID:"admin_autofarmer",VITE_CLIENT_SECRET:"K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",VITE_ORIGIN_AGENCY:"auto",VITE_VIETQR_URL:"https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",VITE_VIETQR_TEMPLATE:"SquX4mZ",VITE_LINK_APP_DESKTOP:"https://shorturl.at/akrZ5",VITE_LINK_APP_MOBILE:"https://shorturl.at/lzIOY",VITE_SITE_KEY:"6LeElsojAAAAAFM3pM6lp0GYtpITw_6x2bzj4L8W",VITE_IS_USE_RECAPTCHA:"true",VITE_TIMEOUT_TRANSACTON:"5000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APPROVE_AGENCY_IP},Ue=n(!1),Be=n(!1),be=n(!1),N=v(ye),E=v(Ce),X=v(Ae),p=n([]),U=n(N[0]),V=n(E[0]),g=n({}),Ke=n(!1),J=v(Oe),C=n(!1),L=n(!1);let B="";Ie(()=>$.path,async e=>{U.value=N.find(a=>a.Path==e),_()},{immediate:!0}),Ee(()=>{ee()});async function b(e=""){return await(d==null?void 0:d.recaptchaLoaded()),await(d==null?void 0:d.executeRecaptcha(e))}function ee(){p.value=v(he),p.value.forEach(e=>{e.StatusDisplay=o(e.ResourceKey)}),g.value=p.value[1],M.value=[new i("#","Index","60px"),new i(o("Order.Code"),"code"),new i(o("Order.UrlService"),"urlService","320px"),new i(o("Order.Quantity"),"quantity","auto","","left",!1,"","","number","#,##0.##"),new i(o("Order.Completed"),"completedQuantity","auto","","left",!1,"","","number","#,##0.##"),new i(o("Order.Speed"),"SpeedDisplay"),new i(o("Order.Warranty"),"WarrantyDisplay"),new i(o("Order.Total"),"price","120px","","left",!1,"","","number","#,##0.## \u0111"),new i(o("Order.DoActionTime"),"doActionTime","auto","","center",!1,"","","date","dd/MM/yyyy HH:mm:ss"),new i(o("Order.DoResultTime"),"doResultTime","auto","","center",!1,"","","date","dd/MM/yyyy HH:mm:ss"),new i(o("Order.CreatedDate"),"creationTime","auto","","center",!1,"","","date","dd/MM/yyyy HH:mm:ss"),new i(o("Order.Action"),"action","125px","custom","center",!0,"right")]}function ae(e){const a=new URLSearchParams;return a.append("application",e.Application),a.append("status",e.Status),a.append("serviceType",e.ServiceType),a.append("skipCount",e.SkipCount),a.append("maxResultCount",e.MaxResultCount),a}async function _(){P.value=!0,D.value=[];const e=await b("GetOrder"),s={params:ae(Z.value),headers:{captcha:e}},A=await W.getPaging(s);if(A&&A.data){const w=A.data;k.value=w.totalCount,w.items.forEach((t,re)=>{var Y,G,z,q;t.Index=re+1,t.Fullname=(t.user.surName||"")+" "+(t.user.name||""),(t.user.name?t.user.name+" - ":"")+t.user.phoneNumber,t.ApplicationDisplay=((Y=N.find(u=>{var r,T;return u.ID==((T=(r=t.service)==null?void 0:r.service)==null?void 0:T.application)}))==null?void 0:Y.Name)||"",t.ServiceTypeDisplay=((G=E.find(u=>{var r,T;return u.ID==((T=(r=t.service)==null?void 0:r.service)==null?void 0:T.serviceType)}))==null?void 0:G.Name)||"",t.speed&&(t.SpeedDisplay=((z=J.find(u=>{var r;return u.ID==((r=t.speed)==null?void 0:r.type)}))==null?void 0:z.Name)||""),t.warranty&&(t.WarrantyDisplay=t.warranty.time+" "+((q=X.find(u=>u.ID==t.warranty.timeUnit))==null?void 0:q.Name)||"")}),D.value=w.items}setTimeout(()=>{P.value=!1},50)}function te(e){S.value=e,_()}function ne(e){y.value=e,_()}function se(e){V.value=E.find(a=>a.ID==e)||E[0],_()}function oe(e){g.value=p.value.find(a=>a.ID==e)||p.value[0],_()}function ie(e){!e||(B=e.id,C.value=!0)}function K(){L.value=!1,C.value=!1}async function le(){L.value=!0;const a={headers:{captcha:await b("CancelOrder")}},s=await W.cancelOrder(B,null,a);s&&s.data?(x.showToastSuccess("Cancel Order Success!"),_()):(console.log(s),x.showToastError("Cancel Order Error!")),K()}return(e,a)=>(I(),Te(fe,null,[c("div",De,[c("div",Pe,[c("div",Ne,ve(e.$t("ServicePackageList")),1)]),c("div",Ve,[c("div",Le,[(I(),m(f(l(R)),{width:"200px",keyID:"ID",display:"Name",dataSource:l(E),value:V.value.ID,searchEnabled:!1,onOnValueChanged:a[0]||(a[0]=s=>se(s))},null,40,["dataSource","value"]))]),c("div",null,[(I(),m(f(l(R)),{width:"200px",keyID:"ID",display:"StatusDisplay",dataSource:p.value,value:g.value.ID,searchEnabled:!1,onOnValueChanged:a[1]||(a[1]=s=>oe(s))},null,40,["dataSource","value"]))])]),c("div",we,[(I(),m(f(l(j)),{loading:l(P),dataSource:l(D),columns:M.value,total:l(k),pageIndex:l(y),pageSize:l(S),width:"100%",height:"calc(100vh - 261px)",onChangePageSize:te,onChangePageIndex:ne},{action:me(({data:s})=>[c("div",Re,[s.data.status==1?(I(),m(f(l(Q)),{key:0,width:"92px",text:e.$t("Cancel"),type:"danger","styling-mode":"outlined",onOnClick:A=>ie(s.data)},null,40,["text","onOnClick"])):H("",!0)])]),_:1},40,["loading","dataSource","columns","total","pageIndex","pageSize"]))])]),C.value?(I(),m(f(l(F)),{key:0,isVisible:C.value,title:e.$t("CancelOrder"),content:e.$t("ContentCancelOrder"),loading:L.value,textButton:e.$t("Agree"),onClosePopup:K,onOnDelete:le},null,40,["isVisible","title","content","loading","textButton"])):H("",!0)],64))}});const Qe=ge(xe,[["__scopeId","data-v-a3c90e0d"]]);export{Qe as default};
