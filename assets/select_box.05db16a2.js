import{N as d,$ as l,ad as C,a7 as I,af as z,ax as rt,cw as A,a0 as T,cS as Nt,cT as Wt,b4 as Gt,aZ as zt,bz as Kt,E as g,aN as jt,cU as Te,cV as Ut,a4 as qt,cW as Xt,an as h,aj as lt,D as ge,aE as ve,ay as w,aq as O,bw as ut,cX as Yt,av as we,a_ as y,bh as B,bJ as L,a$ as Qt,T as dt,b0 as Jt,z as S,ae as N,ah as E,ai as te,a3 as u,bf as Zt,b8 as ei,b2 as ti,bj as ct,cc as ii,b1 as ni,H as Y,aY as si,aX as ht,ab as pt,cx as ai,bd as R,cd as oi,ac as ri,au as Oe,c3 as Ae,aC as De,a9 as p,ck as H,cg as _t,ch as W,cq as li,ci as F,c4 as V,cY as ui,cZ as di,ce as J,cf as G,c_ as ft,cl as ci,co as vt,cr as hi,cp as mt,c$ as me,ct as gt,bc as Ee,cu as Et,d0 as pi,Z as St,d1 as _i,cs as fi,bM as Be,aw as vi,aQ as Le,ao as mi,c8 as Ve,bF as gi,by as Ei,bG as Si,c0 as Ci,b9 as Re,bH as bi,bg as Ii,aM as yi,a8 as xi,aa as Ti,a5 as Pe,X as ke,G as wi,U as Oi,bi as Ai,b7 as Di,ag as Bi,az as Li,S as Me,cI as Vi,bn as Ri}from"./index.a3c5a5ee.js";import{E as Se,V as Pi,a as ki,T as Mi}from"./text_box.c18f19ed.js";function $i(e){return class{constructor(){throw new Error("Module '".concat(e,"' not found"))}static getInstance(){}}}var $e=$i("TextBox");const He={_getDefaultOptions:function(){return d(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){var e=this.$element(),t=this.option("searchEnabled"),i=this._addWidgetPrefix("search"),n=this._addWidgetPrefix("with-search");if(!t){e.removeClass(n),this._removeSearchBox();return}var s=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(s):(e.addClass(n),this._$searchEditorElement=l("<div>").addClass(i).prependTo(e),this._searchEditor=this._createComponent(this._$searchEditorElement,$e,s))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){var e=this,t=e.option("searchEditorOptions"),i=C.format("Search");return d({mode:"search",placeholder:i,tabIndex:e.option("tabIndex"),value:e.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":i},onValueChanged:function(n){var s=e.option("searchTimeout");e._valueChangeDeferred=new I,clearTimeout(e._valueChangeTimeout),e._valueChangeDeferred.done(function(){this.option("searchValue",n.value)}.bind(e)),n.event&&n.event.type==="input"&&s?e._valueChangeTimeout=setTimeout(function(){e._valueChangeDeferred.resolve()},s):e._valueChangeDeferred.resolve()}},t)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.$element()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(e,t){this.option("searchEnabled")&&this._toggleFocusClass(t,this.$element()),this.callBase(e,t)},getOperationBySearchMode:function(e){return e==="equals"?"=":e},_cleanAria:function(e){this.setAria({role:null,activedescendant:null},e),e.attr("tabIndex",null)},_optionChanged:function(e){switch(e.name){case"searchEnabled":case"searchEditorOptions":this._cleanAria(this.option("searchEnabled")?this.$element():this._itemContainer()),this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource){z.log("W1009");return}e.name==="searchMode"?this._dataSource.searchOperation(this.getOperationBySearchMode(e.value)):this._dataSource[e.name](e.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(e)}},focus:function(){if(!this.option("focusedElement")&&this.option("searchEnabled")){this._searchEditor&&this._searchEditor.focus();return}this.callBase()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(e){$e=e}};var Ce="dxswipestart",be="dxswipe",ie="dxswipeend",Hi={defaultItemSizeFunc:function(){return rt(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(e){var t=A(e);return(t.x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,e)},isFastSwipe:function(e){var t=A(e);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(t.x-this._tickData.x)>=t.time-this._tickData.time}},Fi={defaultItemSizeFunc:function(){return T(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(e){var t=A(e);return(t.y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,e)},isFastSwipe:function(e){var t=A(e);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(t.y-this._tickData.y)>=t.time-this._tickData.time}},Ni={horizontal:Hi,vertical:Fi},Wi=Nt.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(e){this.callBase(e),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return Ni[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(e){this._tickData=A(e)},_start:function(e){this._savedEventData=A(e),e=this._fireEvent(Ce,e),e.cancel||(this._maxLeftOffset=e.maxLeftOffset,this._maxRightOffset=e.maxRightOffset,this._maxTopOffset=e.maxTopOffset,this._maxBottomOffset=e.maxBottomOffset)},_move:function(e){var t=this._getStrategy(),i=A(e),n=t.calcOffsetRatio.call(this,e);n=this._fitOffset(n,this.elastic),i.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=i),this._fireEvent(be,e,{offset:n}),e.preventDefault()},_end:function(e){var t=this._getStrategy(),i=t.calcOffsetRatio.call(this,e),n=t.isFastSwipe.call(this,e),s=i,a=this._calcTargetOffset(i,n);s=this._fitOffset(s,this.elastic),a=this._fitOffset(a,!1),this._fireEvent(ie,e,{offset:s,targetOffset:a})},_fitOffset:function(e,t){var i=this._getStrategy(),n=i.getBounds.call(this);return e<-n[0]?t?(-2*n[0]+e)/3:-n[0]:e>n[1]?t?(2*n[1]+e)/3:n[1]:e},_calcTargetOffset:function(e,t){var i;return t?(i=Math.ceil(Math.abs(e)),e<0&&(i=-i)):i=Math.round(e),i}});Wt({emitter:Wi,events:[Ce,be,ie]});var Fe="dx-list-item-badge-container",Gi="dx-list-item-badge",zi="dx-badge",_e="dx-list-item-chevron-container",Ki="dx-list-item-chevron",ji=Gt.inherit({_renderWatchers:function(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge:function(e){if(this._$element.children("."+Fe).remove(),!!e){var t=l("<div>").addClass(Fe).append(l("<div>").addClass(Gi).addClass(zi).text(e)),i=this._$element.children("."+_e).first();i.length>0?t.insertBefore(i):t.appendTo(this._$element)}},_renderShowChevron:function(e){if(this._$element.children("."+_e).remove(),!!e){var t=l("<div>").addClass(_e),i=l("<div>").addClass(Ki);t.append(i).appendTo(this._$element)}}}),U="__dx_key__";const Ui=zt.inherit({_getDefaultOptions:function(){return d(this.callBase(),{repaintChangesOnly:!1})},ctor:function(){this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=e=>{var t=this._dataSource;t&&!t.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&e.storeLoadOptions&&(e.storeLoadOptions.skip+=this._correctionIndex)},this._dataSource&&this._dataSource.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload:function(){this._correctionIndex=0},_init:function(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey:function(e){var t=l(),i=this.key();return this.itemElements().each((n,s)=>{var a=l(s),o=this._getItemData(a);if(i?Kt(i,this.keyOf(o),e):this._isItemEquals(o,e))return t=a,!1}),t},_dataSourceChangedHandler:function(e,t){t!=null&&t.changes?this._modifyByChanges(t.changes):(this.callBase(e,t),this._refreshItemsCache())},_isItemEquals:function(e,t){e&&e[U]&&(e=e.data);try{return JSON.stringify(e)===JSON.stringify(t)}catch{return e===t}},_isItemStrictEquals:function(e,t){return this._isItemEquals(e,t)},_shouldAddNewGroup:function(e,t){var i=!1;return this.option("grouped")&&(e.length||(i=!0),g(e,(n,s)=>{s.type==="insert"&&(i=!0,g(t,(a,o)=>{if(s.data.key!==void 0&&s.data.key===o.key)return i=!1,!1}))})),i},_partialRefresh:function(){if(this.option("repaintChangesOnly")){var e=jt(this._itemsCache,this._editStrategy.itemsGetter(),t=>t&&t[U]!==void 0?t[U]:this.keyOf(t),this._isItemStrictEquals.bind(this));if(e&&this._itemsCache.length&&!this._shouldAddNewGroup(e,this._itemsCache))return this._modifyByChanges(e,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache:function(){if(this.option("repaintChangesOnly")){var e=this._editStrategy.itemsGetter();try{this._itemsCache=d(!0,[],e),this.key()||(this._itemsCache=this._itemsCache.map((t,i)=>({[U]:e[i],data:t})))}catch{this._itemsCache=d([],e)}}},_dispose:function(){this._dataSource&&this._dataSource.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange:function(e,t,i,n){if(n)this._renderItem(i.index,i.data,null,this._findItemElementByKey(i.key));else{var s=t[Te(e,t,i.key)];s&&Ut(e,t,i.key,i.data).done(()=>{this._renderItem(t.indexOf(s),s,null,this._findItemElementByKey(i.key))})}},_insertByChange:function(e,t,i,n){qt(n||Xt(e,t,i.data,i.index)).done(()=>{var s;this._beforeItemElementInserted(i);var a=this._getItemContainer(i.data);this._renderItem((s=i.index)!==null&&s!==void 0?s:t.length,i.data,a),this._afterItemElementInserted(),this._correctionIndex++})},_getItemContainer:function(e){return this._itemContainer()},_updateSelectionAfterRemoveByChange:function(e){var t=this.option("selectedIndex");t>e?this.option("selectedIndex",t-1):t===e&&this.option("selectedItems").length===1?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted:function(e){var t=this.option("selectedIndex");e.index<=t&&this.option("selectedIndex",t+1)},_afterItemElementInserted:h,_removeByChange:function(e,t,i,n){var s=n?i.index:Te(e,t,i.key),a=n?i.oldItem:t[s];if(a){var o=this._findItemElementByKey(i.key),r=this._extendActionArgs(o);this._waitDeletingPrepare(o).done(()=>{n?(this._updateIndicesAfterIndex(s-1),this._afterItemElementDeleted(o,r),this._updateSelectionAfterRemoveByChange(s)):(this._deleteItemElementByIndex(s),this._afterItemElementDeleted(o,r))}),this._correctionIndex--}},_modifyByChanges:function(e,t){var i=this._editStrategy.itemsGetter(),n={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},s=this._dataSource,a=s&&s.paginate(),o=s&&s.group();(a||o)&&(e=e.filter(r=>r.type!=="insert"||r.index!==void 0)),e.forEach(r=>this["_".concat(r.type,"ByChange")](n,i,r,t)),this._renderedItemsCount=i.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer:function(e,t,i){var n=e.children(this._itemSelector()).get(i);lt.insertElement(e.get(0),t.get(0),n)},_optionChanged:function(e){switch(e.name){case"items":var t=this._partialRefresh(e.value);t||this.callBase(e);break;case"dataSource":(!this.option("repaintChangesOnly")||!e.value)&&this.option("items",[]),this.callBase(e);break;case"repaintChangesOnly":break;default:this.callBase(e)}}});var qi=e=>Array.isArray(e)&&e.every(t=>{var i=Object.keys(t).length===2,n="key"in t&&"items"in t;return i&&n&&Array.isArray(t.items)});const Ct={_getSpecificDataSourceOption:function(){var e=this.option("dataSource"),t=!1,i={};return this._getGroupedOption()&&qi(e)&&(i=e.reduce((n,s)=>{var a=s.items.map(o=>(ge(o)||(o={text:o},t=!0),"key"in o||(o.key=s.key),o));return n.concat(a)},[]),e={store:{type:"array",data:i},group:{selector:"key",keepInitialKeyOrder:!0}},t&&(e.searchExpr="text")),e}};var Xi="dx-list",Q="dx-list-item",Yi="."+Q,Qi="dx-list-item-icon-container",Ji="dx-list-item-icon",D="dx-list-group",fe="dx-list-group-header",q="dx-list-group-body",Zi="dx-list-collapsible-groups",Ne="dx-list-group-collapsed",en="dx-list-group-header-indicator",tn="dx-has-next",nn="dx-list-next-button",We="dx-wrap-item-text",sn=".dx-list-select-all",an="dxListItemData",Ge=70,on=ve("items"),rn,bt=Ui.inherit({_activeStateUnit:[Yi,sn].join(","),_supportedKeys:function(){var e=this,t=function(n){var s=i(n),a=s.is(e.option("focusedElement"));a&&(function(o,r){var c=o.position().top;r==="prev"&&(c=o.position().top-T(e.$element())+w(o)),e.scrollTo(c)}(s,n),s=i(n)),e.option("focusedElement",O(s)),e.scrollToItem(s)};function i(n){var s=e.scrollTop(),a=T(e.$element()),o=l(e.option("focusedElement")),r=!0;if(!o.length)return l();for(;r;){var c=o[n]();if(!c.length)break;var _=c.position().top+w(c)/2;r=_<a+s&&_>s,r&&(o=c)}return o}return d(this.callBase(),{leftArrow:h,rightArrow:h,pageUp:function(){return t("prev"),!1},pageDown:function(){return t("next"),!1}})},_getDefaultOptions:function(){return d(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:C.format("dxList-pullingDownText"),pulledDownText:C.format("dxList-pulledDownText"),refreshingText:C.format("dxList-refreshingText"),pageLoadingText:C.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:C.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},_listAttributes:{role:"listbox"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:function(e){return e?e.showChevron:void 0},badgeExpr:function(e){return e?e.badge:void 0}})},_defaultOptionsRules:function(){var e=ut();return this.callBase().concat(Yt(),[{device:function(){return!we},options:{useNativeScrolling:!1}},{device:function(t){return!we&&!y.isSimulator()&&y.real().deviceType==="desktop"&&t.platform==="generic"},options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:function(){return y.real().deviceType==="desktop"&&!y.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return B(e)},options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:"",useInkRipple:!0}}])},_visibilityChanged:function(e){e&&this._updateLoadingState(!0)},_itemClass:function(){return Q},_itemDataKey:function(){return an},_itemContainer:function(){return this._$container},_saveSelectionChangeEvent:function(e){this._selectionChangeEventInstance=e},_getSelectionChangeEvent:function(){return this._selectionChangeEventInstance},_refreshItemElements:function(){this.option("grouped")?this._itemElementsCache=this._itemContainer().children("."+D).children("."+q).children(this._itemSelector()):this._itemElementsCache=this._itemContainer().children(this._itemSelector())},_modifyByChanges:function(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem:function(e,t){var i=this.callBase(e,t);return i.done(function(){this._refreshItemElements()})},deleteItem:function(e){var t=this.callBase(e);return t.done(function(){this._refreshItemElements()})},_itemElements:function(){return this._itemElementsCache},_itemSelectHandler:function(e){if(!(this.option("selectionMode")==="single"&&this.isItemSelected(e.currentTarget)))return this.callBase(e)},_allowDynamicItemsAppend:function(){return!0},_resetDataSourcePageIndex:function(){var e=this.getDataSource();e&&e.pageIndex()!==0&&(e.pageIndex(0),e.load())},_init:function(){this.callBase(),this._resetDataSourcePageIndex(),this._$container=this.$element(),this._initScrollView(),this._feedbackShowTimeout=Ge,this._createGroupRenderAction()},_scrollBottomMode:function(){return this.option("pageLoadMode")==="scrollBottom"},_nextButtonMode:function(){return this.option("pageLoadMode")==="nextButton"},_dataSourceOptions:function(){var e=this._scrollBottomMode(),t=this._nextButtonMode();return d(this.callBase(),{paginate:L(e||t,!0)})},_getGroupedOption:function(){return this.option("grouped")},_getGroupContainerByIndex:function(e){return this._itemContainer().find(".".concat(D)).eq(e).find(".".concat(q))},_dataSourceFromUrlLoadMode:function(){return"raw"},_initScrollView:function(){var e=this.option("scrollingEnabled"),t=e&&this.option("pullRefreshEnabled"),i=e&&this._scrollBottomMode()&&!!this._dataSource;this._scrollView=this._createComponent(this.$element(),ln(),{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!e,onScroll:this._scrollHandler.bind(this),onPullDown:t?this._pullDownHandler.bind(this):null,onReachBottom:i?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=l(this._scrollView.content()),this.option("wrapItemText")&&this._$container.addClass(We),this._createScrollViewActions()},_createScrollViewActions:function(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler:function(e){this._scrollAction&&this._scrollAction(e)},_initTemplates:function(){this._templateManager.addDefaultTemplates({group:new Qt(function(e,t){dt(t)?t.key&&e.text(t.key):e.text(String(t))},["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate:function(e,t){if(this.callBase(e,t),e.icon){var i=Jt(e.icon).addClass(Ji),n=l("<div>").addClass(Qi);n.append(i),t.prepend(n)}},_getBindableFields:function(){return["text","html","icon"]},_updateLoadingState:function(e){var t=this._scrollBottomMode()&&e&&!this._isDataSourceLoading()&&!this._isLastPage();this._shouldContinueLoading(t)?this._infiniteDataLoading():(this._scrollView.release(!t&&!this._isDataSourceLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton:function(){return this._nextButtonMode()&&this._dataSource&&this._dataSource.isLoaded()},_isDataSourceFirstLoadCompleted:function(e){return S(e)&&(this._isFirstLoadCompleted=e),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler:function(e){this._loadIndicationSuppressed()||(e&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout(function(){var t=!this._itemElements().length,i=!t||this._isDataSourceFirstLoadCompleted();if(i){var n;(n=this._scrollView)===null||n===void 0||n.startLoading()}}.bind(this)):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),e||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler:function(){!this._shouldAppendItems()&&N()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent:function(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff:function(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed:function(e){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=e},_scrollViewIsFull:function(){var e=this._scrollView;return!e||T(e.content())>T(e.container())},_pullDownHandler:function(e){this._pullRefreshAction(e),this._dataSource&&!this._isDataSourceLoading()?(this._clearSelectedItems(),this._dataSource.pageIndex(0),this._dataSource.reload()):this._updateLoadingState()},_shouldContinueLoading:function(e){var t,i,n=T(this._scrollView.content())-T(this._scrollView.container())<((t=(i=this._scrollView.scrollOffset())===null||i===void 0?void 0:i.top)!==null&&t!==void 0?t:0);return e&&(!this._scrollViewIsFull()||n)},_infiniteDataLoading:function(){var e=this.$element().is(":visible");e&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout(()=>{this._loadNextPage()}))},_scrollBottomHandler:function(e){this._pageLoadingAction(e),!this._isDataSourceLoading()&&!this._isLastPage()?this._loadNextPage():this._updateLoadingState()},_renderItems:function(e){this.option("grouped")?(g(e,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),B()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent:function(){var e=E(te,this.NAME),t="."+fe,i=this.$element(),n=this.option("collapsibleGroups");i.toggleClass(Zi,n),u.off(i,e,t),n&&u.on(i,e,t,function(s){this._createAction(function(a){var o=l(a.event.currentTarget).parent();this._collapseGroupHandler(o),this.option("focusStateEnabled")&&this.option("focusedElement",O(o.find("."+Q).eq(0)))}.bind(this),{validatingTargetName:"element"})({event:s})}.bind(this))},_collapseGroupHandler:function(e,t){var i=new I;if(e.hasClass(Ne)===t)return i.resolve();var n=e.children("."+q),s=w(n),a=0;return s===0&&(Zt(n,"auto"),a=w(n)),e.toggleClass(Ne,t),ei.animate(n,{type:"custom",from:{height:s},to:{height:a},duration:200,complete:function(){this.updateDimensions(),this._updateLoadingState(),i.resolve()}.bind(this)}),i.promise()},_dataSourceLoadErrorHandler:function(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup:function(){this._itemElementsCache=l(),this.$element().addClass(Xi),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria("role",this.option("_listAttributes").role)},_renderInkRipple:function(){this._inkRipple=ti()},_toggleActiveState:function(e,t,i){this.callBase.apply(this,arguments);var n=this;if(!!this._inkRipple){var s={element:e,event:i};t?B()?this._inkRippleTimer=setTimeout(function(){n._inkRipple.showWave(s)},Ge/2):n._inkRipple.showWave(s):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(s))}},_postprocessRenderItem:function(e){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent(l(e.itemElement))},_attachSwipeEvent:function(e){var t=E(ie,this.NAME);u.on(e,t,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler:function(e){this._itemDXEventHandler(e,"onItemSwipe",{direction:e.offset<0?"left":"right"})},_nextButtonHandler:function(e){this._pageLoadingAction(e);var t=this._dataSource;t&&!t.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup:function(e,t){var i=l("<div>").addClass(D).appendTo(this._itemContainer()),n=l("<div>").addClass(fe).appendTo(i),s=this.option("groupTemplate"),a=this._getTemplate(t.template||s,t,e,n),o={index:e,itemData:t,container:O(n)};this._createItemByTemplate(a,o),B()&&l("<div>").addClass(en).prependTo(n),this._renderingGroupIndex=e;var r=l("<div>").addClass(q).appendTo(i);g(on(t)||[],function(c,_){this._renderItem({group:e,item:c},_,r)}.bind(this)),this._groupRenderAction({groupElement:O(i),groupIndex:e,groupData:t})},downInkRippleHandler:function(e){this._toggleActiveState(l(e.currentTarget),!0,e)},upInkRippleHandler:function(e){this._toggleActiveState(l(e.currentTarget),!1)},attachGroupHeaderInkRippleEvents:function(){var e="."+fe,t=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);var i=[t,"dxpointerdown",e,this._downInkRippleHandler],n=[t,"dxpointerup dxpointerout",e,this._upInkRippleHandler];u.off(...i),u.on(...i),u.off(...n),u.on(...n)},_createGroupRenderAction:function(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean:function(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),delete this._inkRipple,this.callBase.apply(this,arguments)},_dispose:function(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState:function(e){this.callBase(e),this._scrollView.option("disabled",e||!this.option("scrollingEnabled"))},_toggleNextButton:function(e){var t=this._dataSource,i=this._getNextButton();this.$element().toggleClass(tn,e),e&&t&&t.isLoaded()&&i.appendTo(this._itemContainer()),e||i.detach()},_getNextButton:function(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton:function(){var e=l("<div>").addClass(nn),t=l("<div>").appendTo(e);return this._createComponent(t,ct,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:B()?"default":void 0,integrationOptions:{}}),e},_moveFocus:function(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh:function(){if(!N())this.callBase();else{var e=this._scrollView.scrollTop();this.callBase(),e&&this._scrollView.scrollTo(e)}},_optionChanged:function(e){switch(e.name){case"pageLoadMode":this._toggleNextButton(e.value),this._initScrollView();break;case"dataSource":this.callBase(e),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(e),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState();break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"grouped":case"collapsibleGroups":case"groupTemplate":this._invalidate();break;case"wrapItemText":this._$container.toggleClass(We,e.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(e),this._scrollView.option(e.name,e.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(e),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(e);break;case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"_swipeEnabled":case"_listAttributes":break;default:this.callBase(e)}},_extendActionArgs:function(e){if(!this.option("grouped"))return this.callBase(e);var t=e.closest("."+D),i=t.find("."+Q);return d(this.callBase(e),{itemIndex:{group:t.index(),item:i.index(e)}})},expandGroup:function(e){var t=new I,i=this._itemContainer().find("."+D).eq(e);return this._collapseGroupHandler(i,!1).done(function(){t.resolveWith(this)}.bind(this)),t.promise()},collapseGroup:function(e){var t=new I,i=this._itemContainer().find("."+D).eq(e);return this._collapseGroupHandler(i,!0).done(function(){t.resolveWith(this)}.bind(this)),t},updateDimensions:function(){var e=this,t=new I;return e._scrollView?e._scrollView.update().done(function(){!e._scrollViewIsFull()&&e._updateLoadingState(!0),t.resolveWith(e)}):t.resolveWith(e),t.promise()},reload:function(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint:function(){this.scrollTo(0),this.callBase()},scrollTop:function(){return this._scrollView.scrollOffset().top},clientHeight:function(){return this._scrollView.clientHeight()},scrollHeight:function(){return this._scrollView.scrollHeight()},scrollBy:function(e){this._scrollView.scrollBy(e)},scrollTo:function(e){this._scrollView.scrollTo(e)},scrollToItem:function(e){var t=this._editStrategy.getItemElement(e);this._scrollView.scrollToElement(t==null?void 0:t.get(0))},_dimensionChanged:function(){this.updateDimensions()}}).include(Ct);bt.ItemClass=ji;function ln(){return rn||ii}var un="dx-list-item",ze="dx-list-group",Ie=20,dn=(1<<Ie)-1,Ke=function(e){return(e.group<<Ie)+e.item},x=function(e){return{group:e>>Ie,item:e&dn}},cn=ni.inherit({_groupElements:function(){return this._collectionWidget._itemContainer().find("."+ze)},_groupItemElements:function(e){return e.find("."+un)},getIndexByItemData:function(e){var t=this._collectionWidget.option("items"),i=!1;return e?(e.items&&e.items.length&&(e=e.items[0]),g(t,function(n,s){if(!s.items||(g(s.items,function(a,o){return o!==e?!0:(i={group:n,item:a},!1)}),i))return!1}),i):!1},getItemDataByIndex:function(e){var t=this._collectionWidget.option("items");return Y(e)?this.itemsGetter()[e]:e&&t[e.group]&&t[e.group].items[e.item]||null},itemsGetter:function(){for(var e=[],t=this._collectionWidget.option("items"),i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);return e},deleteItemAtIndex:function(e){var t=x(e),i=this._collectionWidget.option("items")[t.group].items;i.splice(t.item,1)},getKeysByItems:function(e){var t=[],i;for(i=0;i<e.length;i++)e[i]&&e[i].items?t=t.concat(e[i].items):t.push(e[i]);var n=[];for(i=0;i<t.length;i++)n.push(this._collectionWidget.keyOf(t[i]));return n},getIndexByKey:function(e,t){var i=t||this._collectionWidget.option("items"),n=-1,s=this;return g(i,function(a,o){if(!!o.items&&(g(o.items,function(r,c){var _=s._collectionWidget.keyOf(c);if(s._equalKeys(_,e))return n={group:a,item:r},!1}),n!==-1))return!1}),n},_getGroups:function(e){var t=this._collectionWidget.getDataSource(),i=t&&t.group();return i?si.queryByOptions(ht(e),{group:i}).toArray():this._collectionWidget.option("items")},getItemsByKeys:function(e,t){var i=[],n=this._getGroups(t),s={},a=o=>{var r=this.getIndexByKey(o,n),c=r&&n[r.group];if(!!c)return{groupKey:c.key,item:c.items[r.item]}};return g(e,function(o,r){var c=a(r);if(!!c){var _=c.groupKey,b=c.item,f=s[_];f||(f={key:_,items:[]},s[_]=f,i.push(f)),f.items.push(b)}}),i},moveItemAtIndexToIndex:function(e,t){var i=this._collectionWidget.option("items"),n=x(e),s=x(t),a=i[n.group].items,o=i[s.group].items,r=a[n.item];a.splice(n.item,1),o.splice(s.item,0,r)},_isItemIndex:function(e){return e&&Y(e.group)&&Y(e.item)},_getNormalizedItemIndex:function(e){var t=l(e),i=t.closest("."+ze);return i.length?Ke({group:this._groupElements().index(i),item:this._groupItemElements(i).index(t)}):-1},_normalizeItemIndex:function(e){return Ke(e)},_denormalizeItemIndex:function(e){return x(e)},_getItemByNormalizedIndex:function(e){var t=x(e),i=this._groupElements().eq(t.group);return this._groupItemElements(i).eq(t.item)},_itemsFromSameParent:function(e,t){return x(e).group===x(t).group}}),It={};function hn(e,t,i){var n=It,s={};s[e]=n[e]?n[e]:{},s[e][t]=i,d(n,s)}var yt=[],ne=function(e,t,i){yt.push({enabled:e,decoratorType:t,decoratorSubType:i})};ne(function(){return this.option("menuItems").length},function(){return"menu"},function(){return this.option("menuMode")});ne(function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")},function(){var e=this.option("itemDeleteMode");return e==="toggle"||e==="slideButton"||e==="swipe"||e==="static"?"delete":"menu"},function(){var e=this.option("itemDeleteMode");return e==="slideItem"&&(e="slide"),e});ne(function(){return this.option("selectionMode")!=="none"&&this.option("showSelectionControls")},function(){return"selection"},function(){return"default"});ne(function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")},function(){return"reorder"},function(){return"default"});var pn="dx-list-item-before-bag",_n="dx-list-item-after-bag",fn="beforeBag",vn="afterBag",mn="modifyElement",gn="afterRender",En="getExcludedSelectors",Sn=pt.inherit({ctor:function(e){this._list=e,this._fetchRequiredDecorators()},dispose:function(){this._decorators&&this._decorators.length&&g(this._decorators,function(e,t){t.dispose()})},_fetchRequiredDecorators:function(){this._decorators=[],g(yt,function(e,t){var i=t.enabled.call(this._list);if(i){var n=t.decoratorType.call(this._list),s=t.decoratorSubType.call(this._list),a=this._createDecorator(n,s);this._decorators.push(a)}}.bind(this))},_createDecorator:function(e,t){var i=this._findDecorator(e,t);return new i(this._list)},_findDecorator:function(e,t){var i,n=(i=It[e])===null||i===void 0?void 0:i[t];if(!n)throw z.Error("E1012",e,t);return n},modifyItemElement:function(e){var t=l(e.itemElement),i={$itemElement:t};this._prependBeforeBags(t,i),this._appendAfterBags(t,i),this._applyDecorators(mn,i)},afterItemsRendered:function(){this._applyDecorators(gn)},_prependBeforeBags:function(e,t){var i=this._collectDecoratorsMarkup(fn,t,pn);e.prepend(i)},_appendAfterBags:function(e,t){var i=this._collectDecoratorsMarkup(vn,t,_n);e.append(i)},_collectDecoratorsMarkup:function(e,t,i){var n=l("<div>");return g(this._decorators,function(){var s=l("<div>").addClass(i);this[e](d({$container:s},t)),s.children().length&&n.append(s)}),n.children()},_applyDecorators:function(e,t){g(this._decorators,function(){this[e](t)})},_handlerExists:function(e){if(!this._decorators)return!1;for(var t=this._decorators,i=t.length,n=0;n<i;n++)if(t[n][e]!==h)return!0;return!1},_eventHandler:function(e,t,i){if(!this._decorators)return!1;for(var n=!1,s=this._decorators,a=s.length,o=0;o<a&&(n=s[o][e](t,i),!n);o++);return n},handleClick:function(e,t){return this._eventHandler("handleClick",e,t)},handleKeyboardEvents:function(e,t){return this._eventHandler("handleKeyboardEvents",e,t)},handleEnterPressing:function(e){return this._eventHandler("handleEnterPressing",e)},contextMenuHandlerExists:function(){return this._handlerExists("handleContextMenu")},handleContextMenu:function(e,t){return this._eventHandler("handleContextMenu",e,t)},getExcludedItemSelectors:function(){var e=[];return this._applyDecorators(En,e),e.join(",")}}),Cn="dx-list-item-selected",bn="dx-list-item-response-wait",In=bt.inherit({_supportedKeys(){var e=this,t=this.callBase(),i=(n,s)=>{var a=this._editStrategy,o=this.option("focusedElement"),r=a.getNormalizedIndex(o),c=r===this._getLastItemIndex();if(!(c&&this._isDataSourceLoading()))if(n.shiftKey&&e.option("itemDragging.allowReordering")){var _=r+(s?-1:1),b=a.getItemElement(_);this.reorderItem(o,b),this.scrollToItem(o),n.preventDefault()}else{var f=this._editProvider,P=f.handleKeyboardEvents(r,s);P||(s?t.upArrow(n):t.downArrow(n))}};return d({},t,{del:n=>{e.option("allowItemDeleting")&&(n.preventDefault(),e.deleteItem(e.option("focusedElement")))},upArrow:n=>i(n,!0),downArrow:n=>i(n),enter:function(n){this._editProvider.handleEnterPressing(n)||t.enter.apply(this,arguments)},space:function(n){this._editProvider.handleEnterPressing(n)||t.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();var e=this._editProvider.getExcludedItemSelectors();e.length&&(this._itemElementsCache=this._itemElementsCache.not(e))},_isItemStrictEquals:function(e,t){var i=e&&e.__dx_key__;return i&&!this.key()&&this._selection.isItemSelected(i)?!1:this.callBase(e,t)},_getDefaultOptions(){return d(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:C.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:e=>e.platform==="ios",options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return this.option("selectAllMode")==="page"},_initEditProvider(){this._editProvider=new Sn(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new cn(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>Cn,_itemResponseWaitClass:()=>bn,_itemClickHandler(e){var t=l(e.currentTarget);if(!t.is(".dx-state-disabled, .dx-state-disabled *")){var i=this._editProvider.handleClick(t,e);i||(this._saveSelectionChangeEvent(e),this.callBase(...arguments))}},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(e){var t=l(e.currentTarget);if(!t.is(".dx-state-disabled, .dx-state-disabled *")){var i=ai(e)&&this._editProvider.handleContextMenu(t,e);if(i){e.handledByEditProvider=!0;return}this.callBase(...arguments)}},_getItemContainer:function(e){if(this.option("grouped")){var t,i=(t=this._editStrategy.getIndexByItemData(e))===null||t===void 0?void 0:t.group;return this._getGroupContainerByIndex(i)}else return this.callBase(e)},_itemContextMenuHandler(e){var t=l(e.currentTarget);if(!t.is(".dx-state-disabled, .dx-state-disabled *")){var i=!e.handledByEditProvider&&this._editProvider.handleContextMenu(t,e);if(i){e.preventDefault();return}this.callBase(...arguments)}},_postprocessRenderItem(e){this.callBase(...arguments),this._editProvider.modifyItemElement(e)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(e){var t=this._editStrategy.getItemElement(e);this.option("focusedElement",t),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(e){switch(e.name){case"selectAllMode":this._initDataSource(),this._dataSource.pageIndex(0),this._dataSource.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(e);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(e)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(e){return this._itemElements().index(e)},getItemElementByFlatIndex(e){var t=this._itemElements();return e<0||e>=t.length?l():t.eq(e)},getItemByIndex(e){return this._editStrategy.getItemDataByIndex(e)}}),xt=In.inherit(He).inherit({_addWidgetPrefix:function(e){return"dx-list-"+e},_getCombinedFilter:function(){var e,t,i=this._dataSource;return i&&(t={filter:i.filter()},i._addSearchFilter(t),e=t.filter),e},_initDataSource:function(){var e=this.option("searchValue"),t=this.option("searchExpr"),i=this.option("searchMode");this.callBase(),this._dataSource&&(e&&e.length&&this._dataSource.searchValue(e),i.length&&this._dataSource.searchOperation(He.getOperationBySearchMode(i)),t&&this._dataSource.searchExpr(t))}});R("dxList",xt);var je="dx-invalid-message-auto",Ue="dx-validation-target";class ye extends oi{getProps(){var t=super.getProps();return t.onFocusIn=()=>{var i=this.option("validationMessageMode")==="auto";if(i){var n=l(".dx-invalid-message.dx-overlay-wrapper");n==null||n.removeClass(je),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout(()=>{n==null||n.addClass(je)},150)}},t.saveValueChangeEvent=i=>{this._valueChangeEventInstance=i},t}_createElement(t){super._createElement(t),this.showValidationMessageTimeout=void 0,this.validationRequest=ri(),Oe(this.$element()[0],Ue,this)}_render(){var t;(t=this.option("_onMarkupRendered"))===null||t===void 0||t()}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(t){super._initOptions(t),this.option(Ae.initValidationOptions(t))}_getDefaultOptions(){return d(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(t,i){var n=d({},t.option()),s=()=>this._silent(i,n);s(),t.on("optionChanged",s)}_raiseValidation(t,i){var n=!S(t)&&!S(i);t!==i&&!n&&this.validationRequest.fire({value:t,editor:this})}_raiseValueChangeAction(t,i){var n;(n=this._valueChangeAction)===null||n===void 0||n.call(this,{element:this.$element(),previousValue:i,value:t,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(t){var{name:i,previousValue:n,value:s}=t;switch(i&&this._getActionConfigs()[i]!==void 0&&this._addAction(i),i){case"value":this._raiseValidation(s,n),this._raiseValueChangeAction(s,n);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(Ae.synchronizeValidationOptions(t,this.option()))}super._optionChanged(t)}reset(){var{value:t}=this._getDefaultOptions();this.option({value:t})}_dispose(){super._dispose(),Oe(this.element(),Ue,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}}var yn=Se.isEditor,Tt=e=>yn(e)||e instanceof ye;ye.isEditor=Tt;Se.isEditor=Tt;class xn extends ye{_useTemplates(){return!1}_isFocused(){var t=this.$element()[0];return t.classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){var t=super.getProps();return t.value!==null&&(t.value=Boolean(t.value)),t}}var Tn=["dataSource","selectedRowKeys"],wn={integrationOptions:!0};function $(e,t,i){return{path:e,value:t,previousValue:i}}function qe(e,t,i,n,s,a){if(!wn[n]){var o=De(t),r=De(i);if(t!==i)if(o!==r)e.push($(n,i,t));else if(o==="object")if(!dt(i))e.push($(n,i,t));else{var c=Xe(t,i,s,a);e.push(...c.map(f=>p({},f,{path:"".concat(n,".").concat(f.path)})))}else if(o==="array"){var _=a.some(f=>s.includes(f));if(_&&t!==i)e.push($(n,i,t));else if(t.length!==i.length)e.push($(n,i,t));else{var b=Xe(t,i,s,a);[].push.apply(e,b.map(f=>p({},f,{path:"".concat(n).concat(f.path)})))}}else e.push($(n,i,t))}}var wt=e=>(t,i,n,s)=>{var a=[],o=Array.isArray(t)?r=>{qe(a,t[r],i[r],"[".concat(r,"]"),"".concat(n,".").concat(r),s)}:r=>{qe(a,t[r],i[r],r,"".concat(n,".").concat(r),s)};return e(t).forEach(o),Object.keys(i).filter(r=>!Object.prototype.hasOwnProperty.call(t,r)&&t[r]!==i[r]).forEach(r=>{a.push({path:r,value:i[r],previousValue:t[r]})}),a},Xe=wt(e=>Object.keys(e)),On={key:!0,ref:!0,children:!0,style:!0},An=wt(e=>Object.keys(e).filter(t=>!On[t]));function Dn(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Tn;return An(e,t,"",i)}var Bn=["valueChange"],Ln=["componentProps","componentType","rootElementRef","templateNames"],Ot=e=>Object.keys(e).reduce((t,i)=>(e[i]!==void 0&&(t[i]=e[i]),t),{}),Vn=e=>{var{props:{componentProps:{className:t}},restAttributes:i,widgetRef:n}=e;return Ot(H(1,"div",t,null,1,p({},i),null,n))},Rn={};class At extends _t{constructor(t){super(t),this.state={},this.widgetRef=W(),this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.setRootElementRef=this.setRootElementRef.bind(this),this.updateWidget=this.updateWidget.bind(this)}get config(){return"ConfigContext"in this.context?this.context.ConfigContext:li}createEffects(){return[new F(this.setupWidget,[]),new F(this.setRootElementRef,[]),new F(this.updateWidget,[this.props.componentProps,this.config,this.props.templateNames])]}updateEffects(){var t;(t=this._effects[2])===null||t===void 0||t.update([this.props.componentProps,this.config,this.props.templateNames])}setupWidget(){var t=new this.props.componentType(this.widgetRef.current,this.properties);return this.instance=t,()=>{t.dispose(),this.instance=null}}setRootElementRef(){var{rootElementRef:t}=this.props;t&&(t.current=this.widgetRef.current)}updateWidget(){var t=this.getInstance();if(!!t){var i=Dn(this.prevProps||{},this.properties);i.length&&(t.beginUpdate(),i.forEach(n=>{var{path:s,value:a}=n;t.option(s,a)}),t.endUpdate()),this.prevProps=this.properties}}get properties(){var t,i=Ot(this.props.componentProps),{valueChange:n}=i,s=V(i,Bn),a=p({rtlEnabled:!!((t=this.config)!==null&&t!==void 0&&t.rtlEnabled),isRenovated:!0},s);n&&(a.onValueChanged=r=>{var{value:c}=r;return n(c)});var o=this.props.templateNames;return o.forEach(r=>{ui(r,a,this)&&(a[r]=(c,_,b)=>{di(this.props.componentProps[r],{item:c,index:_,container:b},this)})}),a}get restAttributes(){var t=this.props,i=V(t,Ln);return i}getInstance(){return this.instance}render(){var t=this.props;return Vn({props:p({},t),widgetRef:this.widgetRef,config:this.config,properties:this.properties,restAttributes:this.restAttributes})}}At.defaultProps=Rn;var Pn=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionRequest","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],kn=e=>{var{componentProps:t,restAttributes:i}=e;return J(G(2,At,p({componentType:Pi,componentProps:t,templateNames:[]},i)))},Mn=Object.create(Object.prototype,p(Object.getOwnPropertyDescriptors(ft),Object.getOwnPropertyDescriptors({mode:"auto",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0})));class Dt extends ci{constructor(t){super(t),this.state={}}get componentProps(){return this.props}get restAttributes(){var t=this.props,i=V(t,Pn);return i}render(){var t=this.props;return kn({props:p({},t),componentProps:this.componentProps,restAttributes:this.restAttributes})}}Dt.defaultProps=Mn;var $n=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationStatus","value","valueChange","visible","width"],Hn=e=>{var{classes:t,isValid:i,readOnly:n}=e,s={"dx-state-readonly":!!n,"dx-invalid":!i,["".concat(t)]:!!t};return vt(s)},Fn=e=>{var{aria:t,cssClasses:i,isValidationMessageVisible:n,onFocusIn:s,props:{accessKey:a,activeStateEnabled:o,children:r,className:c,disabled:_,focusStateEnabled:b,height:f,hint:P,hoverStateEnabled:se,onClick:ae,onKeyDown:oe,rtlEnabled:k,tabIndex:re,validationMessageMode:le,visible:ue,width:de},restAttributes:K,rootElementRef:ce,validationErrors:he,validationMessageGuid:pe,validationMessageTarget:M,widgetRef:j}=e;return J(G(2,hi,p({rootElementRef:ce,aria:t,classes:i,activeStateEnabled:o,focusStateEnabled:b,hoverStateEnabled:se,accessKey:a,className:c,rtlEnabled:k,hint:P,disabled:_,height:f,width:de,onFocusIn:s,onClick:ae,onKeyDown:oe,tabIndex:re,visible:ue},K,{children:mt([r,n&&G(2,Dt,{validationErrors:he,mode:le,positionRequest:"below",rtlEnabled:k,target:M,boundary:M,visualContainer:M,contentId:pe})],0)}),null,j))},m=Object.create(Object.prototype,p(Object.getOwnPropertyDescriptors(ft),Object.getOwnPropertyDescriptors({readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationStatus:"valid",isValid:!0,defaultValue:null,valueChange:()=>{}}))),Nn={get readOnly(){return m.readOnly},get name(){return m.name},get validationError(){return m.validationError},get validationErrors(){return m.validationErrors},get validationMessageMode(){return m.validationMessageMode},get validationStatus(){return m.validationStatus},get isValid(){return m.isValid},get defaultValue(){return m.defaultValue},get valueChange(){return m.valueChange},get className(){return m.className},get activeStateEnabled(){return m.activeStateEnabled},get disabled(){return m.disabled},get focusStateEnabled(){return m.focusStateEnabled},get hoverStateEnabled(){return m.hoverStateEnabled},get tabIndex(){return m.tabIndex},get visible(){return m.visible},get aria(){return me.aria},get classes(){return me.classes}};class Bt extends gt{constructor(t){super(t),this.widgetRef=W(),this.rootElementRef=W(),this.__getterCache={},this.state={validationMessageGuid:"dx-".concat(new Ee),isValidationMessageVisible:!1,value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new F(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),Et()]}updateEffects(){var t;(t=this._effects[0])===null||t===void 0||t.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState(t=>({isValidationMessageVisible:this.shouldShowValidationMessage}))}onFocusIn(t){var{onFocusIn:i}=this.props;i==null||i(t)}get cssClasses(){return"".concat(Hn(p({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value})))}get shouldShowValidationMessage(){var t,{isValid:i,validationStatus:n}=this.props,s=(t=this.validationErrors)!==null&&t!==void 0?t:[],a=i&&n!=="invalid";return!a&&s.length>0}get aria(){var{isValid:t,readOnly:i}=this.props,n={readonly:i?"true":"false",invalid:t?"false":"true"};return this.shouldShowValidationMessage&&(n.describedBy=this.state.validationMessageGuid),p({},n,this.props.aria)}get validationErrors(){return this.__getterCache.validationErrors!==void 0?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{var{validationError:t,validationErrors:i}=this.props,n=i&&[...i];return!n&&t&&(n=[p({},t)]),n})()}get validationMessageTarget(){var t;return(t=this.rootElementRef)===null||t===void 0?void 0:t.current}get restAttributes(){var t=p({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}),i=V(t,$n);return i}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(t,i,n){super.componentWillUpdate(),(this.props.validationError!==t.validationError||this.props.validationErrors!==t.validationErrors)&&(this.__getterCache.validationErrors=void 0)}render(){var t=this.props;return Fn({props:p({},t,{value:this.props.value!==void 0?this.props.value:this.state.value}),validationMessageGuid:this.state.validationMessageGuid,isValidationMessageVisible:this.state.isValidationMessageVisible,rootElementRef:this.rootElementRef,widgetRef:this.widgetRef,onFocusIn:this.onFocusIn,cssClasses:this.cssClasses,shouldShowValidationMessage:this.shouldShowValidationMessage,aria:this.aria,validationErrors:this.validationErrors,validationMessageTarget:this.validationMessageTarget,restAttributes:this.restAttributes})}}Bt.defaultProps=Nn;function Wn(e){var t,i=St();return e?(t=i.getComputedStyle)===null||t===void 0?void 0:t.call(i,e):null}var Gn=[[22,16],[18,16]],zn=[[[12,8],[20,18]],[[16,10],[16,14]]];function Lt(){var e=ut();return{isMaterialTheme:B(e),isCompactTheme:_i(e)}}function Kn(){var{isCompactTheme:e,isMaterialTheme:t}=Lt();return Gn[+t][+e]}function jn(e){var{isCompactTheme:t,isMaterialTheme:i}=Lt();return zn[+e][+i][+t]}function Un(e,t){var i=jn(t),n=Kn(),s=i/n;return Math.ceil(s*e)}var qn=["isChecked","size"],Xn=e=>{var{cssStyles:t,elementRef:i}=e;return H(1,"span","dx-checkbox-icon",null,1,{style:fi(t)},null,i)},Yn={isChecked:!1};class Vt extends _t{constructor(t){super(t),this.state={},this.elementRef=W(),this.__getterCache={},this.updateFontSize=this.updateFontSize.bind(this),this.setIconFontSize=this.setIconFontSize.bind(this),this.getIconSize=this.getIconSize.bind(this),this.getComputedIconSize=this.getComputedIconSize.bind(this)}createEffects(){return[new F(this.updateFontSize,[this.props.isChecked,this.props.size])]}updateEffects(){var t;(t=this._effects[0])===null||t===void 0||t.update([this.props.isChecked,this.props.size])}updateFontSize(){var{isChecked:t,size:i}=this.props;if(N()&&i){var n=this.getIconSize(i),s=Un(n,t);this.setIconFontSize(s)}}setIconFontSize(t){var i=this.elementRef.current;i.style.fontSize="".concat(t,"px")}getIconSize(t){return Y(t)?t:t.endsWith("px")?parseInt(t,10):this.getComputedIconSize()}getComputedIconSize(){var t=this.elementRef.current,i=Wn(t),n=parseInt(i==null?void 0:i.width,10);return n}get cssStyles(){return this.__getterCache.cssStyles!==void 0?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{var{size:t}=this.props,i=Be("width",t),n=Be("height",t);return{height:n,width:i}})()}get restAttributes(){var t=this.props,i=V(t,qn);return i}componentWillUpdate(t,i,n){super.componentWillUpdate(),this.props.size!==t.size&&(this.__getterCache.cssStyles=void 0)}render(){var t=this.props;return Xn({props:p({},t),elementRef:this.elementRef,setIconFontSize:this.setIconFontSize,getIconSize:this.getIconSize,getComputedIconSize:this.getComputedIconSize,cssStyles:this.cssStyles,restAttributes:this.restAttributes})}}Vt.defaultProps=Yn;var Qn=["accessKey","activeStateEnabled","aria","className","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationStatus","value","valueChange","visible","width"],Jn=e=>{var{text:t,value:i}=e,n=i,s=n===null,a={"dx-checkbox":!0,"dx-checkbox-checked":n===!0,"dx-checkbox-has-text":!!t,"dx-checkbox-indeterminate":s};return vt(a)},Zn=e=>{var{aria:t,cssClasses:i,editorRef:n,keyDown:s,onWidgetClick:a,props:{accessKey:o,activeStateEnabled:r,className:c,disabled:_,focusStateEnabled:b,height:f,hint:P,hoverStateEnabled:se,iconSize:ae,isValid:oe,name:k,onFocusIn:re,readOnly:le,rtlEnabled:ue,tabIndex:de,text:K,validationError:ce,validationErrors:he,validationMessageMode:pe,validationStatus:M,value:j,visible:$t,width:Ht},restAttributes:Ft}=e;return J(G(2,Bt,p({aria:t,classes:i,onClick:a,onKeyDown:s,accessKey:o,activeStateEnabled:r,focusStateEnabled:b,hoverStateEnabled:se,className:c,disabled:_,readOnly:le,hint:P,height:f,width:Ht,rtlEnabled:ue,tabIndex:de,visible:$t,validationError:ce,validationErrors:he,validationMessageMode:pe,validationStatus:M,isValid:oe,onFocusIn:re},Ft,{children:mt([J(H(64,"input",null,null,1,p({type:"hidden",value:"".concat(j)},k&&{name:k}))),H(1,"div","dx-checkbox-container",[G(2,Vt,{size:ae,isChecked:j===!0}),K&&H(1,"span","dx-checkbox-text",K,0)],0)],4)}),null,n))},v=Object.create(Object.prototype,p(Object.getOwnPropertyDescriptors(m),Object.getOwnPropertyDescriptors({text:"",activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return y.real().deviceType==="desktop"&&!y.isSimulator()},defaultValue:!1,valueChange:()=>{}}))),es={get text(){return v.text},get activeStateEnabled(){return v.activeStateEnabled},get hoverStateEnabled(){return v.hoverStateEnabled},get focusStateEnabled(){return v.focusStateEnabled},get defaultValue(){return v.defaultValue},get valueChange(){return v.valueChange},get readOnly(){return v.readOnly},get name(){return v.name},get validationError(){return v.validationError},get validationErrors(){return v.validationErrors},get validationMessageMode(){return v.validationMessageMode},get validationStatus(){return v.validationStatus},get isValid(){return v.isValid},get className(){return v.className},get disabled(){return v.disabled},get tabIndex(){return v.tabIndex},get visible(){return v.visible},get aria(){return me.aria}};class Z extends gt{constructor(t){super(t),this.editorRef=W(),this.state={value:this.props.value!==void 0?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[Et()]}onWidgetClick(t){var i,{readOnly:n,saveValueChangeEvent:s}=this.props,a=(i=this.props.value!==void 0?this.props.value:this.state.value)!==null&&i!==void 0?i:!1;if(!n){s==null||s(t);var o;this.setState(r=>(o=!a,{value:o})),this.props.valueChange(o)}}keyDown(t){var{onKeyDown:i}=this.props,{keyName:n,originalEvent:s,which:a}=t,o=i==null?void 0:i(t);if(o!=null&&o.cancel)return o;(n==="space"||a==="space")&&(s.preventDefault(),this.onWidgetClick(s))}get cssClasses(){return Jn(p({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}))}get aria(){var t=(this.props.value!==void 0?this.props.value:this.state.value)===!0,i=(this.props.value!==void 0?this.props.value:this.state.value)===null,n={role:"checkbox",checked:i?"mixed":"".concat(t)};return p({},n,this.props.aria)}get restAttributes(){var t=p({},this.props,{value:this.props.value!==void 0?this.props.value:this.state.value}),i=V(t,Qn);return i}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){var t=this.props;return Zn({props:p({},t,{value:this.props.value!==void 0?this.props.value:this.state.value}),editorRef:this.editorRef,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,cssClasses:this.cssClasses,aria:this.aria,restAttributes:this.restAttributes})}}function ts(e){var t=["value"];return Object.keys(e).reduce((i,n)=>{var s=e[n],a=t.some(o=>o===n)?"default"+n.charAt(0).toUpperCase()+n.slice(1):n;return i[a]=s,i},{})}Z.defaultProps=es;var Ye=[];function is(e){Ye.push(e),Z.defaultProps=Object.create(Object.prototype,p(Object.getOwnPropertyDescriptors(Z.defaultProps),Object.getOwnPropertyDescriptors(ts(pi(Ye)))))}class ee extends xn{getProps(){var t=super.getProps();return t.onKeyDown=this._wrapKeyDownHandler(t.onKeyDown),t}focus(){var t;return(t=this.viewRef)===null||t===void 0?void 0:t.focus(...arguments)}blur(){var t;return(t=this.viewRef)===null||t===void 0?void 0:t.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationStatus","isValid","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return Z}}R("dxCheckBox",ee);ee.defaultOptions=is;var ns="dx-dropdowneditor-button",ss="dx-dropdowneditor-button-visible",as="dxDropDownEditor-selectLabel";class os extends ki{constructor(t,i,n){super(t,i,n),this.currentTemplate=null}_attachEvents(t){var{editor:i}=this;t.option("onClick",n=>{!i.option("openOnFieldClick")&&i._openHandler(n)}),u.on(t.$element(),"mousedown",n=>{i.$element().is(".dx-state-focused")&&n.preventDefault()})}_create(){var{editor:t}=this,i=l("<div>"),n=this._getOptions();this._addToContainer(i);var s=t._createComponent(i,ct,d({},n,{elementAttr:{"aria-label":C.format(as)}}));return this._legacyRender(t.$element(),i,n.visible),{$element:i,instance:s}}_getOptions(){var{editor:t}=this,i=this._isVisible(),n=t.option("readOnly"),s={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:n,visible:i};return this._addTemplate(s),s}_isVisible(){var{editor:t}=this;return super._isVisible()&&t.option("showDropDownButton")}_legacyRender(t,i,n){t.toggleClass(ss,n),i&&i.removeClass("dx-button").addClass(ns)}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(t){this._isSameTemplate()||(t.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){var t=super.update();if(t){var{editor:i,instance:n}=this,s=i.$element(),a=this._getOptions();n==null||n.option(a),this._legacyRender(s,n==null?void 0:n.$element(),a.visible)}}}var Qe=function(e){if(N())return vi(e)},rs=function(e){return e===null&&(e=void 0),typeof e=="function"&&(e=e()),e},ls="dx-dropdowneditor",Je="dx-dropdowneditor-input-wrapper",us="dx-dropdowneditor-icon",X="dx-dropdowneditor-overlay",ds="dx-dropdowneditor-overlay-flipped",cs="dx-dropdowneditor-active",hs="dx-dropdowneditor-field-clickable",ps="dx-dropdowneditor-field-template-wrapper",Ze=y.current().platform==="ios",Rt=Mi.inherit({_supportedKeys:function(){return d({},this.callBase(),{tab:function(e){if(!!this.option("opened")){if(this.option("applyValueMode")==="instantly"){this.close();return}var t=e.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();t&&u.trigger(t,"focus"),e.preventDefault()}},escape:function(e){return this.option("opened")&&e.preventDefault(),this.close(),!0},upArrow:function(e){return!Le(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)?(this.close(),!1):!0},downArrow:function(e){return!Le(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)?(this._validatedOpening(),!1):!0},enter:function(e){return this.option("opened")&&(e.preventDefault(),this._valueChangeEventHandler(e)),!0}})},_getDefaultButtons:function(){return this.callBase().concat([{name:"dropDown",Ctor:os}])},_getDefaultOptions:function(){return d(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:C.format("OK"),cancelButtonText:C.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1})},_useTemplates:function(){return!0},_getDefaultPopupPosition:function(e){var t=mi(e);return{offset:{h:0,v:-1},my:t+" top",at:t+" bottom",collision:"flip flip"}},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(e){var t=e.platform==="generic";return t},options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper:function(){return this.$element().find("."+Je).first()},_init:function(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition:function(e){var{my:t,at:i}=this._getDefaultPopupPosition(e),n=this.option("popupPosition");this.option("popupPosition",d({},n,{my:t,at:i}))},_initVisibilityActions:function(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction:function(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup:function(){this._renderSubmitElement(),this.callBase(),this.$element().addClass(ls),this.setAria("role","combobox")},_render:function(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl:function(){this.option("deferRendering")||this._createPopup()},_renderInput:function(){this.callBase(),this._wrapInput(),this._setDefaultAria()},_wrapInput:function(){this._$container=this.$element().wrapInner(l("<div>").addClass(Je)).children().eq(0)},_setDefaultAria:function(){this.setAria({haspopup:"true",autocomplete:"list"})},_readOnlyPropValue:function(){return!this._isEditable()||this.callBase()},_cleanFocusState:function(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate:function(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask:function(){this.option("fieldTemplate")||this.callBase()},_renderField:function(){var e=this._getFieldTemplate();e&&this._renderTemplatedField(e,this._fieldRenderData())},_renderPlaceholder:function(){var e=!!this._getFieldTemplate();e||this.callBase()},_renderValue:function(){this.option("useHiddenSubmitElement")&&this._setSubmitValue();var e=this.callBase();e.always(this._renderField.bind(this))},_renderTemplatedField:function(e,t){var i;this._fieldRenderQueueLength=((i=this._fieldRenderQueueLength)!==null&&i!==void 0?i:0)+1;var n=Ve(this._input()),s=this._$container;this._detachKeyboardEvents(),this._refreshButtonsContainer(),this._detachWrapperContent(),this._detachFocusEvents(),s.empty();var a=l("<div>").addClass(ps).appendTo(s);e.render({model:t,container:O(a),onRendered:()=>{if(this._fieldRenderQueueLength--,this._fieldRenderQueueLength===0){var o=this._input();if(!o.length)throw z.Error("E1010");this._integrateInput(),n&&u.trigger(o,"focus")}}}),this._attachWrapperContent(s)},_detachWrapperContent(){var e,t,i,n=this.option("useHiddenSubmitElement");n&&((e=this._$submitElement)===null||e===void 0||e.detach());var s=(t=this._$beforeButtonsContainer)===null||t===void 0?void 0:t[0].parentNode,a=(i=this._$afterButtonsContainer)===null||i===void 0?void 0:i[0].parentNode;s==null||s.removeChild(this._$beforeButtonsContainer[0]),a==null||a.removeChild(this._$afterButtonsContainer[0])},_attachWrapperContent(e){var t,i=this.option("useHiddenSubmitElement");e.prepend(this._$beforeButtonsContainer),i&&((t=this._$submitElement)===null||t===void 0||t.appendTo(e)),e.append(this._$afterButtonsContainer)},_refreshButtonsContainer(){this._$buttonsContainer=this.$element().children().eq(0)},_integrateInput:function(){this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent()},_refreshEmptinessEvent:function(){u.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData:function(){return this.option("value")},_initTemplates:function(){this._templateManager.addDefaultTemplates({dropDownButton:new gi(function(e){var t=l("<div>").addClass(us);l(e.container).append(t)})}),this.callBase()},_renderOpenHandler:function(){var e=this._inputWrapper(),t=E(te,this.NAME),i=this.option("openOnFieldClick");u.off(e,t),u.on(e,t,this._getInputClickHandler(i)),this.$element().toggleClass(hs,i),i&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler:function(){Ze&&(this._detachFocusOutEvents(),u.on(this._inputWrapper(),E("focusout",this.NAME),e=>{var t=e.relatedTarget,i=this.content?l(this.content()).closest("."+X):this._$popup;if(t&&this.option("opened")){var n=l(t).closest("."+X,i).length===0;n&&this.close()}}))},_detachFocusOutEvents:function(){Ze&&u.off(this._inputWrapper(),E("focusout",this.NAME))},_getInputClickHandler:function(e){return e?t=>{this._executeOpenAction(t)}:t=>{this._focusInput()}},_openHandler:function(){this._toggleOpenState()},_executeOpenAction:function(e){this._openOnFieldClickAction({event:e})},_keyboardEventBindingTarget:function(){return this._input()},_focusInput:function(){return this.option("disabled")?!1:(this.option("focusStateEnabled")&&!Ve(this._input())&&(this._resetCaretPosition(),u.trigger(this._input(),"focus")),!0)},_resetCaretPosition:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this._input().get(0);if(t){var{value:i}=t,n=S(i)&&(e||this._isEditable())?i.length:0;this._caret({start:n,end:n},!0)}},_isEditable:function(){return this.option("acceptCustomValue")},_toggleOpenState:function(e){!this._focusInput()||this.option("readOnly")||(e=arguments.length?e:!this.option("opened"),this.option("opened",e))},_renderOpenedState:function(){var e=this.option("opened");e&&this._createPopup(),this.$element().toggleClass(cs,e),this._setPopupOption("visible",e),this.setAria({expanded:e}),this.setAria("owns",e?this._popupContentId:void 0,this.$element())},_createPopup:function(){this._$popup||(this._$popup=l("<div>").addClass(X).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent())},_renderPopupContent:h,_renderPopup:function(){var e=d(this._popupConfig(),this._options.cache("dropDownOptions"));this._popup=this._createComponent(this._$popup,Ei,e),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_setPopupContentId(e){this._popupContentId="dx-"+new Ee,this.setAria("id",this._popupContentId,e)},_contentReadyHandler:h,_popupConfig:function(){return{onInitialized:this._popupInitializedHandler(),position:d(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>Qe(this.$element()),height:"auto",shading:!1,wrapperAttr:{class:X},hideOnParentScroll:!0,hideOnOutsideClick:e=>this._closeOutsideDropDownHandler(e),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null}},_popupInitializedHandler:function(){return this.option("onPopupInitialized")?e=>{this._popupInitializedAction({popup:e.component})}:null},_dimensionChanged:function(){var e=rs(this.option("dropDownOptions.width"));e===void 0&&this._setPopupOption("width",()=>Qe(this.$element()))},_popupPositionedHandler:function(e){var t,i,{labelMode:n,stylingMode:s}=this.option(),a=this._popup.$overlayContent(),o=(t=e.position)===null||t===void 0||(i=t.v)===null||i===void 0?void 0:i.flip,r=n!=="hidden"&&s==="outlined";if(e.position&&a.toggleClass(ds,o),o&&r&&this._label.isVisible()){var c=this._label.$element();Si(a,{top:Ci(a).top-parseInt(c.css("fontSize"))})}},_popupShowingHandler:h,_popupHidingHandler:function(){this.option("opened",!1)},_popupShownHandler:function(){var e;this._openAction(),(e=this._validationMessage)===null||e===void 0||e.option("positionRequest",this._getValidationMessagePositionRequest())},_popupHiddenHandler:function(){var e;this._closeAction(),(e=this._validationMessage)===null||e===void 0||e.option("positionRequest",this._getValidationMessagePositionRequest())},_getValidationMessagePositionRequest:function(){var e="below";if(this._popup&&this._popup.option("visible")){var{top:t}=Re.setup(this.$element()),{top:i}=Re.setup(this._popup.$content());e=t+this.option("popupPosition").offset.v>i?"below":"above"}return e},_closeOutsideDropDownHandler:function(e){var{target:t}=e,i=l(t),n=this.getButton("dropDown"),s=n&&n.$element(),a=!!i.closest(this.$element()).length,o=!!i.closest(s).length,r=!a&&!o;return r},_clean:function(){delete this._openOnFieldClickAction,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption:function(e,t){this._setWidgetOption("_popup",arguments)},_validatedOpening:function(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems:function(){return this.option("applyValueMode")==="useButtons"?this._popupToolbarItemsConfig():[]},_getFirstPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-done.dx-button")},_getLastPopupElement:function(){return this._popup.$wrapper().find(".dx-popup-cancel.dx-button")},_popupElementTabHandler:function(e){var t=l(e.currentTarget);(e.shiftKey&&t.is(this._getFirstPopupElement())||!e.shiftKey&&t.is(this._getLastPopupElement()))&&(u.trigger(this._input(),"focus"),e.preventDefault())},_popupElementEscHandler:function(){u.trigger(this._input(),"focus"),this.close()},_popupButtonInitializedHandler:function(e){e.component.registerKeyHandler("tab",this._popupElementTabHandler.bind(this)),e.component.registerKeyHandler("escape",this._popupElementEscHandler.bind(this))},_popupToolbarItemsConfig:function(){var e=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText"),onInitialized:this._popupButtonInitializedHandler.bind(this)}}];return this._applyButtonsLocation(e)},_applyButtonsLocation:function(e){var t=this.option("buttonsLocation"),i=e;if(t!=="default"){var n=bi(t);g(i,function(s,a){d(a,{toolbar:n[0],location:n[1]})})}return i},_applyButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler:function(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged:function(e){var t=Ii.getOptionsFromContainer(e);this._setPopupOption(t);var i=Object.keys(t);(i.indexOf("width")!==-1||i.indexOf("height")!==-1)&&this._dimensionChanged()},_renderSubmitElement:function(){this.option("useHiddenSubmitElement")&&(this._$submitElement=l("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue:function(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement:function(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose:function(){this._detachFocusOutEvents(),this.callBase()},_optionChanged:function(e){var t;switch(e.name){case"width":case"height":this.callBase(e),(t=this._popup)===null||t===void 0||t.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":S(e.value)?this._renderField():this._invalidate();break;case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(e),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":N()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(e.value),this.callBase(e);break;default:this.callBase(e)}},open:function(){this.option("opened",!0)},close:function(){this.option("opened",!1)},field:function(){return O(this._input())},content:function(){return this._popup?this._popup.content():null}});R("dxDropDownEditor",Rt);var et=d({},yi,{_dataExpressionDefaultOptions:function(){return{items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}},_initDataExpressions:function(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource:function(){this.option("dataSource")||(this._dataSource=new xi({store:new Ti(this.option("items")),pageSize:0}))},_compileDisplayGetter:function(){this._displayGetter=ve(this._displayGetterExpr())},_displayGetterExpr:function(){return this.option("displayExpr")},_compileValueGetter:function(){this._valueGetter=ve(this._valueGetterExpr())},_valueGetterExpr:function(){return this.option("valueExpr")||"this"},_loadValue:function(e){var t=new I;return e=this._unwrappedValue(e),S(e)?(this._loadSingle(this._valueGetterExpr(),e).done(function(i){this._isValueEquals(this._valueGetter(i),e)?t.resolve(i):t.reject()}.bind(this)).fail(function(){t.reject()}),this._loadValueDeferred=t,t.promise()):t.reject().promise()},_rejectValueLoading:function(){var e;(e=this._loadValueDeferred)===null||e===void 0||e.reject({shouldSkipCallback:!0})},_getCurrentValue:function(){return this.option("value")},_unwrappedValue:function(e){var t;return e=(t=e)!==null&&t!==void 0?t:this._getCurrentValue(),e&&this._dataSource&&this._valueGetterExpr()==="this"&&(e=this._getItemKey(e)),Pe.unwrap(e)},_getItemKey:function(e){var t=this._dataSource.key();if(Array.isArray(t)){for(var i={},n=0,s=t.length;n<s;n++)i[t[n]]=e[t[n]];return i}return t&&typeof e=="object"&&(e=e[t]),e},_isValueEquals:function(e,t){var i=this._dataSource&&this._dataSource.key(),n=this._compareValues(e,t);return!n&&i&&S(e)&&S(t)&&(Array.isArray(i)?n=this._compareByCompositeKey(e,t,i):n=this._compareByKey(e,t,i)),n},_compareByCompositeKey:function(e,t,i){var n=ge;if(!n(e)||!n(t))return!1;for(var s=0,a=i.length;s<a;s++)if(e[i[s]]!==t[i[s]])return!1;return!0},_compareByKey:function(e,t,i){var n=Pe.unwrap,s=L(n(e[i]),e),a=L(n(t[i]),t);return this._compareValues(s,a)},_compareValues:function(e,t){return ke(e,!0)===ke(t,!0)},_initDynamicTemplates:h,_setCollectionWidgetItemTemplate:function(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr:function(){var e=this.option("valueExpr"),t=wi(e)&&e!=="this"||Oi(e);return t?e:null},_dataExpressionOptionChanged:function(e){switch(e.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}}),tt=St(),_s=".dx-list-item",fs="dxListItemData",vs="dx-dropdownlist-popup-wrapper",ms="input",gs=["startswith","contains","endwith","notcontains"],it=y.real().platform!=="android",Pt=Rt.inherit({_supportedKeys:function(){var e=this.callBase();return d({},e,{tab:function(t){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(t);var i=l(this._list.option("focusedElement"));i.length&&this._setSelectedElement(i)}e.tab.apply(this,arguments)},space:h,home:h,end:h})},_allowSelectItemByTab:function(){return this.option("opened")&&this.option("applyValueMode")==="instantly"},_setSelectedElement:function(e){var t=this._valueGetter(this._list._getItemData(e));this._setValue(t)},_setValue:function(e){this.option("value",e)},_getDefaultOptions:function(){return d(this.callBase(),d(et._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:C.format("dxCollectionWidget-noDataText"),onSelectionChanged:null,onItemClick:h,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference:function(){this.callBase(),d(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init:function(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange:function(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems:function(){var e=this.option().items;e&&!e.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions:function(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction:function(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction:function(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction:function(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Ai("item")})},_isEditable:function(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget:function(e){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:function(e,t,i){return e>i?t:e<t?i:e},_items:function(){var e=this._getPlainItems(!this._list&&this._dataSource.items()),t=new ht(e).filter("disabled","<>",!0).toArray();return t},_calcNextItem:function(e){var t=this._items(),i=this._fitIntoRange(this._getSelectedIndex()+e,0,t.length-1);return t[i]},_getSelectedIndex:function(){var e=this._items(),t=this.option("selectedItem"),i=-1;return g(e,function(n,s){if(this._isValueEquals(s,t))return i=n,!1}.bind(this)),i},_createPopup:function(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());var e=this._popup.$content();u.off(e,"mouseup"),u.on(e,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer:function(){var e=this.option("dropDownOptions.container"),t=e&&l(e);if(t&&t.length&&!Di(t.get(0))){var i=[].slice.call(t.parents());i.unshift(t.get(0)),g(i,function(n,s){if(s===l("body").get(0))return!1;if(tt.getComputedStyle(s).overflowY==="hidden")return this._$customBoundaryContainer=l(s),!1}.bind(this))}},_popupWrapperClass:function(){return vs},_renderInputValue:function(){var e=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(e,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,e))},_loadInputValue:function(e,t){return this._loadItem(e).always(t)},_getItemFromPlain:function(e,t){var i,n;return t&&typeof e!="object"&&(t.itemByValue||(t.itemByValue={},i=this._getPlainItems(),i.forEach(function(s){t.itemByValue[this._valueGetter(s)]=s},this)),n=t.itemByValue[e]),n||(i=this._getPlainItems(),n=Bi(i,function(s){return this._isValueEquals(this._valueGetter(s),e)}.bind(this))[0]),n},_loadItem:function(e,t){var i=this._getItemFromPlain(e,t);return i!==void 0?new I().resolve(i).promise():this._loadValue(e)},_getPlainItems:function(e){var t=[];e=e||this.option("items")||this._dataSource.items()||[];for(var i=0;i<e.length;i++)e[i]&&e[i].items?t=t.concat(e[i].items):t.push(e[i]);return t},_updateActiveDescendant(){var e,t=this.option("opened"),i=(e=this._list)===null||e===void 0?void 0:e.getFocusedItemId(),n=l("#".concat(i)).length>0,s=t&&n&&i;this.setAria({activedescendant:s||null})},_setSelectedItem:function(e){var t=this._displayValue(e);this.option("selectedItem",L(e,null)),this.option("displayValue",t)},_displayValue:function(e){return this._displayGetter(e)},_refreshSelected:function(){var e={};this._listItemElements().each(function(t,i){var n=l(i),s=this._valueGetter(n.data(fs)),a=this._isSelectedValue(s,e);a?this._list.selectItem(n):this._list.unselectItem(n)}.bind(this))},_popupShownHandler:function(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy:function(){!this.option("focusStateEnabled")||!this._list||this._list.option("focusedElement",null)},_isSelectedValue:function(e){return this._isValueEquals(e,this.option("value"))},_validateSearchMode:function(){var e=this.option("searchMode"),t=e.toLowerCase();if(!gs.includes(t))throw z.Error("E1019",e)},_clearSelectedItem:function(){this.option("selectedItem",null)},_processDataSourceChanging:function(){this._setListDataSource(),this._renderInputValue().fail(function(){this._isCustomValueAllowed()||this._clearSelectedItem()}.bind(this))},_isCustomValueAllowed:function(){return this.option("displayCustomValue")},reset:function(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements:function(){return this._$list?this._$list.find(_s):l()},_popupConfig:function(){return d(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent:function(){this.callBase(),this._renderList()},_getKeyboardListeners(){var e=this._canListHaveFocus();return this.callBase().concat([!e&&this._list])},_setAriaTargetForList:function(){this._list._getAriaTarget=this._getAriaTarget.bind(this)},_renderList:function(){this._listId="dx-"+new Ee()._value;var e=this._$list=l("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._list=this._createComponent(e,xt,this._listConfig()),this._refreshList(),this._setAriaTargetForList(),this._list.option("_listAttributes",{role:"combobox"}),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick:function(){var e=E("mousedown","dxDropDownList");u.off(this._$list,e),u.on(this._$list,e,t=>t.preventDefault())},_renderOpenedState:function(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria({controls:this._list&&this._listId,owns:this._popup&&this._popupContentId})},_setDefaultAria:function(){this.setAria({haspopup:"listbox",autocomplete:"list"})},_refreshList:function(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource:function(){var e=!!this._list.option("dataSource");return e!==this._needPassDataSourceToList()},_isDesktopDevice:function(){return y.real().deviceType==="desktop"},_listConfig:function(){var e={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),hoverStateEnabled:this._isDesktopDevice()?this.option("hoverStateEnabled"):!1,focusStateEnabled:this._isDesktopDevice()?this.option("focusStateEnabled"):!1};return this._canListHaveFocus()||(e.tabIndex=null),e},_canListHaveFocus:()=>!1,_getDataSource:function(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:function(){return{paginate:!1}},_getGroupedOption:function(){return this.option("grouped")},_dataSourceFromUrlLoadMode:function(){return"raw"},_listContentReadyHandler:function(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._dimensionChanged(),this._contentReadyAction()},_setListOption:function(e,t){this._setWidgetOption("_list",arguments)},_listItemClickAction:function(e){this._listItemClickHandler(e),this._itemClickAction(e)},_listItemClickHandler:h,_setListDataSource:function(){!this._list||(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList:function(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded:function(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter:function(){return this._canKeepDataSource()?!1:this._needPassDataSourceToList()},_canKeepDataSource:function(){var e,t=this._isMinSearchLengthExceeded();return((e=this._dataSource)===null||e===void 0?void 0:e.isLoaded())&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!t&&!this._isLastMinSearchLengthExceeded},_searchValue:function(){return this._input().val()||""},_getSearchEvent:function(){return E(ms,this.NAME+"Search")},_getCompositionStartEvent:function(){return E("compositionstart",this.NAME+"CompositionStart")},_getCompositionEndEvent:function(){return E("compositionend",this.NAME+"CompositionEnd")},_getSetFocusPolicyEvent:function(){return E("input",this.NAME+"FocusPolicy")},_renderEvents:function(){this.callBase(),u.on(this._input(),this._getSetFocusPolicyEvent(),()=>{this._setFocusPolicy()}),this._shouldRenderSearchEvent()&&(u.on(this._input(),this._getSearchEvent(),e=>{this._searchHandler(e)}),it&&(u.on(this._input(),this._getCompositionStartEvent(),()=>{this._isTextCompositionInProgress(!0)}),u.on(this._input(),this._getCompositionEndEvent(),e=>{this._isTextCompositionInProgress(void 0),this._searchHandler(e,this._searchValue())})))},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")},_refreshEvents:function(){u.off(this._input(),this._getSearchEvent()),u.off(this._input(),this._getSetFocusPolicyEvent()),it&&(u.off(this._input(),this._getCompositionStartEvent()),u.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress:function(e){if(arguments.length)this._isTextComposition=e;else return this._isTextComposition},_searchHandler:function(e,t){if(!this._isTextCompositionInProgress()){if(!this._isMinSearchLengthExceeded()){this._searchCanceled();return}var i=this.option("searchTimeout");i?(this._clearSearchTimer(),this._searchTimer=setTimeout(()=>{this._searchDataSource(t)},i)):this._searchDataSource(t)}},_searchCanceled:function(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._searchValue();this._filterDataSource(e)},_filterDataSource:function(e){this._clearSearchTimer();var t=this._dataSource;t&&(t.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),t.searchOperation(this.option("searchMode")),t.searchValue(e),t.load().done(this._dataSourceFiltered.bind(this,e)))},_clearFilter:function(){var e=this._dataSource;e&&e.searchValue()&&e.searchValue(null)},_dataSourceFiltered:function(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup:function(){return this._hasItemsToShow()},_refreshPopupVisibility:function(){if(!(this.option("readOnly")||!this._searchValue())){var e=this._shouldOpenPopup();e&&!this._isFocused()||(this.option("opened",e),e&&this._dimensionChanged())}},_dataSourceChangedHandler:function(e){this._dataSource.pageIndex()===0?this.option().items=e:this.option().items=this.option().items.concat(e)},_hasItemsToShow:function(){var e=this._dataSource&&this._dataSource.items()||[],t=e.length,i=this._needPassDataSourceToList();return!!(i&&t)},_clearSearchTimer:function(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler:function(){this._dimensionChanged()},_dimensionChanged:function(){this.callBase(arguments),this._popup&&this._updatePopupDimensions()},_needPopupRepaint:function(){if(!this._dataSource)return!1;var e=this._dataSource.pageIndex(),t=S(this._pageIndex)&&e<=this._pageIndex||this._dataSource.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=e,t},_updatePopupDimensions:function(){this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions()},_getMaxHeight:function(){var e=this.$element(),t=this._$customBoundaryContainer,i=e.offset().top-(t?t.offset().top:0),n=w(tt),s=t?Math.min(w(t),n):n,a=Math.max(i,s-i-w(e));return Math.min(.5*s,a)},_clean:function(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose:function(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption:function(){this._setListOption.apply(this,arguments)},_setSubmitValue:function(){var e=this.option("value"),t=this._shouldUseDisplayValue(e)?this._displayGetter(e):e;this._getSubmitElement().val(t)},_shouldUseDisplayValue:function(e){return this.option("valueExpr")==="this"&&ge(e)},_optionChanged:function(e){switch(this._dataExpressionOptionChanged(e),e.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(e.name,e.value),this.callBase(e);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"useItemTextAsTitle":this._setListOption(e.name);break;case"displayValue":this.option("text",e.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":e.previousValue!==e.value&&this._selectionChangedAction({selectedItem:e.value});break;default:this.callBase(e)}}}).include(et,Ct);R("dxDropDownList",Pt);var Es="dx-radiobutton",nt="dx-radiobutton-icon",Ss="dx-radiobutton-icon-dot",Cs="dx-radiobutton-checked",bs="dx-radiobutton-icon-checked",kt=Se.inherit({_supportedKeys:function(){return d(this.callBase(),{space:function(e){e.preventDefault(),this._clickAction({event:e})}})},_getDefaultOptions:function(){return d(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:function(){return!0},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return y.real().deviceType==="desktop"&&!y.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this.$element().addClass(Es)},_initMarkup:function(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon:function(){this._$icon=l("<div>").addClass(nt),l("<div>").addClass(Ss).appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState:function(e){this.$element().toggleClass(Cs,e).find("."+nt).toggleClass(bs,e),this.setAria("checked",e)},_renderClick:function(){var e=E(te,this.NAME);this._clickAction=this._createAction(function(t){this._clickHandler(t.event)}.bind(this)),u.off(this.$element(),e),u.on(this.$element(),e,function(t){this._clickAction({event:t})}.bind(this))},_clickHandler:function(e){this._saveValueChangeEvent(e),this.option("value",!0)},_optionChanged:function(e){switch(e.name){case"value":this._renderCheckedState(e.value),this.callBase(e);break;default:this.callBase(e)}}});R("dxRadioButton",kt);var xe="dxListEditDecorator",Is=E(Ce,xe),ys=E(be,xe),xs=E(ie,xe),Ts=pt.inherit({ctor:function(e){this._list=e,this._init()},_init:h,_shouldHandleSwipe:!1,_attachSwipeEvent:function(e){var t={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=rt(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};u.on(e.$itemElement,Is,t,this._itemSwipeStartHandler.bind(this)),u.on(e.$itemElement,ys,this._itemSwipeUpdateHandler.bind(this)),u.on(e.$itemElement,xs,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler:function(e){var t=l(e.currentTarget);if(t.is(".dx-state-disabled, .dx-state-disabled *")){e.cancel=!0;return}clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(t,e)},_itemSwipeUpdateHandler:function(e){var t=l(e.currentTarget);this._swipeUpdateHandler(t,e)},_itemSwipeEndHandler:function(e){var t=l(e.currentTarget);this._swipeEndHandler(t,e),this._clearSwipeCache=!0},beforeBag:h,afterBag:h,_commonOptions:function(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement:function(e){this._shouldHandleSwipe&&(this._attachSwipeEvent(e),this._clearSwipeCache=!0)},afterRender:h,handleClick:h,handleKeyboardEvents:h,handleEnterPressing:h,handleContextMenu:h,_swipeStartHandler:h,_swipeUpdateHandler:h,_swipeEndHandler:h,visibilityChange:h,getExcludedSelectors:h,dispose:h}),st="dx-list-select-decorator-enabled",ws="dx-list-select-all",Os="dx-list-select-all-checkbox",As="dx-list-select-all-label",Ds="dx-list-select-checkbox-container",Bs="dx-list-select-checkbox",Ls="dx-list-select-radiobutton-container",Vs="dx-list-select-radiobutton",Rs="dx-state-focused",at=E(te,"dxListEditDecorator");hn("selection","default",Ts.inherit({_init:function(){this.callBase.apply(this,arguments);var e=this._list.option("selectionMode");this._singleStrategy=e==="single",this._containerClass=this._singleStrategy?Ls:Ds,this._controlClass=this._singleStrategy?Vs:Bs,this._controlWidget=this._singleStrategy?kt:ee,this._list.$element().addClass(st)},beforeBag:function(e){var t=e.$itemElement,i=e.$container.addClass(this._containerClass),n=l("<div>").addClass(this._controlClass).appendTo(i);new this._controlWidget(n,d(this._commonOptions(),{value:this._isSelected(t),focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(s){s.event&&this._list._saveSelectionChangeEvent(s.event),this._processCheckedState(t,s.value),s.event&&s.event.stopPropagation()}.bind(this)}))},modifyElement:function(e){this.callBase.apply(this,arguments);var t=e.$itemElement,i=this._controlWidget.getInstance(t.find("."+this._controlClass));u.on(t,"stateChanged",function(n,s){i.option("value",s)}.bind(this))},_updateSelectAllState:function(){!this._$selectAll||this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender:function(){this._list.option("selectionMode")==="all"&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents:function(e,t){var i=!t,n=this._list,s=this._$selectAll,a=n._getLastItemIndex(),o=t&&e===0||i&&e===a,r=!!s;return r&&o?(n.option("focusedElement",s),n.scrollToItem(n.option("focusedElement")),!0):!1},handleEnterPressing:function(e){if(this._$selectAll&&this._$selectAll.hasClass(Rs))return e.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(e),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll:function(){var e=this._$selectAll=l("<div>").addClass(ws),t=this._list,i=t._supportedKeys().downArrow.bind(t);this._selectAllCheckBox=t._createComponent(l("<div>").addClass(Os).appendTo(e),ee,{focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",i),l("<div>").addClass(As).text(this._list.option("selectAllText")).appendTo(e),this._list.itemsContainer().prepend(e),this._updateSelectAllState(),this._attachSelectAllHandler()},_attachSelectAllHandler:function(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),u.off(this._$selectAll,at),u.on(this._$selectAll,at,this._selectAllClickHandler.bind(this))},_selectAllHandler:function(e){e.event&&e.event.stopPropagation();var t=this._selectAllCheckBox.option("value");e.event&&this._list._saveSelectionChangeEvent(e.event),t===!0?this._selectAllItems():t===!1&&this._unselectAllItems(),this._list._createActionByOption("onSelectAllValueChanged")({value:t})},_checkSelectAllCapability:function(){var e=this._list,t=e.getDataSource();return e.option("selectAllMode")==="allPages"&&e.option("grouped")&&(!t||!t.group())?(z.log("W1010"),!1):!0},_selectAllItems:function(){!this._checkSelectAllCapability()||this._list._selection.selectAll(this._list.option("selectAllMode")==="page")},_unselectAllItems:function(){!this._checkSelectAllCapability()||this._list._selection.deselectAll(this._list.option("selectAllMode")==="page")},_selectAllClickHandler:function(e){this._list._saveSelectionChangeEvent(e),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected:function(e){return this._list.isItemSelected(e)},_processCheckedState:function(e,t){t?this._list.selectItem(e):this._list.unselectItem(e)},dispose:function(){this._disposeSelectAll(),this._list.$element().removeClass(st),this.callBase.apply(this,arguments)},_disposeSelectAll:function(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));var Ps=".dx-state-disabled",ks="dx-selectbox",Ms="dx-selectbox-popup",$s="dx-selectbox-container",ot="dx-selectbox-popup-wrapper",Mt=Pt.inherit({_supportedKeys:function(){var e=this,t=this.callBase(),i=function(s){var a=this._isEditable();a?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(s.preventDefault(),this.reset()),this._savedTextRemoveEvent=s,this._preventSubstitution=!0},n=function(){e.option("searchEnabled")&&e._valueSubstituted()&&e._searchHandler()};return d({},t,{tab:function(){this.option("opened")&&this.option("applyValueMode")==="instantly"&&this._resetCaretPosition(!0),t.tab&&t.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow:function(s){if(t.upArrow&&t.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(s),!0},downArrow:function(s){if(t.downArrow&&t.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(s),!0},leftArrow:function(){n(),t.leftArrow&&t.leftArrow.apply(this,arguments)},rightArrow:function(){n(),t.rightArrow&&t.rightArrow.apply(this,arguments)},home:function(){n(),t.home&&t.home.apply(this,arguments)},end:function(){n(),t.end&&t.end.apply(this,arguments)},escape:function(){var s=t.escape&&t.escape.apply(this,arguments);return this._cancelEditing(),s!=null?s:!0},enter:function(s){var a=this.option("opened"),o=this._input().val().trim(),r=o&&this._list&&!this._list.option("focusedElement");if(!o&&S(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(s),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return s.preventDefault(),r&&(a&&this._toggleOpenState(),this._valueChangeEventHandler(s)),a;if(t.enter&&t.enter.apply(this,arguments))return a}},space:function(s){var a=this.option("opened"),o=this.option("searchEnabled"),r=this.option("acceptCustomValue");if(!(!a||o||r))return s.preventDefault(),this._valueChangeEventHandler(s),!0},backspace:i,del:i})},_getDefaultOptions:function(){return d(this.callBase(),{placeholder:C.format("Select"),fieldTemplate:null,valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating:function(e){S(e.customItem)||(e.customItem=e.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init:function(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup:function(){this.$element().addClass(ks),this._renderTooltip(),this.callBase(),this._$container.addClass($s)},_createPopup:function(){this.callBase(),this._popup.$element().addClass(Ms),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass:function(){return this.callBase()+" "+ot},_cancelEditing:function(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState:function(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement:function(){var e,t=this._searchValue();if(!t){this._focusListElement(null);return}var{items:i,selectedItem:n}=this.option(),s=this._list._itemElements(),a=(e=i==null?void 0:i.indexOf(n))!==null&&e!==void 0?e:-1,o=a!==-1&&!this._isCustomItemSelected()?s.eq(a):null;this._focusListElement(o)},_renderFocusedElement:function(){if(!!this._list){var e=this._searchValue();if(!e||this.option("acceptCustomValue")){this._focusListElement(null);return}var t=this._list._itemElements(),i=t.not(Ps).eq(0);this._focusListElement(i)}},_focusListElement:function(e){this._preventInputValueRender=!0,this._list.option("focusedElement",O(e)),delete this._preventInputValueRender},_scrollToSelectedItem:function(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler:function(){this.callBase();var e=this._dataSource&&this._dataSource.paginate();e&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue:function(){return this._renderInputValue(),this._setSubmitValue(),new I().resolve()},_renderInputValue:function(){return this.callBase().always(function(){this._renderInputValueAsync()}.bind(this))},_renderInputValueAsync:function(){this._renderTooltip(),this._renderInputValueImpl().always(function(){this._refreshSelected()}.bind(this))},_renderInputValueImpl:function(){return this._renderField(),new I().resolve()},_setNextItem:function(e){var t=this._calcNextItem(e),i=this._valueGetter(t);this._setValue(i)},_setNextValue:function(e){var t=this._dataSource.isLoaded()?new I().resolve():this._dataSource.load();t.done(function(){var i=this._getSelectedIndex(),n=this._dataSource.pageSize(),s=this._dataSource.isLastPage(),a=i===this._items().length-1;this._saveValueChangeEvent(e);var o=Li(e)==="downArrow"?1:-1;n&&!s&&a&&o>0?(this._popup||this._createPopup(),this._dataSource.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,o))):this._setNextItem(o)}.bind(this))},_setSelectedItem:function(e){var t=!this._isCustomValueAllowed()&&e===void 0;this.callBase(t?null:e),!t&&(!this._isEditable()||this._isCustomItemSelected())&&this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed:function(){return this.option("acceptCustomValue")||this.callBase()},_displayValue:function(e){return e=!S(e)&&this._isCustomValueAllowed()?this.option("value"):e,this.callBase(e)},_listConfig:function(){var e=d(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&d(e,{showSelectionControls:!0,selectionByClick:!0}),e},_listFocusedItemChangeHandler:function(e){if(!this._preventInputValueRender){var t=e.component,i=l(t.option("focusedElement")),n=t._getItemData(i);this._updateField(n)}},_updateField:function(e){var t=this._getTemplateByOption("fieldTemplate");if(!(t&&this.option("fieldTemplate"))){var i=this._displayGetter(e);this.option("text",i),this._renderDisplayText(i);return}this._renderField()},_getSelectionChangeHandler:function(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):h},_selectionChangeHandler:function(e){g(e.addedItems||[],function(t,i){this._setValue(this._valueGetter(i))}.bind(this))},_getActualSearchValue:function(){return this._dataSource.searchValue()},_toggleOpenState:function(e){if(!this.option("disabled")){if(e=arguments.length?e:!this.option("opened"),!e&&!this._shouldClearFilter()&&this._restoreInputText(!0),this._wasSearch()&&e){this._wasSearch(!1);var t=this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded();if(t&&this._dataSource){if(this._searchTimer)return;var i=this._getActualSearchValue();i&&this._wasSearch(!0),this._filterDataSource(i||null)}else this._setListOption("items",[])}e&&this._scrollToSelectedItem(),this.callBase(e)}},_renderTooltip:function(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions:function(){this.callBase(),this._dimensionChanged()},_isValueEqualInputText:function(){var e=this.option("selectedItem");if(e===null)return!1;var t=this._displayGetter(e),i=t?String(t):"",n=this._searchValue();return i===n},_popupHidingHandler:function(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler:function(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText:function(e){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always(function(){var{selectedItem:t,text:i}=this.option();if(this.option("acceptCustomValue")){e||(this._updateField(t!=null?t:this._createCustomItem(i)),this._clearFilter());return}if(this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")){this._clearTextValue();return}this._isValueEqualInputText()||this._renderInputValue().always(function(n){var s=L(n,t);this._setSelectedItem(s),this._updateField(s),this._clearFilter()}.bind(this))}.bind(this))},_focusOutHandler:function(e){if(!this._preventNestedFocusEvent(e)){var t=this._isOverlayNestedTarget(e.relatedTarget);t||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(e)}e.target=this._input().get(0),this.callBase(e)},_cancelSearchIfNeed:function(e){var{searchEnabled:t}=this.option(),i=this._isOverlayNestedTarget(e==null?void 0:e.relatedTarget),n=this._wasSearch()&&t&&!i;if(n){var s,a=(s=this._popup)===null||s===void 0?void 0:s._hideAnimationProcessing;this._clearSearchTimer(),a?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch:function(e){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=e},_isOverlayNestedTarget:function(e){return!!l(e).closest(".".concat(ot)).length},_clearTextValue:function(){this.option("selectedItem")&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup:function(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused:function(){var e=lt.getActiveElement();return this.callBase()&&l(e).closest(this._input()).length>0},_renderValueChangeEvent:function(){this._isEditable()&&this.callBase()},_fieldRenderData:function(){var e=this._list&&this.option("opened")&&l(this._list.option("focusedElement"));return e&&e.length?this._list._getItemData(e):this.option("selectedItem")},_isSelectedValue:function(e){return this._isValueEquals(e,this.option("value"))},_shouldCloseOnItemClick:function(){return!(this.option("showSelectionControls")&&this.option("selectionMode")!=="single")},_listItemClickHandler:function(e){var t=this._getCurrentValue();this._focusListElement(l(e.itemElement)),this._saveValueChangeEvent(e.event),this._completeSelection(this._valueGetter(e.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&t===this._valueGetter(e.itemData)&&this._updateField(e.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter:function(){return this._wasSearch()},_completeSelection:function(e){this._setValue(e)},_loadItem:function(e,t){var i=this,n=new I;return this.callBase(e,t).done(function(s){n.resolve(s)}.bind(this)).fail(function(s){if(!(s!=null&&s.shouldSkipCallback)){var a=i.option("selectedItem");i.option("acceptCustomValue")&&e===i._valueGetter(a)?n.resolve(a):n.reject()}}.bind(this)),n.promise()},_loadInputValue:function(e,t){return this._loadItemDeferred=this._loadItem(e).always(t),this._loadItemDeferred},_isCustomItemSelected:function(){var e=this.option("selectedItem"),t=this._searchValue(),i=this._displayGetter(e);return!i||t!==i.toString()},_valueChangeEventHandler:function(e){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(e),this._isValueChanging=!1)},_initCustomItemCreatingAction:function(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem:function(e){var t={text:e},i=this._customItemCreatingAction(t),n=L(i,t.customItem);return S(i)&&Me.log("W0015","onCustomItemCreating","customItem"),n},_customItemAddedHandler:function(e){var t=this._searchValue(),i=this._createCustomItem(t);if(this._saveValueChangeEvent(e),i===void 0)throw this._renderValue(),Me.Error("E0121");Vi(i)?Ri(i).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(i)},_setCustomItem:function(e){this._disposed||(e=e||null,this.option("selectedItem",e),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(e)),this._renderDisplayText(this._displayGetter(e)))},_clearValueHandler:function(e){return this._preventFiltering=!0,this.callBase(e),this._searchCanceled(),!1},_wasSearch:function(e){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=e},_searchHandler:function(){if(this._preventFiltering){delete this._preventFiltering;return}this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments)},_dataSourceFiltered:function(e){this.callBase(),e!==null&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted:function(){var e=this._input().get(0),t=this._searchValue().length,i=e.selectionStart===0&&e.selectionEnd===t,n=e.selectionStart!==e.selectionEnd,s=t===e.selectionEnd;return this._wasSearch()&&n&&!i&&s&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered:function(){return!this._preventSubstitution&&this.option("searchEnabled")&&!this.option("acceptCustomValue")&&this.option("searchMode")==="startswith"},_renderInputSubstitution:function(){if(!this._shouldSubstitutionBeRendered()){delete this._preventSubstitution;return}var e=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!!e){var t=this._input(),i=t.val().length;if(i!==0){var n=t.get(0),s=this._displayGetter(e).toString();n.value=s,this._caret({start:i,end:s.length})}}},_dispose:function(){this._renderInputValueAsync=h,delete this._loadItemDeferred,this.callBase()},_optionChanged:function(e){switch(e.name){case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(e)}}});R("dxSelectBox",Mt);const Ns=Object.freeze(Object.defineProperty({__proto__:null,default:Mt},Symbol.toStringTag,{value:"Module"}));export{ee as C,Rt as D,m as E,bt as L,Ce as S,xt as a,be as b,ie as c,Mt as d,Ui as e,Wn as f,rs as g,At as h,Qe as i,Ns as j,et as k,He as s};
