var oe=Object.defineProperty;var se=(l,s,o)=>s in l?oe(l,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[s]=o;var C=(l,s,o)=>(se(l,typeof s!="symbol"?s+"":s,o),o);import{d as ie,u as le,c as ce,r as i,e as ue,f as de,o as re,g as h,h as L,i as n,t as E,x as r,y as f,m as Y,k as g,n as w,j as b,F as me,p as _e,q as pe,B as Ce,s as Ee}from"./index.a3c5a5ee.js";import{_ as fe}from"./BaseGrid.e652126b.js";import{B as ve}from"./BaseInput.9f8543fa.js";import Te from"./BasePopupDelete.b52e37da.js";import{B as Ie}from"./BaseTextArea.05bfe592.js";import{C as v}from"./ColumnDataGrid.23bec9a2.js";import{C as V}from"./comments-service.768ee57a.js";import{L as he}from"./list-status.a9bf9ad2.js";import"./select_box.05db16a2.js";import"./text_box.c18f19ed.js";import"./popover.51293f7e.js";import"./number_box.546ccd32.js";import"./draggable.1b572f7d.js";class G{constructor(s="",o="",u="",T=0,_=new Date){C(this,"id");C(this,"name");C(this,"content");C(this,"status");C(this,"creationTime");this.id=s,this.name=o,this.content=u,this.status=T,this.creationTime=_}}const ge=l=>(_e("data-v-5cd9d2c9"),l=l(),pe(),l),Ae={key:0,class:"container"},Se={class:"d-flex justify-content-between align-items-center mb-3"},we={class:"title"},Ve={class:"grid-comment"},Ne={class:"d-flex align-items-center"},Oe={class:"d-flex align-items-center"},Pe={class:"mr-2"},ye={key:1,class:"container comment-container"},De={class:"title mb-4"},Le={class:"card"},ke={class:"mb-3 row w-100"},Re={class:"w-30"},xe={class:"flex1 profile-input"},Ue={class:"mb-3 row w-100"},Me={class:"w-30"},Be={class:"flex1 profile-input"},$e={class:"mb-3 row w-100"},Ke=ge(()=>n("div",{class:"w-30"},null,-1)),Ye={class:"flex1 profile-input"},be=["innerHTML"],Ge={class:"row justify-content-end mt-3"},ze=ie({__name:"Comments",setup(l){const s=le(),{t:o}=ce(),u=new Ce;let T=i(1),_=i(25),k=i(0);const R=ue(()=>({SkipCount:(T.value-1)*_.value,MaxResultCount:_.value})),x=i(new Array);let U=i([]),N=i(!1);const je={symbol:{VITE_BASE_URL:"https://api.like1.online",VITE_CLIENT_ID:"admin_autofarmer",VITE_CLIENT_SECRET:"K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",VITE_ORIGIN_AGENCY:"auto",VITE_VIETQR_URL:"https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",VITE_VIETQR_TEMPLATE:"SquX4mZ",VITE_LINK_APP_DESKTOP:"https://shorturl.at/akrZ5",VITE_LINK_APP_MOBILE:"https://shorturl.at/lzIOY",VITE_SITE_KEY:"6LeElsojAAAAAFM3pM6lp0GYtpITw_6x2bzj4L8W",VITE_IS_USE_RECAPTCHA:"true",VITE_TIMEOUT_TRANSACTON:"5000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APPROVE_AGENCY_SYMBOL,ip:{VITE_BASE_URL:"https://api.like1.online",VITE_CLIENT_ID:"admin_autofarmer",VITE_CLIENT_SECRET:"K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",VITE_ORIGIN_AGENCY:"auto",VITE_VIETQR_URL:"https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",VITE_VIETQR_TEMPLATE:"SquX4mZ",VITE_LINK_APP_DESKTOP:"https://shorturl.at/akrZ5",VITE_LINK_APP_MOBILE:"https://shorturl.at/lzIOY",VITE_SITE_KEY:"6LeElsojAAAAAFM3pM6lp0GYtpITw_6x2bzj4L8W",VITE_IS_USE_RECAPTCHA:"true",VITE_TIMEOUT_TRANSACTON:"5000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APPROVE_AGENCY_IP},m=i(!1),I=i(!1),A=i(!1),c=i(new G),O=i(!1),P=i(!1),z=de(he);re(()=>{j(),p()});function j(){x.value=[new v("#","Index","60px"),new v(o("Comment.Name"),"name","20%"),new v(o("Comment.Content"),"content","30%","custom"),new v(o("Comment.Status"),"StatusDisplay","20%"),new v(o("Comment.CreatedDate"),"creationTime","auto","","center",!1,"","","date","dd/MM/yyyy HH:mm:ss"),new v(o("Comment.Action"),"action","200px","custom","center",!0,"right")]}async function S(e=""){return await(s==null?void 0:s.recaptchaLoaded()),await(s==null?void 0:s.executeRecaptcha(e))}async function q(){const e=new URLSearchParams;return e.append("SkipCount",R.value.SkipCount.toString()),e.append("MaxResultCount",R.value.MaxResultCount.toString()),{headers:{captcha:await S("GetComment")},params:e}}async function p(){N.value=!0;try{const e=await q(),a=await V.getPaging(e);if(a&&a.data){const t=a.data;k.value=t.totalCount,t.items.forEach((D,ne)=>{var K;D.Index=ne+1,D.StatusDisplay=o((K=z.find(ae=>ae.ID==D.status))==null?void 0:K.ResourceKey)}),U.value=t.items}}catch(e){u.showToastError(e==null?void 0:e.message)}setTimeout(()=>{N.value=!1},50)}function F(e){_.value=e,p()}function H(e){T.value=e,p()}function W(){c.value=new G,I.value=!0}function M(){const e=c.value.content.split(`
`);return(e==null?void 0:e.length)<20?(u.showToastWarning(o("CommentWarning")),!1):!0}async function Q(){if(!M())return;m.value=!0;const t={headers:{captcha:await S("AddComment")}},d=await V.create(c.value,t);d&&(d.data||d.id)?(u.showToastSuccess(o("AddCommentSuccess")),y(),p()):u.showToastError(o("AddCommentFail")),m.value=!1}async function Z(){if(!M())return;m.value=!0;const t={headers:{captcha:await S("UpdateComment")}},d=await V.update(c.value.id,c.value,t);d&&(d.data||d.id)?(u.showToastSuccess(o("UpdateCommentSuccess")),y(),p()):u.showToastError(o("UpdateCommentFail")),m.value=!1}function y(){I.value=!1,A.value=!1}function B(e,a){!e||!a||(c.value[a]=e)}function X(e){setTimeout(()=>{e.component.focus()},0)}function J(e){c.value=e,I.value=!0,A.value=!0}function ee(e){!e||(c.value=e,O.value=!0)}function $(){P.value=!1,O.value=!1}async function te(){P.value=!0;const a={headers:{captcha:await S("DeleteComment")}},t=await V.delete(c.value.id,a);t&&t.data?(u.showToastSuccess("Delete User Success!"),p()):u.showToastError("Delete User Error!"),$()}return(e,a)=>(h(),L(me,null,[I.value?w("",!0):(h(),L("div",Ae,[n("div",Se,[n("div",we,E(e.$t("ListComment")),1),r(f,{icon:"add",text:e.$t("AddComment"),loading:m.value,onOnClick:W},null,8,["text","loading"])]),n("div",Ve,[r(fe,{loading:g(N),dataSource:g(U),columns:x.value,total:g(k),pageIndex:g(T),pageSize:g(_),width:"100%",height:"calc(100vh - 212px)",onChangePageSize:F,onChangePageIndex:H},{content:Y(({data:t})=>[n("div",Ne,[n("pre",null,E(t.value),1)])]),action:Y(({data:t})=>[n("div",Oe,[n("div",Pe,[r(f,{text:e.$t("Detail"),onOnClick:d=>J(t.data)},null,8,["text","onOnClick"])]),n("div",null,[r(f,{text:e.$t("Delete"),type:"danger","styling-mode":"contained",class:"mr-2",onOnClick:d=>ee(t.data)},null,8,["text","onOnClick"])])])]),_:1},8,["loading","dataSource","columns","total","pageIndex","pageSize"])])])),I.value?(h(),L("div",ye,[n("div",De,E(e.$t("CommentDetail")),1),n("div",Le,[n("div",ke,[n("div",Re,[n("span",null,E(e.$t("CommentName")),1)]),n("div",xe,[r(ve,{placeholder:"Enter comment name",value:c.value.name,onOnContentReady:X,onOnValueChanged:a[0]||(a[0]=t=>B(t,"name"))},null,8,["value"])])]),n("div",Ue,[n("div",Me,[n("span",null,E(e.$t("Content")),1)]),n("div",Be,[r(Ie,{placeholder:"Enter comment list",height:"400px",value:c.value.content,onOnValueChanged:a[1]||(a[1]=t=>B(t,"content"))},null,8,["value"])])]),n("div",$e,[Ke,n("div",Ye,[n("h2",null,E(e.$t("Note")),1),n("div",{innerHTML:e.$t("CommentNote")},null,8,be)])]),n("div",Ge,[r(f,{class:"mr-2",text:e.$t("Cancel"),type:"normal","styling-mode":"outlined",onClick:a[2]||(a[2]=t=>y(t))},null,8,["text"]),A.value?(h(),b(f,{key:0,class:"mr-2",text:e.$t("Update"),type:"default","styling-mode":"contained",loading:m.value,onClick:a[3]||(a[3]=t=>Z(t))},null,8,["text","loading"])):w("",!0),A.value?w("",!0):(h(),b(f,{key:1,icon:"add",text:e.$t("AddComment"),type:"default","styling-mode":"contained",loading:m.value,onClick:a[4]||(a[4]=t=>Q(t))},null,8,["text","loading"]))])])])):w("",!0),r(Te,{isVisible:O.value,loading:P.value,onClosePopup:$,onOnDelete:te},null,8,["isVisible","loading"])],64))}});const it=Ee(ze,[["__scopeId","data-v-5cd9d2c9"]]);export{it as default};
