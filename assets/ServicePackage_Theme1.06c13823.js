import{d as te,u as ne,b as se,c as oe,r as n,e as ie,f as E,w as le,o as re,g as K,h as ce,i as r,t as ue,x as S,k as _,m as pe,j as de,y as _e,n as Ie,F as Te,p as Ye,q as Ge,B as Ee,s as me}from"./index.a3c5a5ee.js";import{_ as ve}from"./BaseGrid.e652126b.js";import"./BaseInput.9f8543fa.js";import"./BaseNumberBox2.a0cd7526.js";import Y from"./BaseSelectBox.e7e590d5.js";import fe from"./BasePopupDelete.b52e37da.js";import{C as i}from"./ColumnDataGrid.23bec9a2.js";import{L as Se,a as ge,b as he,O as G}from"./order-service.5ecf97c1.js";import{L as Ce}from"./list-status.a9bf9ad2.js";import{L as Ae}from"./list-application.74b2f8af.js";import"./select_box.05db16a2.js";import"./text_box.c18f19ed.js";import"./popover.51293f7e.js";import"./number_box.546ccd32.js";import"./draggable.1b572f7d.js";const Oe={class:"container"},ye={class:"d-flex justify-content-between align-items-center mb-3"},Ne={class:"title"},De={class:"d-flex"},Pe={class:"mr-2"},Ve={class:"grid-service-package mt-3"},Le={class:"d-flex align-items-center"},we=te({__name:"ServicePackage_Theme1",setup(Re){const u=ne(),z=se(),{t:o}=oe(),P=new Ee;let g=n(1),m=n(25),V=n(0);const $=ie(()=>{var e,a,s;return{Application:((e=w.value)==null?void 0:e.ID)||0,Status:(a=v.value)==null?void 0:a.ID,ServiceType:(s=O.value)==null?void 0:s.ID,SkipCount:(g.value-1)*m.value,MaxResultCount:m.value}}),L=n(new Array);let h=n([]),C=n(!1);const xe={symbol:{VITE_BASE_URL:"https://api.like1.online",VITE_CLIENT_ID:"admin_autofarmer",VITE_CLIENT_SECRET:"K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",VITE_ORIGIN_AGENCY:"auto",VITE_VIETQR_URL:"https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",VITE_VIETQR_TEMPLATE:"SquX4mZ",VITE_LINK_APP_DESKTOP:"https://shorturl.at/akrZ5",VITE_LINK_APP_MOBILE:"https://shorturl.at/lzIOY",VITE_SITE_KEY:"6LeElsojAAAAAFM3pM6lp0GYtpITw_6x2bzj4L8W",VITE_IS_USE_RECAPTCHA:"true",VITE_TIMEOUT_TRANSACTON:"5000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APPROVE_AGENCY_SYMBOL,ip:{VITE_BASE_URL:"https://api.like1.online",VITE_CLIENT_ID:"admin_autofarmer",VITE_CLIENT_SECRET:"K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",VITE_ORIGIN_AGENCY:"auto",VITE_VIETQR_URL:"https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",VITE_VIETQR_TEMPLATE:"SquX4mZ",VITE_LINK_APP_DESKTOP:"https://shorturl.at/akrZ5",VITE_LINK_APP_MOBILE:"https://shorturl.at/lzIOY",VITE_SITE_KEY:"6LeElsojAAAAAFM3pM6lp0GYtpITw_6x2bzj4L8W",VITE_IS_USE_RECAPTCHA:"true",VITE_TIMEOUT_TRANSACTON:"5000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APPROVE_AGENCY_IP},ke=n(!1),Ue=n(!1),Me=n(!1),A=E(Ae),I=E(Se),q=E(ge),p=n([]),w=n(A[0]),O=n(I[0]),v=n({}),Be=n(!1),W=E(he),y=n(!1),N=n(!1);let R="";le(()=>z.path,async e=>{w.value=A.find(a=>a.Path==e),d()},{immediate:!0}),re(()=>{j()});async function x(e=""){return await(u==null?void 0:u.recaptchaLoaded()),await(u==null?void 0:u.executeRecaptcha(e))}function j(){p.value=E(Ce),p.value.forEach(e=>{e.StatusDisplay=o(e.ResourceKey)}),v.value=p.value[1],L.value=[new i("#","Index","60px"),new i(o("Order.Code"),"code"),new i(o("Order.UrlService"),"urlService","320px"),new i(o("Order.Quantity"),"quantity","auto","","left",!1,"","","number","#,##0.##"),new i(o("Order.Completed"),"completedQuantity","auto","","left",!1,"","","number","#,##0.##"),new i(o("Order.Speed"),"SpeedDisplay"),new i(o("Order.Warranty"),"WarrantyDisplay"),new i(o("Order.Total"),"price","120px","","left",!1,"","","number","#,##0.## \u0111"),new i(o("Order.CreatedDate"),"creationTime","auto","","center",!1,"","","date","dd/MM/yyyy HH:mm:ss"),new i(o("Order.Action"),"action","125px","custom","center",!0,"right")]}function Q(e){const a=new URLSearchParams;return a.append("application",e.Application),a.append("status",e.Status),a.append("serviceType",e.ServiceType),a.append("skipCount",e.SkipCount),a.append("maxResultCount",e.MaxResultCount),a}async function d(){C.value=!0,h.value=[];const e=await x("GetOrder"),s={params:Q($.value),headers:{captcha:e}},f=await G.getPaging(s);if(f&&f.data){const D=f.data;V.value=D.totalCount,D.items.forEach((t,ae)=>{var U,M,B,b;t.Index=ae+1,t.Fullname=(t.user.surName||"")+" "+(t.user.name||""),(t.user.name?t.user.name+" - ":"")+t.user.phoneNumber,t.ApplicationDisplay=((U=A.find(c=>{var l,T;return c.ID==((T=(l=t.service)==null?void 0:l.service)==null?void 0:T.application)}))==null?void 0:U.Name)||"",t.ServiceTypeDisplay=((M=I.find(c=>{var l,T;return c.ID==((T=(l=t.service)==null?void 0:l.service)==null?void 0:T.serviceType)}))==null?void 0:M.Name)||"",t.speed&&(t.SpeedDisplay=((B=W.find(c=>{var l;return c.ID==((l=t.speed)==null?void 0:l.type)}))==null?void 0:B.Name)||""),t.warranty&&(t.WarrantyDisplay=t.warranty.time+" "+((b=q.find(c=>c.ID==t.warranty.timeUnit))==null?void 0:b.Name)||"")}),h.value=D.items}setTimeout(()=>{C.value=!1},50)}function F(e){m.value=e,d()}function H(e){g.value=e,d()}function Z(e){O.value=I.find(a=>a.ID==e)||I[0],d()}function X(e){v.value=p.value.find(a=>a.ID==e)||p.value[0],d()}function J(e){!e||(R=e.id,y.value=!0)}function k(){N.value=!1,y.value=!1}async function ee(){N.value=!0;const a={headers:{captcha:await x("CancelOrder")}},s=await G.cancelOrder(R,null,a);s&&s.data?(P.showToastSuccess("Cancel Order Success!"),d()):(console.log(s),P.showToastError("Cancel Order Error!")),k()}return(e,a)=>(K(),ce(Te,null,[r("div",Oe,[r("div",ye,[r("div",Ne,ue(e.$t("ServicePackageList")),1)]),r("div",De,[r("div",Pe,[S(Y,{width:"200px",keyID:"ID",display:"Name",dataSource:_(I),value:O.value.ID,searchEnabled:!1,onOnValueChanged:a[0]||(a[0]=s=>Z(s))},null,8,["dataSource","value"])]),r("div",null,[S(Y,{width:"200px",keyID:"ID",display:"StatusDisplay",dataSource:p.value,value:v.value.ID,searchEnabled:!1,onOnValueChanged:a[1]||(a[1]=s=>X(s))},null,8,["dataSource","value"])])]),r("div",Ve,[S(ve,{loading:_(C),dataSource:_(h),columns:L.value,total:_(V),pageIndex:_(g),pageSize:_(m),width:"100%",height:"calc(100vh - 261px)",onChangePageSize:F,onChangePageIndex:H},{action:pe(({data:s})=>[r("div",Le,[s.data.status==1?(K(),de(_e,{key:0,width:"92px",text:e.$t("Cancel"),type:"danger","styling-mode":"outlined",onOnClick:f=>J(s.data)},null,8,["text","onOnClick"])):Ie("",!0)])]),_:1},8,["loading","dataSource","columns","total","pageIndex","pageSize"])])]),S(fe,{title:e.$t("CancelOrder"),content:e.$t("ContentCancelOrder"),isVisible:y.value,loading:N.value,textButton:e.$t("Agree"),onClosePopup:k,onOnDelete:ee},null,8,["title","content","isVisible","loading","textButton"])],64))}});const na=me(we,[["__scopeId","data-v-277817c6"]]);export{na as default};
