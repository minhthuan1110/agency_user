import{d as ns,di as ls,e as K,dr as D,u as ds,ds as is,f as rs,r as i,o as cs,g as T,h as C,i as s,t as d,k as l,x as r,n as k,dP as R,y as x,m as j,cR as us,F as ws,p as hs,q as ps,B as fs,dG as ms,dK as z,dO as F,dJ as _s,s as vs}from"./index.a3c5a5ee.js";import G from"./BaseSelectBox.e7e590d5.js";import{B as I}from"./BaseInput.9f8543fa.js";import{S as gs}from"./settings-service.66568a43.js";import"./select_box.05db16a2.js";import"./text_box.c18f19ed.js";const c=p=>(hs("data-v-c2c5c96c"),p=p(),ps(),p),Ps={class:"container profile-container"},Ts={class:"title mb-4"},Cs={class:"card"},ys={class:"mb-3 row w-100"},Ss={class:"w-30"},bs=c(()=>s("span",{style:{color:"red"}}," *",-1)),ks={class:"flex1 input_cus"},xs=["value"],Is={class:"mb-3 row w-100"},$s={class:"w-30"},Ns=c(()=>s("span",{style:{color:"red"}}," *",-1)),Ls={class:"flex1 input_cus"},Vs=["value"],Bs=c(()=>s("span",{class:"focus-border"},null,-1)),Es={class:"mb-3 row w-100"},Ms={class:"w-30"},Os=c(()=>s("span",{style:{color:"red"}}," *",-1)),Us={class:"flex1 input_cus"},As=["value"],Ks=c(()=>s("span",{class:"focus-border"},null,-1)),Ds={class:"mb-3 row w-100"},Rs=c(()=>s("div",{class:"w-30"},[s("span",null,"Email"),s("span",{style:{color:"red"}}," *")],-1)),js={class:"flex1 input_cus"},zs=["value"],Fs=c(()=>s("span",{class:"focus-border"},null,-1)),Gs={key:0,class:"mb-3 row w-100"},qs={class:"w-30"},Hs={class:"flex1 input_cus"},Js={class:"select-container text-14"},Ws={key:1,class:"mb-3 row w-100"},Qs={class:"w-30"},Xs={class:"flex1 profile-input"},Ys={class:"select-container settingColor text-14 d-flex align-center justify-space-around"},Zs={class:"wrapSettingColor input_cus"},se={class:"settingColorInput"},ee={key:2,class:"mb-3 row w-100"},oe={class:"w-30"},te={class:"flex1 input_cus"},ae=["value"],ne=c(()=>s("span",{class:"focus-border"},null,-1)),le={class:"row justify-content-between pt-1 list-button"},de={class:"row justify-content-end"},ie={class:"auth-form"},re={class:"form-change-password"},ce={class:"d-flex align-items-center mb-3"},ue={for:"forgot-password-phone",class:"w-40"},we={class:"pl-0 w-80"},he={class:"d-flex align-items-center mb-3"},pe={for:"forgot-password-phone",class:"form-label col-form-label w-40"},fe={class:"pl-0 w-80"},me={class:"d-flex align-items-center mb-3"},_e={for:"forgot-password-phone",class:"form-label col-form-label w-40"},ve={class:"pl-0 w-80"},ge=ns({__name:"Profile_Theme3",setup(p){const $=ls(),N=K(()=>$.colorLandingTheme.value);D(N.value);const u=ds(),w=new fs,q=is(),a=K(()=>rs(q.state.userInfo||{userName:"",normalizedUserName:"",name:"",surName:"",phoneNumber:"",email:"",normalizedEmail:"",socialNetwork:null,balance:0,settings:{consoleTheme:"Default",landingTheme:"Default",currency:""},id:""})),f=i(!1);let h=i({confirm_password:"",newPassword:"",password:""}),L=i([]),H=i([]);const y=i(!1),m=i(!1),_=i({Mode:"password",IsShowPassword:!1}),v=i({Mode:"password",IsShowPassword:!1}),g=i({Mode:"password",IsShowPassword:!1});cs(()=>{os()});async function S(e=""){return await(u==null?void 0:u.recaptchaLoaded()),await(u==null?void 0:u.executeRecaptcha(e))}function P(e,o){!e||!o||(a.value[o]=e.target.value)}async function J(){var B,E,M,O,U,A;const e=ms(z.AutoLike_Theme);y.value=!0;const t={headers:{captcha:await S("UpdateUserInfo")}},n=await F.updateUserInfo(a.value,t);n&&n.data?(w.showToastSuccess("The information was updated successfully"),console.log("1: ",(E=(B=n.data)==null?void 0:B.settings)==null?void 0:E.consoleTheme),console.log("2: ",e),e!=((O=(M=n.data)==null?void 0:M.settings)==null?void 0:O.consoleTheme)&&(_s(z.AutoLike_Theme,((A=(U=a==null?void 0:a.value)==null?void 0:U.settings)==null?void 0:A.consoleTheme)||"Default"),window.location.href=window.location.origin)):w.showToastError("An error has occurred"),y.value=!1}function W(e){f.value=!1}function Q(e){f.value=!0}function b(e,o){!e||!o||(h.value[o]=e)}function X(e){Y(h.value)}async function Y(e){if(e.newPassword!=e.confirm_password){w.showToastWarning("Confirm password failed!");return}m.value=!0;try{const t={headers:{captcha:await S("ChangePassword")}},n=await F.changePassword(e,t);n&&(n==null?void 0:n.data)?(f.value=!1,w.showToastSuccess("Change password success!")):w.showToastError(n==null?void 0:n.message),m.value=!1}catch(o){w.showToastError(o==null?void 0:o.message),m.value=!1}}function Z(e){_.value.Mode=e?"text":"password",_.value.IsShowPassword=e}function ss(e){g.value.Mode=e?"text":"password",g.value.IsShowPassword=e}function es(e){v.value.Mode=e?"text":"password",v.value.IsShowPassword=e}async function os(){const o={headers:{captcha:await S("GetAllTheme")}},t=await gs.getAllTheme(o);if(t&&t.data){const n=t.data;L.value=n.consoleThemes,H.value=n.landingThemes}}function V(e,o){!e||!o||(e.target?a.value.settings[o]=e.target.value:a.value.settings[o]=e)}function ts(e){setTimeout(()=>{e.component.focus()},0)}const as=e=>{if(!e)return;const o=R.filter(t=>t.id==e);$.setColorLandingTheme(o[0]),D(o[0])};return(e,o)=>(T(),C(ws,null,[s("div",Ps,[s("div",Ts,d(e.$t("Profile")),1),s("div",Cs,[s("div",ys,[s("div",Ss,[s("span",null,d(e.$t("Surname")),1),bs]),s("div",ks,[s("input",{class:"effect-2 px-2",value:l(a).surName,placeholder:"Enter surname",onKeyup:o[0]||(o[0]=t=>P(t,"surName"))},null,40,xs)])]),s("div",Is,[s("div",$s,[s("span",null,d(e.$t("Comment.Name")),1),Ns]),s("div",Ls,[s("input",{class:"effect-2 px-2",value:l(a).name,placeholder:"Enter name",onKeyup:o[1]||(o[1]=t=>P(t,"name"))},null,40,Vs),Bs])]),s("div",Es,[s("div",Ms,[s("span",null,d(e.$t("UserName")),1),Os]),s("div",Us,[s("input",{class:"effect-2 px-2",value:l(a).userName,disabled:!0,onKeyup:o[2]||(o[2]=t=>P(t,"userName"))},null,40,As),Ks])]),s("div",Ds,[Rs,s("div",js,[s("input",{class:"effect-2 px-2",value:l(a).email,placeholder:"Enter email",onKeyup:o[3]||(o[3]=t=>P(t,"email"))},null,40,zs),Fs])]),l(a).settings?(T(),C("div",Gs,[s("div",qs,[s("span",null,d(e.$t("UserTheme")),1)]),s("div",Hs,[s("div",Js,[r(G,{class:"effect-2",items:l(L),value:l(a).settings.consoleTheme,onOnValueChanged:o[4]||(o[4]=t=>V(t,"consoleTheme"))},null,8,["items","value"])])])])):k("",!0),l(a).settings?(T(),C("div",Ws,[s("div",Qs,[s("span",null,d(e.$t("LandingTheme")),1)]),s("div",Xs,[s("div",Ys,[s("div",Zs,[s("div",se,[r(G,{class:"effect-2",dataSource:l(R),display:"name",value:l(N).id,keyID:"id",onOnValueChanged:o[5]||(o[5]=t=>as(t))},null,8,["dataSource","value"])])])])])])):k("",!0),l(a).settings?(T(),C("div",ee,[s("div",oe,[s("span",null,d(e.$t("Currency")),1)]),s("div",te,[s("input",{class:"effect-2 px-2",value:l(a).settings.currency,placeholder:"Enter currency",onKeyup:o[6]||(o[6]=t=>V(t,"currency"))},null,40,ae),ne])])):k("",!0),s("div",le,[r(x,{class:"mt-3",text:e.$t("ChangePassword"),type:"default","styling-mode":"contained",onClick:o[7]||(o[7]=t=>Q(t))},null,8,["text"]),s("div",de,[r(x,{class:"mt-3",width:"120px",type:"default","styling-mode":"contained",loading:y.value,text:e.$t("Update"),onClick:o[8]||(o[8]=t=>J(t))},null,8,["loading","text"])])])])]),r(us,{isVisible:f.value,title:e.$t("ChangePassword"),width:"600px",onClosePopup:W},{content:j(()=>[s("div",ie,[s("div",re,[s("div",ce,[s("label",ue,d(e.$t("TitlePassword")),1),s("div",we,[r(I,{value:l(h).password,placeholder:e.$t("PlaceholderPassword"),mode:_.value.Mode,isShowPassword:_.value.IsShowPassword,onOnContentReady:ts,onOnValueChanged:o[9]||(o[9]=t=>b(t,"password")),onOnToggleShowPassword:Z},null,8,["value","placeholder","mode","isShowPassword"])])]),s("div",he,[s("label",pe,d(e.$t("TitleNewPassword")),1),s("div",fe,[r(I,{value:l(h).newPassword,placeholder:e.$t("PlaceholderNewPassword"),mode:g.value.Mode,isShowPassword:g.value.IsShowPassword,onOnValueChanged:o[10]||(o[10]=t=>b(t,"newPassword")),onOnToggleShowPassword:ss},null,8,["value","placeholder","mode","isShowPassword"])])]),s("div",me,[s("label",_e,d(e.$t("TitleConfirmPassword")),1),s("div",ve,[r(I,{value:l(h).confirm_password,placeholder:e.$t("PlaceholderConfirmPassword"),mode:v.value.Mode,isShowPassword:v.value.IsShowPassword,onOnValueChanged:o[11]||(o[11]=t=>b(t,"confirm_password")),onOnToggleShowPassword:es},null,8,["value","placeholder","mode","isShowPassword"])])])])])]),footer:j(()=>[r(x,{text:e.$t("Save"),type:"default","styling-mode":"contained",loading:m.value,onClick:o[12]||(o[12]=t=>X(t))},null,8,["text","loading"])]),_:1},8,["isVisible","title"])],64))}});const ke=vs(ge,[["__scopeId","data-v-c2c5c96c"]]);export{ke as default};
