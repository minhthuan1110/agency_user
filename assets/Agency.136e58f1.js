var W=Object.defineProperty;var z=(m,d,l)=>d in m?W(m,d,{enumerable:!0,configurable:!0,writable:!0,value:l}):m[d]=l;var h=(m,d,l)=>(z(m,typeof d!="symbol"?d+"":d,l),l);import{v as Q,d as X,c as Y,u as Z,ds as ee,e as se,r as y,o as te,g as u,h as r,i as e,t as i,k as c,n as _,x as A,y as T,j as ne,dD as oe,F as ae,p as le,q as ie,dv as ce,B as de,s as ue}from"./index.a3c5a5ee.js";import F from"./BaseSelectBox.e7e590d5.js";import{B as re}from"./BaseInput.9f8543fa.js";import{S as pe}from"./settings.29f754f1.js";import"./auth-service.8a94e5d8.js";import{S as he}from"./settings-service.66568a43.js";import"./select_box.05db16a2.js";import"./text_box.c18f19ed.js";const me=["Agribank","BIDV","Vietcombank","Vietinbank","OCB","ACB","TP Bank","Maritime Bank","Sacombank","VPBank","Techcombank","MB Bank","Bac A Bank","VIB","SeABank","HDBank","Viet Capital Bank"];class J{constructor(d="",l="",p="",f="",N=0,b=new _e,P=new pe,U="",K="",o=""){h(this,"domain");h(this,"title");h(this,"address");h(this,"contact");h(this,"status");h(this,"paymentInformation");h(this,"settings");h(this,"botApiKey");h(this,"botUserName");h(this,"symbol");this.domain=d,this.title=l,this.address=p,this.contact=f,this.status=N,this.paymentInformation=b,this.settings=P,this.botApiKey=U,this.botUserName=K,this.symbol=o}}class _e{constructor(d="",l="",p=""){h(this,"accountName");h(this,"bankName");h(this,"bankNumber");this.accountName=d,this.bankName=l,this.bankNumber=p}}class ve extends Q{constructor(){super(),this.prefixApi="api",this.controllerName="agency",this.initAPI()}async registerAgency(d,l=null){const p=`${this.baseUrl}/${this.prefixApi}/${this.controllerName}/register`;return await this.http.post(p,d,l)}async getAgencyProfile(d=null){const l=`${this.baseUrl}/${this.prefixApi}/${this.controllerName}`;return await this.http.get(l,d)}async updateAgencyProfile(d,l=null){const p=`${this.baseUrl}/${this.prefixApi}/${this.controllerName}`;return await this.http.put(p,d,l)}}const I=new ve,g=m=>(le("data-v-0a07c28b"),m=m(),ie(),m),ge={class:"container profile-container"},ye={class:"title mb-4"},fe={class:"card"},we={class:"mb-3 row w-100"},Ae={class:"w-30"},be={class:"flex1 input_cus"},ke=["value","placeholder"],Ve=g(()=>e("span",{class:"focus-border"},null,-1)),$e={key:0,class:"mb-3 row w-100"},Ce={class:"w-30"},Ne={class:"flex1 profile-input"},Be={key:0,class:"tag pending"},Se={key:1,class:"tag completed"},Te={key:2,class:"tag deleted"},Ie={key:1,class:"mb-3 row w-100"},Pe=g(()=>e("div",{class:"w-30"},null,-1)),Ue={class:"content-detail"},Ke={class:"flex1 profile-input"},Oe={key:2,class:"mb-3 row w-100"},De={class:"w-30"},xe={class:"flex1 input_cus"},Ee=["value"],Le=g(()=>e("span",{class:"focus-border"},null,-1)),Fe={key:3,class:"mb-3 row w-100"},Je={class:"w-30"},Re={class:"flex1 input_cus"},Me=["value"],je=g(()=>e("span",{class:"focus-border"},null,-1)),Ge={key:4,class:"mb-3 row w-100"},qe={class:"w-30"},He={class:"flex1 input_cus"},We=["value","placeholder"],ze=g(()=>e("span",{class:"focus-border"},null,-1)),Qe={key:5,class:"mb-3 row w-100"},Xe={class:"w-30"},Ye={class:"flex1 input_cus"},Ze=["value","placeholder"],es=g(()=>e("span",{class:"focus-border"},null,-1)),ss={key:6,class:"mb-3 row w-100"},ts={class:"w-30"},ns={class:"flex1 input_cus"},os=["value","placeholder"],as=g(()=>e("span",{class:"focus-border"},null,-1)),ls={key:7,class:"mb-3 row w-100"},is={class:"w-30"},cs={class:"flex1 profile-input"},ds={class:"content-detail"},us={class:"row w-full"},rs={class:"w-30"},ps={class:"input_cus w-70"},hs=["value","placeholder"],ms=g(()=>e("span",{class:"focus-border"},null,-1)),_s={class:"row mt-3"},vs={class:"w-30"},gs={class:"input_cus w-70"},ys=["value","placeholder"],fs=g(()=>e("span",{class:"focus-border"},null,-1)),ws={class:"row mt-3"},As={class:"w-30"},bs={class:"input_cus"},ks=["value","placeholder"],Vs=g(()=>e("span",{class:"focus-border"},null,-1)),$s={key:8,class:"mb-3 row w-100"},Cs={class:"w-30"},Ns={class:"flex1 profile-input"},Bs={class:"content-detail"},Ss={class:"row"},Ts={class:"w-30"},Is={class:"w-70 flex1 input_cus"},Ps={class:"row mt-3"},Us={class:"w-30"},Ks={class:"w-70 flex1 input_cus"},Os={class:"row mt-3"},Ds={class:"w-30"},xs={class:"row justify-content-end"},Es={key:0},Ls={key:1},Fs=X({__name:"Agency",setup(m){const{emit:d}=ce(),{t:l}=Y(),p=Z(),f=new de,N=ee(),b=se(()=>JSON.parse(JSON.stringify(N.state.userInfo||{}))),P=y(!1);let U=y({confirm_password:"",newPassword:"",password:""});const K=JSON.parse(JSON.stringify(me));let o=y(new J),O=y([]),D=y([]);const w=y(!1),v=y(!0),k=y(!1);te(()=>{R(),G()});async function V(s=""){return await(p==null?void 0:p.recaptchaLoaded()),await(p==null?void 0:p.executeRecaptcha(s))}function x(s,t){!s||!t||(b.value[t]=s.target.value)}async function R(){const t={headers:{captcha:await V("GetAllTheme")}},n=await he.getAllTheme(t);if(n&&n.data){const a=n.data;O.value=a.consoleThemes,D.value=a.landingThemes}}function B(s,t){!s||!t||(o.value.settings[t]=s)}function S(s,t){!s||!t||(o.value.paymentInformation[t]=s.target.value)}function $(s,t){!s||!t||(o.value[t]=s.target.value)}async function M(s){var L;w.value=!0;const n={headers:{captcha:await V("AddAgency")}},a=await I.registerAgency(o.value,n);if(a&&a.data)v.value=!1,o.value=a.data,f.showToastSuccess(l("AgencyV2.AddAgency_Success"));else{const C=(L=a==null?void 0:a.messages)==null?void 0:L.domain;(C==null?void 0:C.length)>0?f.showToastError(C[0]):f.showToastError(l("AgencyV2.AddAgency_Fail"))}w.value=!1}async function j(s){w.value=!0;const n={headers:{captcha:await V("UpdateAgency")}},a=await I.updateAgencyProfile(o.value,n);a&&a.data?f.showToastSuccess(l("AgencyV2.UpdateAgency_Success")):f.showToastError(l("AgencyV2.UpdateAgency_Fail")),w.value=!1}async function G(){const t={headers:{captcha:await V("GetAgencyInfo")}},n=await I.getAgencyProfile(t);if(n&&n.data){v.value=!1;const a=n.data;o.value=new J(a.domain,a.title,a.address,a.contact,a.status,a.paymentInformation?a.paymentInformation:o.value.paymentInformation,a.settings?a.settings:o.value.settings,a.botApiKey,a.botUserName,a.symbol)}}function E(){k.value=!0}function q(){k.value=!1}function H(){}return(s,t)=>(u(),r(ae,null,[e("div",ge,[e("div",ye,i(s.$t("AgencyV2.Agency")),1),e("div",fe,[e("div",we,[e("div",Ae,[e("span",null,i(s.$t("AgencyV2.Domain")),1)]),e("div",be,[e("input",{class:"effect-2 px-2",value:c(o).domain,placeholder:s.$t("AgencyV2.Domain_Placeholder"),onKeyup:t[0]||(t[0]=n=>$(n,"domain"))},null,40,ke),Ve])]),v.value?_("",!0):(u(),r("div",$e,[e("div",Ce,[e("span",null,i(s.$t("Common.Status")),1)]),e("div",Ne,[c(o).status==0?(u(),r("div",Be,i(s.$t("Status.Waiting")),1)):_("",!0),c(o).status==1?(u(),r("div",Se,i(s.$t("Status.Completed")),1)):_("",!0),c(o).status==4?(u(),r("div",Te,i(s.$t("Status.Delete")),1)):_("",!0)])])),c(b).telegramId?_("",!0):(u(),r("div",Ie,[Pe,e("div",Ue,[e("div",Ke,[e("div",null,[e("div",null,[e("b",null,i(s.$t("AgencyV2.NoteConnectTelegram")),1)]),A(T,{"styling-mode":"contained",class:"mt-2",text:s.$t("Common.Connect"),onOnClick:E},null,8,["text"])])])])])),v.value?_("",!0):(u(),r("div",Oe,[e("div",De,[e("span",null,i(s.$t("AgencyV2.Symbol")),1)]),e("div",xe,[e("input",{class:"effect-2 px-2",value:c(o).symbol,disabled:!0,onKeyup:t[1]||(t[1]=n=>x(n,"symbol"))},null,40,Ee),Le])])),v.value?_("",!0):(u(),r("div",Fe,[e("div",Je,[e("span",null,i(s.$t("AgencyV2.BotUserName")),1)]),e("div",Re,[e("input",{class:"effect-2 px-2",value:c(o).botUserName,disabled:!0,onKeyup:t[2]||(t[2]=n=>x(n,"botUserName"))},null,40,Me),je])])),v.value?_("",!0):(u(),r("div",Ge,[e("div",qe,[e("span",null,i(s.$t("AgencyV2.Title")),1)]),e("div",He,[e("input",{class:"effect-2 px-2",value:c(o).title,placeholder:s.$t("AgencyV2.Title_Placeholder"),onKeyup:t[3]||(t[3]=n=>$(n,"title"))},null,40,We),ze])])),v.value?_("",!0):(u(),r("div",Qe,[e("div",Xe,[e("span",null,i(s.$t("AgencyV2.Address")),1)]),e("div",Ye,[e("input",{class:"effect-2 px-2",value:c(o).address,placeholder:s.$t("AgencyV2.Address_Placeholder"),onKeyup:t[4]||(t[4]=n=>$(n,"address"))},null,40,Ze),es])])),v.value?_("",!0):(u(),r("div",ss,[e("div",ts,[e("span",null,i(s.$t("AgencyV2.ContactInformation")),1)]),e("div",ns,[e("input",{class:"effect-2 px-2",value:c(o).contact,placeholder:s.$t("AgencyV2.ContactInformation_Placeholder"),onKeyup:t[5]||(t[5]=n=>$(n,"contact"))},null,40,os),as])])),v.value?_("",!0):(u(),r("div",ls,[e("div",is,i(s.$t("AgencyV2.PaymentInformation")),1),e("div",cs,[e("div",ds,[e("div",us,[e("div",rs,i(s.$t("AgencyV2.BankName")),1),e("div",ps,[e("input",{class:"effect-2 px-2",value:c(o).paymentInformation.bankName,placeholder:s.$t("AgencyV2.BankName_Placeholder"),onKeyup:t[6]||(t[6]=n=>S(n,"bankName"))},null,40,hs),ms])]),e("div",_s,[e("div",vs,i(s.$t("AccountNumber")),1),e("div",gs,[e("input",{class:"effect-2 px-2",value:c(o).paymentInformation.bankNumber,placeholder:s.$t("AgencyV2.AccountNumber_Placeholder"),onKeyup:t[7]||(t[7]=n=>S(n,"bankNumber"))},null,40,ys),fs])]),e("div",ws,[e("div",As,i(s.$t("AccountName")),1),e("div",bs,[e("input",{class:"effect-2 px-2 w-70",value:c(o).paymentInformation.accountName,placeholder:s.$t("AgencyV2.AccountName_Placeholder"),onKeyup:t[8]||(t[8]=n=>S(n,"accountName"))},null,40,ks),Vs])])])])])),c(o).settings&&!v.value?(u(),r("div",$s,[e("div",Cs,i(s.$t("AgencyV2.Settings")),1),e("div",Ns,[e("div",Bs,[e("div",Ss,[e("div",Ts,i(s.$t("AgencyV2.UserTheme")),1),e("div",Is,[A(F,{class:"effect-2",items:c(O),value:c(o).settings.consoleTheme,placeholder:s.$t("AgencyV2.UserTheme_Placeholder"),onOnValueChanged:t[9]||(t[9]=n=>B(n,"consoleTheme"))},null,8,["items","value","placeholder"])])]),e("div",Ps,[e("div",Us,i(s.$t("AgencyV2.LandingTheme")),1),e("div",Ks,[A(F,{class:"effect-2",items:c(D),value:c(o).settings.landingTheme,placeholder:s.$t("AgencyV2.LandingTheme_Placeholder"),onOnValueChanged:t[10]||(t[10]=n=>B(n,"landingTheme"))},null,8,["items","value","placeholder"])])]),e("div",Os,[e("div",Ds,i(s.$t("AgencyV2.Currency")),1),A(re,{class:"w-70",value:c(o).settings.currency,placeholder:"Enter currency",onOnValueChanged:t[11]||(t[11]=n=>B(n,"currency"))},null,8,["value"])])])])])):_("",!0),e("div",xs,[v.value?(u(),r("div",Es,[A(T,{icon:"add",class:"ml-3 mt-3",type:"default","styling-mode":"contained",text:s.$t("AgencyV2.Register"),loading:w.value,onClick:t[12]||(t[12]=n=>M(n))},null,8,["text","loading"])])):(u(),r("div",Ls,[A(T,{class:"ml-3 mt-3",type:"default","styling-mode":"contained",text:s.$t("Common.Update"),loading:w.value,onClick:t[13]||(t[13]=n=>j(n))},null,8,["text","loading"])]))])])]),k.value?(u(),ne(oe,{key:0,isVisible:k.value,onClosePopup:q,onOnClick:E,onOnConnectSuccess:H},null,8,["isVisible"])):_("",!0)],64))}});const Qs=ue(Fs,[["__scopeId","data-v-0a07c28b"]]);export{Qs as default};
