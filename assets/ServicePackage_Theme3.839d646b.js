import{d as ve,dh as me,k as s,di as Ie,e as y,u as Te,b as fe,r as n,c as Ee,f,w as ge,o as Se,g as W,h as he,i as r,x as c,m as Q,dj as F,dk as H,j as Ce,y as ye,n as Ae,dl as Oe,F as Ne,p as De,q as xe,B as Pe,s as Ve}from"./index.a3c5a5ee.js";import{_ as we}from"./BaseGrid.e652126b.js";import Z from"./BaseSelectBox.e7e590d5.js";import Le from"./BasePopupDelete.b52e37da.js";import{C as l}from"./ColumnDataGrid.23bec9a2.js";import{L as Re,a as ke,b as be,O as X}from"./order-service.5ecf97c1.js";import Ue from"./CreateOrder.d772a0fc.js";import{L as Me}from"./list-status.a9bf9ad2.js";import{L as Be}from"./list-application.74b2f8af.js";import{D as J,_ as Ke}from"./tabs.8d37648c.js";import Ye from"./CreateOrderRight.d7789d34.js";import{l as ze}from"./idService.096f6176.js";import"./select_box.05db16a2.js";import"./text_box.c18f19ed.js";import"./popover.51293f7e.js";import"./number_box.546ccd32.js";import"./draggable.1b572f7d.js";import"./BaseRadioGroup.b3beaa81.js";import"./service-type-enum.bf595476.js";import"./comments-service.768ee57a.js";import"./list-bank-v2.764adf30.js";const Ge=E=>(De("data-v-6ec0642b"),E=E(),xe(),E),$e={class:"container",id:"service-theme3"},qe=Ge(()=>r("div",{class:"d-flex justify-content-between align-items-center mb-3"},null,-1)),je={class:"d-flex box-oder-like"},We={class:"box-left"},Qe={class:"d-flex"},Fe={class:"mr-2",style:{display:"none"}},He={class:"grid-service-package mt-3"},Ze={class:"d-flex align-items-center"},Xe=ve({__name:"ServicePackage_Theme3",setup(E){me(e=>({"4608544e":s(R),"5c645034":s(ee),"13dae6e5":s(ae)}));const A=Ie(),R=y(()=>A.color.value),ee=y(()=>A.colorText.value),ae=y(()=>A.colorBorder.value),p=Te(),O=fe(),g=n(0),{t:i}=Ee(),k=new Pe;let N=n(1),S=n(25),b=n(0);const te=y(()=>{var e,a,o;return{Application:((e=M.value)==null?void 0:e.ID)||0,Status:(a=h.value)==null?void 0:a.ID,ServiceType:(o=I.value)==null?void 0:o.ID,SkipCount:(N.value-1)*S.value,MaxResultCount:S.value}}),U=n(new Array);let D=n([]),x=n(!1);const Je={symbol:{VITE_BASE_URL:"https://api.like1.online",VITE_CLIENT_ID:"admin_autofarmer",VITE_CLIENT_SECRET:"K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",VITE_ORIGIN_AGENCY:"auto",VITE_VIETQR_URL:"https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",VITE_VIETQR_TEMPLATE:"SquX4mZ",VITE_LINK_APP_DESKTOP:"https://shorturl.at/akrZ5",VITE_LINK_APP_MOBILE:"https://shorturl.at/lzIOY",VITE_SITE_KEY:"6LeElsojAAAAAFM3pM6lp0GYtpITw_6x2bzj4L8W",VITE_IS_USE_RECAPTCHA:"true",VITE_TIMEOUT_TRANSACTON:"5000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APPROVE_AGENCY_SYMBOL,ip:{VITE_BASE_URL:"https://api.like1.online",VITE_CLIENT_ID:"admin_autofarmer",VITE_CLIENT_SECRET:"K7gNU3sdo+OL0wNhqoVWhr3g6s1xYv72ol/pe/Unols=",VITE_ORIGIN_AGENCY:"auto",VITE_VIETQR_URL:"https://img.vietqr.io/image/<BANK_ID>-<ACCOUNT_NO>-<TEMPLATE>.png?amount=<AMOUNT>&addInfo=<DESCRIPTION>&accountName=<ACCOUNT_NAME>",VITE_VIETQR_TEMPLATE:"SquX4mZ",VITE_LINK_APP_DESKTOP:"https://shorturl.at/akrZ5",VITE_LINK_APP_MOBILE:"https://shorturl.at/lzIOY",VITE_SITE_KEY:"6LeElsojAAAAAFM3pM6lp0GYtpITw_6x2bzj4L8W",VITE_IS_USE_RECAPTCHA:"true",VITE_TIMEOUT_TRANSACTON:"5000",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APPROVE_AGENCY_IP},ea=n(!1),aa=n(!1),ta=n(!1),P=f(Be),m=f(Re),ne=f(ke),_=n([]),M=n(P[0]),I=n(),B=()=>{const e=ze.find(a=>O.path.toLowerCase().includes(a.id.toLowerCase()));e?I.value=m.find(a=>a.ID==e[O.params.service]):B()},h=n({}),na=n(!1),oe=f(be),V=n(!1),w=n(!1);let K="";ge(()=>O.path,async e=>{M.value=P.find(a=>a.Path==e),B(),v()},{immediate:!0}),Se(()=>{se()});async function Y(e=""){return await(p==null?void 0:p.recaptchaLoaded()),await(p==null?void 0:p.executeRecaptcha(e))}function se(){_.value=f(Me),_.value.forEach(e=>{e.StatusDisplay=i(e.ResourceKey)}),h.value=_.value[1],U.value=[new l("#","Index","60px"),new l(i("Order.Code"),"code"),new l(i("Order.UrlService"),"urlService","320px"),new l(i("Order.Quantity"),"quantity","auto","","left",!1,"","","number","#,##0.##"),new l(i("Order.Completed"),"completedQuantity","auto","","left",!1,"","","number","#,##0.##"),new l(i("Order.Speed"),"SpeedDisplay"),new l(i("Order.Warranty"),"WarrantyDisplay"),new l(i("Order.Total"),"price","120px","","left",!1,"","","number","#,##0.## \u0111"),new l(i("Order.CreatedDate"),"creationTime","auto","","center",!1,"","","date","dd/MM/yyyy HH:mm:ss"),new l(i("Order.Action"),"action","125px","custom","center",!0,"right")]}function re(e){const a=new URLSearchParams;return a.append("application",e.Application),a.append("status",e.Status),a.append("serviceType",e.ServiceType),a.append("skipCount",e.SkipCount),a.append("maxResultCount",e.MaxResultCount),a}async function v(){x.value=!0,D.value=[];const e=await Y("GetOrder"),o={params:re(te.value),headers:{captcha:e}},C=await X.getPaging(o);if(C&&C.data){const L=C.data;b.value=L.totalCount,L.items.forEach((t,_e)=>{var G,$,q,j;t.Index=_e+1,t.Fullname=(t.user.surName||"")+" "+(t.user.name||""),(t.user.name?t.user.name+" - ":"")+t.user.phoneNumber,t.ApplicationDisplay=((G=P.find(d=>{var u,T;return d.ID==((T=(u=t.service)==null?void 0:u.service)==null?void 0:T.application)}))==null?void 0:G.Name)||"",t.ServiceTypeDisplay=(($=m.find(d=>{var u,T;return d.ID==((T=(u=t.service)==null?void 0:u.service)==null?void 0:T.serviceType)}))==null?void 0:$.Name)||"",t.speed&&(t.SpeedDisplay=((q=oe.find(d=>{var u;return d.ID==((u=t.speed)==null?void 0:u.type)}))==null?void 0:q.Name)||""),t.warranty&&(t.WarrantyDisplay=t.warranty.time+" "+((j=ne.find(d=>d.ID==t.warranty.timeUnit))==null?void 0:j.Name)||"")}),D.value=L.items}setTimeout(()=>{x.value=!1},50)}function ie(e){S.value=e,v()}function le(e){N.value=e,v()}function ce(e){I.value=m.find(a=>a.ID==e)||m[0],v()}function ue(e){h.value=_.value.find(a=>a.ID==e)||_.value[0],v()}function de(e){!e||(K=e.id,V.value=!0)}function z(){w.value=!1,V.value=!1}async function pe(){w.value=!0;const a={headers:{captcha:await Y("CancelOrder")}},o=await X.cancelOrder(K,null,a);o&&o.data?(k.showToastSuccess("Cancel Order Success!"),v()):k.showToastError("Cancel Order Error!"),z()}return(e,a)=>(W(),he(Ne,null,[r("div",$e,[qe,r("div",je,[r("div",We,[c(s(Ke),{"selected-index":g.value,"onUpdate:selected-index":a[0]||(a[0]=o=>g.value=o),style:{margin:"10px 0px",padding:"15px","background-color":"#ffffff","border-radius":"10px"}},{default:Q(()=>[c(s(J),{badge:e.$t("Buy_Service")},null,8,["badge"]),c(s(J),{badge:e.$t("History")},null,8,["badge"])]),_:1},8,["selected-index"]),F(r("div",null,[r("div",Qe,[r("div",Fe,[c(Z,{width:"200px",keyID:"ID",display:"Name",dataSource:s(m),value:I.value.ID,searchEnabled:!1,onOnValueChanged:a[1]||(a[1]=o=>ce(o))},null,8,["dataSource","value"])]),r("div",null,[c(Z,{width:"200px",keyID:"ID",display:"StatusDisplay",dataSource:_.value,value:h.value.ID,searchEnabled:!1,onOnValueChanged:a[2]||(a[2]=o=>ue(o))},null,8,["dataSource","value"])])]),r("div",He,[c(we,{loading:s(x),dataSource:s(D),columns:U.value,total:s(b),pageIndex:s(N),pageSize:s(S),width:"100%",height:"calc(100vh - 261px)",onChangePageSize:ie,onChangePageIndex:le},{action:Q(({data:o})=>[r("div",Ze,[o.data.status==1?(W(),Ce(ye,{key:0,width:"92px",text:e.$t("Cancel"),type:"danger","styling-mode":"outlined",onOnClick:C=>de(o.data)},null,8,["text","onOnClick"])):Ae("",!0)])]),_:1},8,["loading","dataSource","columns","total","pageIndex","pageSize"])])],512),[[H,g.value==1]]),F(r("div",null,[c(Ue)],512),[[H,g.value==0]])]),r("div",{class:"box-right",style:Oe(`background-color: ${s(R)}; opacity: 0.8`)},[c(Ye,{activeServiceTypeName:I.value.Name},null,8,["activeServiceTypeName"])],4)])]),c(Le,{title:e.$t("CancelOrder"),content:e.$t("ContentCancelOrder"),isVisible:V.value,loading:w.value,textButton:e.$t("Agree"),onClosePopup:z,onOnDelete:pe},null,8,["title","content","isVisible","loading","textButton"])],64))}});const Oa=Ve(Xe,[["__scopeId","data-v-6ec0642b"]]);export{Oa as default};
